(this["webpackJsonpelite-navigator-web"]=this["webpackJsonpelite-navigator-web"]||[]).push([[0],{126:function(e,t){},149:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(20),i=n.n(s),c=(n(92),n(94),n(11)),o=n.n(c),l=n(8),u=n(14),m=n(48),f=n(6),d=(n(96),n(156)),h=n(161),y=n(157),v=n(159),p=n(155),b=n(76),g=n.n(b),E=null,S=null,j=null;function O(e){return k.apply(this,arguments)}function k(){return(k=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=t.replace("ws://",""))||(t="127.0.0.1"),t.includes(":")||(t+=":4777"),(t="ws://"+t)!==S||!j){e.next=6;break}return e.abrupt("return",j);case 6:return E&&E.close(),E=null,S=t,j=new Promise((function(e,n){var a=g.a.connect(t);E=a,a.on("connect",(function(){console.log("Connected");document.addEventListener("visibilitychange",(function e(){a===E?"visible"!==document.visibilityState||a.connected||a.connect():document.removeEventListener("visibilitychange",e)})),S=j=null,e(a)})),a.on("error",(function(e){S=j=null,n(e)})),a.on("disconnect",(function(){console.log("Disconnected")}))})),e.abrupt("return",j);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=r.a.createContext(null),w=r.a.createContext(null),x=r.a.createContext(null),N=r.a.createContext(null),C=r.a.createContext(null),D=n(13),L=n(28),T=n(29),F=n(46),M=n.n(F),P=n(77),B=Object(P.setupCache)({maxAge:24e4}),R=M.a.create({adapter:B.adapter}),z=function(){function e(t){var n=this;Object(L.a)(this,e),this.ships=t.ships,this.modules=t.modules,this.systems=t.systems,this.stations=t.stations,this.bodies=t.bodies,console.assert(Object.keys(t).every((function(e){return n.hasOwnProperty(e)}))),this.materialTypes=["Raw","Manufactured","Encoded"],this.ringTypes=["Rocky","Icy","Metallic","Metal Rich"],this.searchOptions=[],this._relativeSystem=null,this._sortedSystems=[],this._sortedStations=[],this._sortedBodies=[]}return Object(T.a)(e,[{key:"_getSearchTerms",value:function(e){return e?Object(l.a)(new Set(e.toString().toLowerCase().replace(/[^a-z0-9 ]/," ").split(" ").map((function(e){return e.trim()})).filter((function(e){return!!e})))).sort():[]}},{key:"_registerSearch",value:function(e,t){var n=this;return t._type=e,t._searchTerms=Object(l.a)(new Set([t.name].concat(Object(l.a)(Object.values(t.attributes).filter((function(e){return"string"===typeof e})))).filter((function(e){return!!e})).flatMap((function(e){return n._getSearchTerms(e)})).map((function(e){return e.trim()})).filter((function(e){return e})))).sort(),this.searchOptions.push(t),t}},{key:"_resolve",value:function(e,t){return("string"===typeof t?e[t.toLowerCase()]:"number"===typeof t?e[t]:t)||null}},{key:"getShip",value:function(e){return this._resolve(this.ships,e)}},{key:"getModule",value:function(e){return this._resolve(this.modules,e)}},{key:"getSystem",value:function(e){return this._resolve(this.systems,e)}},{key:"getStation",value:function(e){if(Array.isArray(e)){var t=this.getSystem(e[0]);return t&&t.stations[e[1]]||null}return this._resolve(this.stations,e)}},{key:"getBody",value:function(e){return this._resolve(this.bodies,e)}},{key:"getDistanceBetweenSystems",value:function(e,t){var n=e.x-t.x,a=e.y-t.y,r=e.z-t.z;return Math.round(Math.sqrt(Math.pow(n,2)+Math.pow(a,2)+Math.pow(r,2)))}},{key:"getRelativeSystem",value:function(){return this._relativeSystem}},{key:"setRelativeSystem",value:function(e){var t=this;if(e=this.getSystem(e),this._relativeSystem===e)return e;this._relativeSystem=e;return this._sortedSystems.forEach((function(n){return function e(t,n){t*=1+(n._distanceModifier||0),n._currentDistance=t,n._children&&n._children.forEach((function(n){return e(t,n)}))}(e?t.getDistanceBetweenSystems(e,n):0,n)})),this._sortedSystems.sort((function(t,n){return e?t._currentDistance-n._currentDistance:t.name-n.name})),this._sortedStations.sort((function(t,n){return e?t._currentDistance-n._currentDistance:t.name-n.name})),this._sortedBodies.sort((function(t,n){return e?t._currentDistance-n._currentDistance:t.name-n.name})),e}},{key:"getNearestSystems",value:function(e,t){var n=[];if(arguments.length<2)t=Number.POSITIVE_INFINITY;else if(t<=0)return n;if(!e)return this._sortedSystems.slice(0,t);var a,r=Object(D.a)(this._sortedSystems);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(e(s)&&(n.push(s),n.length>=t))break}}catch(i){r.e(i)}finally{r.f()}return n}},{key:"getNearestStations",value:function(e,t){var n=[];if(arguments.length<2)t=Number.POSITIVE_INFINITY;else if(t<=0)return n;if(!e)return this._sortedStations.slice(0,t);var a,r=Object(D.a)(this._sortedStations);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(e(s)&&(n.push(s),n.length>=t))break}}catch(i){r.e(i)}finally{r.f()}return n}},{key:"getNearestRingBodies",value:function(e,t){var n=[];if(t<=0)return n;var a,r=Object(D.a)(this._sortedBodies);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(s.rings){var i,c=Object(D.a)(s.rings);try{for(c.s();!(i=c.n()).done;){var o=i.value;if(!e||o.type===e){n.push(s);break}}}catch(l){c.e(l)}finally{c.f()}if(n.length>=t)break}}}catch(l){r.e(l)}finally{r.f()}return n}},{key:"_isSearchRelevant",value:function(e,t){if(!e||!t)return!!e;var n=this._getSearchTerms(e),a=this._getSearchTerms(t);return n.some((function(e){return a.some((function(t){return t.startsWith(e)}))}))}},{key:"search",value:function(e){if(!e.trim())return[];var t=this.searchOptions.filter((function(t){return t.name&&t.name.toLowerCase()===e})),n=[],a=this._getSearchTerms(e);if(!a.length)return n;for(var r=3-a.length,s=this.searchOptions,i=s.length,c=a.length,o=0;o<i;o++){for(var u=s[o],m=!0,f=0;f<c;f++){var d=a[f],h=d.length;h<r&&(h=r);for(var y=u._searchTerms,v=y.length,p=!1,b=0;b<v;b++){var g=y[b].substring(0,h);if(g===d&&(p=!0),g>=d)break}if(!p){m=!1;break}}m&&!t.includes(u)&&n.push(u)}return n.sort((function(e,t){return(e._currentDistance||0)-(t._currentDistance||0)})),[].concat(Object(l.a)(t),n)}}]),e}();function I(){return{Group:this.groupName,Class:"".concat(this.class).concat(this.rating),Ship:this.ship&&this.ship.name,Category:this.category,Mode:this.mode}}function A(){return{Allegiance:this.allegiance,Power:this.power,"Power state":this.powerState,"System state":this.states.join(", "),Resources:this.reserveType,Habitation:this.population?"Populated":"Unpopulated",Population:this.population}}function U(){return{Type:this.Type,Economy:this.economies.join(", "),Services:this.services.join(", ")}}function K(e){for(var t=0,n=Object.values(e);t<n.length;t++)for(var a=n[t],r=0,s=Object.values(a);r<s.length;r++)for(var i=s[r],c=function(){var t=Object(f.a)(l[o],2),n=t[0],a=t[1],r=i[n];Array.isArray(r)?i[n]=r.map((function(t){return e[a][t]})):i[n]=e[a][r]},o=0,l=Object.entries(i.$resolve);o<l.length;o++)c();return e}function W(){return Y.apply(this,arguments)}function Y(){return(Y=Object(u.a)(o.a.mark((function e(){var t,n,a,r,s,i,c,u,m,f,d,h,y,v,p,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Loading galaxy..."),e.t0=K,e.next=4,R.get("data/galaxy.json");case 4:for(e.t1=e.sent.data,t=(0,e.t0)(e.t1),n=new z(t),a=0,r=Object.values(n.ships);a<r.length;a++)r[a]._type="ship";for(s=0,i=Object.values(n.modules);s<i.length;s++)c=i[s],Object.defineProperty(c,"attributes",{get:I}),n._registerSearch("module",c);for(u=0,m=Object.values(n.systems);u<m.length;u++)f=m[u],Object.defineProperty(f,"attributes",{get:A}),n.systems[f.name.toLowerCase()]=f,n._sortedSystems.push(f),f.stations.sort((function(e,t){return e.starDistance-t.starDistance})),f.bodies.sort((function(e,t){return e.starDistance-t.starDistance})),f._children=[].concat(Object(l.a)(f.stations),Object(l.a)(f.bodies)).sort((function(e,t){return e.starDistance-t.starDistance})),n._registerSearch("system",f);for(d=0,h=Object.values(n.stations);d<h.length;d++)y=h[d],Object.defineProperty(y,"attributes",{get:U}),n._sortedStations.push(y),y._distanceModifier=1e-4*y.starDistance,n._registerSearch("station",y);for(v=0,p=Object.values(t.bodies);v<p.length;v++)(b=p[v])._type="body",n._sortedBodies.push(b),b._distanceModifier=1e-4*b.starDistance;return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=null;function J(){return(J=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q||(q=W()),e.abrupt("return",q);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=n(78),H=n.n(G);function V(e){var t=e.attributes,n=e.hideKeys;return r.a.createElement(r.a.Fragment,null,Object.entries(t).filter((function(e){return Object(f.a)(e,2)[1]})).map((function(e){var t=Object(f.a)(e,2),a=t[0],s=t[1];return r.a.createElement("div",{key:a},!n&&a!==s&&r.a.createElement("small",{className:"text-secondary"},a,":"),r.a.createElement("small",{className:"text-muted d-inline-block"},"number"===typeof s?s.toLocaleString():s))})))}var $=n(79);function Q(e){var t=e.handle,n=e.variant,s=e.icon,i=e.name,c=e.sub,o=e.below,u=e.detail,m=e.children,d=Object(a.useState)(!1),h=Object(f.a)(d,2),y=h[0],v=h[1],p=Object(a.useState)(null),b=Object(f.a)(p,2),g=b[0],E=b[1],S=Object(a.useContext)(N),j=Object(a.useContext)(w),O=Object(a.useContext)(x);if(t=t||"".concat(n).concat(i).concat(c),i||(i=t.name),j.ancestors.includes(t))return null;j.selected!==t?y=!1:g&&(y=!0),!y&&j.selected&&(n="muted");var k=null;O&&t.attributes&&(k={},Object.entries(t.attributes).forEach((function(e){var t=Object(f.a)(e,2),n=t[0],a=t[1];i&&i.includes(a)||!O.isRelevant(a)||(k[n]=a)})));var _=S.favorites.includes(t);var C="solid 2px "+(_?"#5b5ad5":"#424345");return r.a.createElement("div",{className:"m-0 mb-1 rounded-lg",style:{background:y?"#333":"#1A1A1A",borderLeft:u?"solid 6px ".concat(!y&&j.selected?"#424345":_?"#5b5ad5":"#76777A"):C,borderTop:C,borderRight:C,borderBottom:C}},r.a.createElement($.a,{onSwipedLeft:function(){return S.removeFavorite(t)},onSwipedRight:function(){return S.addFavorite(t)}},r.a.createElement("div",{className:"cursor-pointer p-2",style:{opacity:!y&&j.selected?.8:1},onClick:j&&u&&function(e){return e.stopPropagation()&(v(!y),j.setSelected(y?null:t),void E(null))}},r.a.createElement("div",{className:"d-flex"},(s||i)&&r.a.createElement("span",{className:"m-0 text-".concat(n," flex-grow-1")},s&&r.a.createElement("span",{className:"mr-2",style:{position:"relative",top:"-2px",opacity:.9}},s),i),c&&r.a.createElement("small",{className:"float-right text-".concat(n),style:{marginTop:"2px",whiteSpace:"nowrap",opacity:.9}},c)),o,!y&&k&&r.a.createElement(V,{hideKeys:!0,attributes:k}))),!y&&r.a.createElement(r.a.Fragment,null,m&&r.a.createElement("div",{className:"px-2"},m)),y&&function(){var e={selected:g,setSelected:function(e){return E(e)&v(!0)},ancestors:[].concat(Object(l.a)(j.ancestors),[t])};return r.a.createElement(w.Provider,{value:e},r.a.createElement("div",{className:"p-2 pt-1",style:{background:"#080808"}},u&&u(e),m))}())}function X(e){var t=e.items,n=e.size,s=e.ignoreFilter,i=e.ignoreSort,c=e.render,o=Object(a.useState)(n||1),u=Object(f.a)(o,2),m=u[0],d=u[1],h=Object(a.useContext)(N);return h&&(s||(t=t.filter(h.filter)),i||(t=[].concat(Object(l.a)(t.filter((function(e){return h.favorites.includes(e)}))),Object(l.a)(t.filter((function(e){return!h.favorites.includes(e)})))))),r.a.createElement("div",{className:"my-1"},t.slice(0,m).map(c),t.length>m&&r.a.createElement("span",{className:"btn btn-outline-secondary d-block mt-2",onClick:function(){return d(2*m)}},"Show more"))}var Z=n(151);function ee(e){var t=e.station,n=Object(a.useContext)(_);if(!(t=n.getStation(t)))return r.a.createElement(Q,{variant:"secondary",name:"string"===typeof e.station?e.station:"(Station)"});var s=t.planetary?Z.d:Z.b;return r.a.createElement(Q,{variant:"warning",handle:t,icon:r.a.createElement(s,null),sub:t.starDistance?t.starDistance.toLocaleString()+" Ls":"",detail:function(){return r.a.createElement(V,{attributes:t.attributes})}},t.system&&r.a.createElement(me,{system:t.system}))}var te=n(27),ne=n(160);function ae(e){var t=e.setting,n=e.label,s=e.inverted,i=e.onToggle,c=Object(a.useContext)(C);return r.a.createElement(ne.a,null,r.a.createElement(ne.a.Group,{className:"my-2",onClick:function(e){c.set(Object(te.a)({},t,!c[t])),i&&i(e)}},r.a.createElement(ne.a.Check,{readOnly:!0,checked:!!c[t]===!s,label:n||t})))}function re(e){var t=e.ship,n=Object(a.useContext)(_),s=Object(a.useContext)(C);return t=n.getShip(t),r.a.createElement(Q,{variant:"danger",handle:t,icon:r.a.createElement(Z.c,null),sub:t.pilot,detail:function(e){var a=e.setSelected,i=n.getNearestStations((function(e){return e.ships.includes(t)}));return s.onlyDiscounts&&(i=i.filter((function(e){return"Li Yong-Rui"===e.system.power}))),r.a.createElement(r.a.Fragment,null,!!i.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{attributes:t.attributes}),r.a.createElement(ae,{setting:"onlyDiscounts",label:"15% discount",onToggle:function(){return a(null)}}),r.a.createElement(X,{items:i,size:2,render:function(e,t){return r.a.createElement(le,{key:t,result:e})}})))}})}function se(e){var t=e.module,n=Object(a.useContext)(_),s=Object(a.useContext)(C);return t=n.getModule(t),r.a.createElement(Q,{variant:"danger",handle:t,name:"".concat(t.class+t.rating," ").concat(t.name),sub:t.ship&&t.ship.name||t.mode,detail:function(e){var a=e.setSelected,i=n.getNearestStations((function(e){return e.modules.includes(t)}));return s.onlyDiscounts&&(i=i.filter((function(e){return"Li Yong-Rui"===e.system.power}))),r.a.createElement(r.a.Fragment,null,t.ship&&r.a.createElement(re,{ship:t.ship}),!!i.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{attributes:t.attributes}),r.a.createElement(ae,{setting:"onlyDiscounts",label:"15% discount",onToggle:function(){return a(null)}}),r.a.createElement(X,{items:i,size:2,render:function(e,t){return r.a.createElement(le,{key:t,result:e})}})))}})}var ie=n(152);function ce(e){var t=e.body,n=Object(a.useContext)(_);if(!(t=n.getBody(t)))return r.a.createElement(Q,{variant:"secondary",name:"string"===typeof e.body?e.body:"(Body)"});var s=t.starDistance?ie.b:Z.e;return r.a.createElement(Q,{variant:"success",handle:t,icon:r.a.createElement(s,null),name:t.name||"(Body)",sub:t.starDistance?t.starDistance.toLocaleString()+" Ls":"",detail:function(){return t.rings&&t.rings.map((function(e,t){return r.a.createElement(Q,{key:t,variant:"info",handle:e,name:e.name,icon:r.a.createElement(Z.a,null),sub:e.type})}))}},r.a.createElement(me,{system:t.system}))}var oe={ship:function(e){return r.a.createElement(re,{ship:e})},module:function(e){return r.a.createElement(se,{module:e})},system:function(e){return r.a.createElement(me,{system:e})},station:function(e){return r.a.createElement(ee,{station:e})},body:function(e){return r.a.createElement(ce,{body:e})}};function le(e){var t=e.result,n=oe[t._type];if(!n)throw console.error("[Search result]",t._type,t),new Error("Unknown search result type: "+t._type);return n(t)}var ue=n(153);function me(e){var t=e.system,n=Object(a.useContext)(_);return(t=n.getSystem(t))?r.a.createElement(Q,{handle:t,icon:r.a.createElement(ue.a,null),sub:t._currentDistance?t._currentDistance.toLocaleString()+" Ly":null,below:t.permitRequired&&r.a.createElement("small",{className:"text-danger ml-2"},"Permit required"),detail:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{attributes:t.attributes}),r.a.createElement(X,{items:t.stations,size:5,render:function(e,t){return r.a.createElement(le,{key:t,result:e})}}))}}):r.a.createElement(Q,{variant:"secondary",name:"string"===typeof e.system?e.system:"(System)"})}var fe=n(154);function de(e){var t=e.signalSource;return r.a.createElement(Q,{variant:"muted",handle:t,name:"".concat(Object(fe.a)(t.name)," (Threat ").concat(t.threat||0,")")||!1})}function he(e){var t=e.entry,n=Object(a.useState)(null),s=Object(f.a)(n,2),i=s[0],c=s[1];function o(e){return i||c(e),e}var l=Object(p.a)(t.event,{}).replace("Uss","USS").replace("Fss","FSS").replace("Dss","DSS");return t.StarSystem=t.StarSystem||t.SystemName,r.a.createElement(Q,{variant:"muted",handle:t,name:l,below:r.a.createElement(r.a.Fragment,null,t.From_Localised&&r.a.createElement("small",{className:"text-secondary d-block"},t.From_Localised,":"),t.Message_Localised&&r.a.createElement("small",{className:"text-muted d-block"},t.Message_Localised)),sub:t.timestamp.getUTCHours().toString().padStart(2,"0")+":"+t.timestamp.getUTCMinutes().toString().padStart(2,"0")},t.StarSystem&&(t.StationName?r.a.createElement(ee,{station:[t.StarSystem,t.StationName]}):t.Body||t.BodyName?r.a.createElement(ce,{body:o(i||{id:t.BodyID,name:t.Body||t.BodyName,system:t.StarSystem})}):r.a.createElement(me,{system:t.StarSystem})),t.Ship_Localised&&r.a.createElement(re,{ship:o(i||{name:t.Ship_Localised,pilot:t.PilotName_Localised||t.Commander})}),t.USSType_Localised&&r.a.createElement(de,{signalSource:o(i||{name:t.USSType_Localised,threat:t.USSThreat})}))}var ye=["Location","FSDJump","SupercruiseEntry","SupercruiseExit","SupercruiseDrop"],ve=function(){function e(){Object(L.a)(this,e),this.name=null,this.journal=[]}return Object(T.a)(e,[{key:"getLatest",value:function(e){var t,n=Object(D.a)(this.journal);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.event===e)return a}}catch(r){n.e(r)}finally{n.f()}}},{key:"getCurrentSystem",value:function(){var e,t=Object(D.a)(this.journal);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(ye.includes(n.event))return n.StarSystem}}catch(a){t.e(a)}finally{t.f()}}},{key:"update",value:function(e){var t=this;if(e.addLogEntries){e.addLogEntries.forEach((function(e){e.timestamp=new Date(e.timestamp);var n=t.journal.findIndex((function(t){return t.uid&&t.uid===e.uid}));-1!==n?t.journal[n]=e:t.journal.unshift(e)})),this.journal=this.journal.sort((function(e,t){return-(e.timestamp===t.timestamp?e.uid-t.uid:e.timestamp-t.timestamp)}));var n=this.getLatest("Commander");this.name=n?n.Name:null}}}]),e}(),pe=n(158);function be(e){var t=e.name,n=e.detail,a=e.children;return r.a.createElement(Q,{name:t,icon:r.a.createElement(ie.a,null),detail:n},a)}var ge=null,Ee=!0;function Se(){var e=Object(a.useState)(null),t=Object(f.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)(null),c=Object(f.a)(i,2),b=c[0],g=c[1],E=Object(a.useState)(null),S=Object(f.a)(E,2),j=S[0],k=S[1],D=Object(a.useState)(null),L=Object(f.a)(D,2),T=L[0],F=L[1],M=Object(a.useState)(null),P=Object(f.a)(M,2),B=P[0],R=P[1],z=Object(a.useState)(""),I=Object(f.a)(z,2),A=I[0],U=I[1],K=Object(a.useState)(void 0),W=Object(f.a)(K,2),Y=W[0],q=W[1],G=Object(a.useState)(""),V=Object(f.a)(G,2),$=V[0],Q=V[1],Z=Object(a.useState)([]),te=Object(f.a)(Z,2),ne=te[0],ae=te[1],re=Object(a.useState)([]),se=Object(f.a)(re,2),ie=se[0],oe=se[1],ue=Object(a.useState)(null),fe=Object(f.a)(ue,2),de=fe[0],ye=fe[1];function Se(e){return je.apply(this,arguments)}function je(){return(je=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.next=3,O(t);case 3:return n=e.sent,F(n),R(!1),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(){T&&T.close(),localStorage.websocket="",F(null),R(!1),g(null)}n||(n={set:function(e){s(Object(m.a)(Object(m.a)({},n),e))}},s(n)),b||(b=new ve,g(b)),T&&(T.removeListener("message",ge),ge=function(e){console.warn(e),b.update(e),g(null),g(b)},T.on("message",ge));var ke=localStorage.websocket;if(ke&&Ee&&(Ee=!1,Se(ke).catch((function(e){return console.error(e)}))),!j)return function(){return J.apply(this,arguments)}().then((function(e){return k(e)})),r.a.createElement("div",{style:{marginTop:"20vh"}},r.a.createElement("div",{style:{maxWidth:"960px",animationDuration:"1s"}},r.a.createElement("h4",{className:"text-center text-light mb-5 animate-fade-in",style:{animationDuration:"1s"}},"Loading galaxy data..."),r.a.createElement("img",{className:"d-block mx-auto animate-fade-in",style:{animationDuration:"4s"},src:"img/favicon.png",alt:"Loading..."})));Y=Y||(T?"nearby":"settings");var _e=j.setRelativeSystem(j.getSystem(parseInt(A)?null:A)||b.getCurrentSystem()||"Sol"),we=["Music","FSSSignalDiscovered"];function xe(e){e?q("search"):e="",Q(e),ae(j.search(e)),ye(null)}var Ne=null;return r.a.createElement(C.Provider,{value:n},r.a.createElement(w.Provider,{value:{selected:de,setSelected:ye,ancestors:[]}},r.a.createElement(N.Provider,{value:{filter:function(e){return!0},favorites:ie,addFavorite:function(e){e._type&&oe([e].concat(Object(l.a)(ie.filter((function(t){return t!==e})))))},removeFavorite:function(e){oe(ie.filter((function(t){return t!==e})))}}},r.a.createElement(_.Provider,{value:j},r.a.createElement(x.Provider,{value:{text:$,isRelevant:function(e){return j._isSearchRelevant($,e)}}},r.a.createElement("div",{className:"p-2"},r.a.createElement("div",null,b.name&&r.a.createElement("h6",{className:"text-primary float-right mt-1"},"CMDR ",b.name),r.a.createElement("h5",{className:"text-"+(_e.name.toLowerCase()===A.toLowerCase()?"success":T?"info":"light")},_e.name)),r.a.createElement(d.a,{size:"lg",className:"mb-2"},r.a.createElement("input",{type:"text",className:"form-control",value:$,placeholder:"Search...",ref:function(e){return Ne=e},onChange:function(e){return xe(e.target.value)}})),r.a.createElement(h.a,{activeKey:Y,onSelect:function(e){q(e),ye(null),"search"===e&&Ne&&("search"===Y&&Ne.value?(Ne.value="",xe()):Ne.select(),Ne.focus())}},r.a.createElement(y.a,{eventKey:"search",title:r.a.createElement(pe.b,{className:"h4 mt-1"})},"search"===Y&&($?r.a.createElement(X,{items:ne,size:20,render:function(e,t){return r.a.createElement(le,{key:t,result:e})}}):r.a.createElement(r.a.Fragment,null,r.a.createElement(X,{items:ie,size:10,render:function(e,t){return r.a.createElement(le,{key:t,result:e})}}),r.a.createElement(X,{items:j.getNearestSystems((function(){return function(e){return!ie.includes(e)}}),80),size:10,render:function(e,t){return r.a.createElement(le,{key:t,result:e})}})))),r.a.createElement(y.a,{eventKey:"nearby",title:r.a.createElement(pe.a,{className:"h4 mt-1"})},"nearby"===Y&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mt-2"},r.a.createElement(be,{name:"Nearby stations",detail:function(){return r.a.createElement(X,{items:j.getNearestStations(),size:3,render:function(e,t){return r.a.createElement(le,{key:t,result:e})}})}}),r.a.createElement(be,{name:"Pristine rings",detail:function(){return r.a.createElement(r.a.Fragment,null,j.ringTypes.map((function(e,t){return r.a.createElement(be,{key:t,name:e,detail:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(X,{items:j.getNearestRingBodies(e).filter((function(e){return n.allResourceTypes||"Pristine"===e.system.reserveType})),size:2,render:function(e,t){return r.a.createElement(ce,{key:t,body:e})}}))}})})))}}),r.a.createElement(be,{name:"Material traders",detail:function(){return j.materialTypes.map((function(e,t){return r.a.createElement(be,{key:t,name:e,detail:function(){return r.a.createElement(X,{items:j.getNearestStations((function(t){return t.services.includes(e+" Material Trader")})),size:2,render:function(e,t){return r.a.createElement(ee,{key:t,station:e})}})}})}))}}),r.a.createElement(be,{name:"Services",detail:function(){return["Interstellar Factors","Black Market","Technology Broker"].map((function(e,t){return r.a.createElement(be,{key:t,name:Object(p.a)(e),detail:function(){return r.a.createElement(X,{items:j.getNearestStations((function(t){return t.services.includes(e)})),size:2,render:function(e,t){return r.a.createElement(ee,{key:t,station:e})}})}})}))}})))),r.a.createElement(y.a,{eventKey:"settings",title:r.a.createElement(pe.c,{className:"h4 mt-1"})},r.a.createElement("div",{className:"p-2"},r.a.createElement("div",{className:"p-2"},r.a.createElement("h5",{className:"text-"+(A?_e.name.toLowerCase()===A.toLowerCase()?"success":"danger":"light")},"Current system:"),r.a.createElement(d.a,{size:"md",className:"my-1",style:{opacity:.8}},r.a.createElement("input",{type:"text",className:"form-control",value:A,placeholder:"Change current system...",onFocus:function(e){return e.target.select()},onChange:function(e){return xe(null)&U(e.target.value)}})),r.a.createElement(me,{system:_e})),r.a.createElement(v.a,{size:"lg",variant:"outline-"+(T?"light":B?"warning":"info"),className:"w-100 py-2 my-3",style:{opacity:T&&.5},onClick:function(){return T?Oe():(Oe(),void H.a.prompt({title:"Connect to IP address:",value:T?T.io.uri.replace("ws://",""):localStorage.websocket||"localhost",callback:function(e){e&&(localStorage.websocket=e||"",Se(e).catch((function(e){return console.error(e)})))}}))}},T?"Connected":B?"Connection not found":"Connect"),!T&&r.a.createElement("a",{href:"data/elite-navigator.exe",target:"_blank"},r.a.createElement(v.a,{size:"",variant:"outline-light",className:"w-100 py-2 my-2",style:{opacity:.7}},"Download location sync")),T&&"settings"===Y&&r.a.createElement(r.a.Fragment,null,r.a.createElement(X,{items:b.journal.filter((function(e){return!we.includes(e.event)})),size:5,render:function(e,t){return r.a.createElement(he,{key:"".concat(e.timestamp).concat(t),entry:e})}})))))))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},87:function(e,t,n){e.exports=n(149)},94:function(e,t,n){},96:function(e,t,n){}},[[87,1,2]]]);
//# sourceMappingURL=main.ac02ca57.chunk.js.map