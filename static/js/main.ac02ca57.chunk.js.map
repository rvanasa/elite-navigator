{"version":3,"sources":["services/connection-service.js","components/Contexts.js","services/galaxy-service.js","components/Attributes.js","components/item/Item.js","components/ExpandableList.js","components/item/Station.js","components/SettingToggle.js","components/item/Ship.js","components/item/Module.js","components/item/Body.js","components/SearchResult.js","components/item/StarSystem.js","components/item/SignalSource.js","components/item/JournalEntry.js","services/player-service.js","components/item/Category.js","components/App.js","serviceWorker.js","index.js"],"names":["currentConnection","pendingAddress","pendingPromise","tryConnect","address","a","replace","includes","close","Promise","resolve","reject","connection","io","connect","on","console","log","document","addEventListener","visibilityListener","visibilityState","connected","removeEventListener","err","GalaxyContext","React","createContext","SelectContext","SearchContext","FilterContext","SettingsContext","cache","setupCache","maxAge","api","axios","create","adapter","Galaxy","data","this","ships","modules","systems","stations","bodies","assert","Object","keys","every","k","hasOwnProperty","materialTypes","ringTypes","searchOptions","_relativeSystem","_sortedSystems","_sortedStations","_sortedBodies","text","Set","toString","toLowerCase","split","map","s","trim","filter","sort","type","option","_type","_searchTerms","name","values","attributes","v","flatMap","_getSearchTerms","push","dict","key","ship","_resolve","module","system","station","Array","isArray","getSystem","body","b","dx","x","dy","y","dz","z","Math","round","sqrt","forEach","updateDistance","d","_distanceModifier","_currentDistance","_children","c","getDistanceBetweenSystems","filterFn","count","results","arguments","length","Number","POSITIVE_INFINITY","slice","rings","ring","query","queryTerms","textTerms","some","q","t","startsWith","matches","opt","terms","minTermLen","opts","optsLen","termsLen","i","hasAllTerms","j","term","termLen","optTerms","optTermsLen","foundTerm","optTerm","substring","getModuleAttributes","groupName","class","rating","category","mode","getSystemAttributes","allegiance","power","powerState","states","join","reserveType","population","getStationAttributes","Type","economies","services","prepareData","items","item","ref","value","entries","$resolve","loadGalaxy","get","galaxy","defineProperty","_registerSearch","starDistance","currentGalaxyPromise","Attributes","props","hideKeys","className","toLocaleString","Item","handle","variant","icon","sub","below","detail","children","useState","isSelected","setSelected","detailSelected","setDetailSelected","filterContext","useContext","selectContext","searchContext","ancestors","selected","relevantAttributes","isRelevant","isFavorite","favorites","borderStyle","style","background","borderLeft","borderTop","borderRight","borderBottom","onSwipedLeft","removeFavorite","onSwipedRight","addFavorite","opacity","onClick","e","stopPropagation","position","top","marginTop","whiteSpace","subSelectContext","Provider","renderDetail","ExpandableList","size","ignoreFilter","ignoreSort","render","maxItems","setMaxItems","Station","getStation","Icon","planetary","GiPlanetCore","GiDefenseSatellite","StarSystem","SettingToggle","setting","label","inverted","onToggle","settings","Form","Group","set","Check","readOnly","checked","Ship","getShip","pilot","nearbyStations","getNearestStations","onlyDiscounts","SearchResult","result","Module","getModule","Body","getBody","IoMdPlanet","GiVibratingBall","resultMap","renderFn","error","Error","permitRequired","SignalSource","signalSource","capitalCase","threat","JournalEntry","entry","setItem","cached","obj","sentenceCase","event","SystemName","From_Localised","Message_Localised","timestamp","getUTCHours","padStart","getUTCMinutes","StationName","BodyName","id","BodyID","Ship_Localised","PilotName_Localised","Commander","USSType_Localised","USSThreat","currentSystemEvents","Player","journal","addLogEntries","Date","index","findIndex","uid","unshift","commanderEntry","getLatest","Name","Category","messageListener","allowAutoConnect","App","setSettings","player","setPlayer","setGalaxy","setConnection","reconnecting","setReconnecting","customSystemName","setCustomSystemName","undefined","currentTab","setCurrentTab","searchQuery","setSearchQuery","searchResults","setSearchResults","setFavorites","disconnect","localStorage","changes","removeListener","warn","update","storedAddress","catch","findGalaxy","then","maxWidth","animationDuration","src","alt","relativeSystem","setRelativeSystem","parseInt","getCurrentSystem","hideEvents","doSearch","searchText","search","searchBarElem","_isSearchRelevant","InputGroup","placeholder","elem","onChange","target","Tabs","activeKey","onSelect","tab","select","focus","Tab","eventKey","title","getNearestSystems","getNearestRingBodies","allResourceTypes","onFocus","Button","bootbox","prompt","uri","callback","href","Boolean","window","location","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.ac02ca57.chunk.js","sourcesContent":["import io from 'socket.io-client';\r\n\r\nconst defaultHost = '127.0.0.1';\r\nconst defaultPort = 4777;\r\n\r\nlet currentConnection = null;\r\nlet pendingAddress = null;\r\nlet pendingPromise = null;\r\n\r\n// export function getCurrentConnection() {\r\n//     return currentConnection;\r\n// }\r\n\r\nexport async function tryConnect(address) {\r\n    address = address.replace('ws://', '');\r\n    if(!address) {\r\n        address = defaultHost;\r\n    }\r\n    if(!address.includes(':')) {\r\n        address += ':' + defaultPort;\r\n    }\r\n    address = 'ws://' + address;\r\n    if(address === pendingAddress && pendingPromise) {\r\n        return pendingPromise;\r\n    }\r\n    if(currentConnection) {\r\n        currentConnection.close();\r\n    }\r\n    currentConnection = null;\r\n    pendingAddress = address;\r\n    pendingPromise = new Promise((resolve, reject) => {\r\n        let connection = io.connect(address);\r\n        currentConnection = connection;\r\n        \r\n        connection.on('connect', () => {\r\n            console.log('Connected');\r\n            \r\n            let visibilityListener = () => {\r\n                if(connection !== currentConnection) {\r\n                    document.removeEventListener('visibilitychange', visibilityListener);\r\n                    return;\r\n                }\r\n                if(document.visibilityState === 'visible' && !connection.connected) {\r\n                    connection.connect();\r\n                }\r\n            };\r\n            document.addEventListener('visibilitychange', visibilityListener);\r\n            \r\n            pendingAddress = pendingPromise = null;\r\n            resolve(connection);\r\n        });\r\n        \r\n        connection.on('error', err => {\r\n            pendingAddress = pendingPromise = null;\r\n            reject(err);\r\n        });\r\n        \r\n        connection.on('disconnect', () => {\r\n            console.log('Disconnected');\r\n        });\r\n    });\r\n    return pendingPromise;\r\n}","import React from 'react';\r\n\r\nexport const GalaxyContext = React.createContext(null);\r\n\r\nexport const SelectContext = React.createContext(null);\r\n\r\nexport const SearchContext = React.createContext(null);\r\n\r\nexport const FilterContext = React.createContext(null);\r\n\r\nexport const SettingsContext = React.createContext(null);\r\n","import axios from 'axios';\r\nimport {setupCache} from 'axios-cache-adapter';\r\n\r\nconst cache = setupCache({\r\n    maxAge: 1000 * 60 * 4,\r\n});\r\n\r\nconst api = axios.create({\r\n    adapter: cache.adapter,\r\n});\r\n\r\nconst starDistanceFactor = 1e-4;\r\n\r\nclass Galaxy {\r\n    constructor(data) {\r\n        this.ships = data.ships;\r\n        this.modules = data.modules;\r\n        this.systems = data.systems;\r\n        this.stations = data.stations;\r\n        this.bodies = data.bodies;\r\n        \r\n        console.assert(Object.keys(data).every(k => this.hasOwnProperty(k)));\r\n        \r\n        this.materialTypes = ['Raw', 'Manufactured', 'Encoded'];\r\n        this.ringTypes = ['Rocky', 'Icy', 'Metallic', 'Metal Rich'];\r\n        \r\n        this.searchOptions = [];\r\n        \r\n        this._relativeSystem = null;\r\n        this._sortedSystems = [];\r\n        this._sortedStations = [];\r\n        this._sortedBodies = [];\r\n    }\r\n    \r\n    _getSearchTerms(text) {\r\n        if(!text) {\r\n            return [];\r\n        }\r\n        return [...new Set(text.toString().toLowerCase().replace(/[^a-z0-9 ]/, ' ').split(' ').map(s => s.trim()).filter(s => !!s))].sort();\r\n    }\r\n    \r\n    _registerSearch(type, option) {\r\n        option._type = type;\r\n        option._searchTerms = [\r\n            ...new Set([option.name, ...Object.values(option.attributes).filter(v => typeof v === 'string')]\r\n                .filter(s => !!s)\r\n                .flatMap(s => this._getSearchTerms(s))\r\n                .map(s => s.trim())\r\n                .filter(s => s))\r\n        ].sort();\r\n        this.searchOptions.push(option);\r\n        return option;\r\n    }\r\n    \r\n    _resolve(dict, key) {\r\n        return (typeof key === 'string' ? dict[key.toLowerCase()] : typeof key === 'number' ? dict[key] : key) || null;\r\n    }\r\n    \r\n    getShip(ship) {\r\n        return this._resolve(this.ships, ship);\r\n    }\r\n    \r\n    getModule(module) {\r\n        return this._resolve(this.modules, module);\r\n    }\r\n    \r\n    getSystem(system) {\r\n        return this._resolve(this.systems, system);\r\n    }\r\n    \r\n    getStation(station) {\r\n        if(Array.isArray(station)) {\r\n            let system = this.getSystem(station[0]);\r\n            return (system && system.stations[station[1]]) || null;\r\n        }\r\n        return this._resolve(this.stations, station);\r\n    }\r\n    \r\n    getBody(body) {\r\n        return this._resolve(this.bodies, body);\r\n    }\r\n    \r\n    getDistanceBetweenSystems(a, b) {\r\n        let [dx, dy, dz] = [a.x - b.x, a.y - b.y, a.z - b.z];\r\n        return Math.round(Math.sqrt(dx ** 2 + dy ** 2 + dz ** 2));\r\n    }\r\n    \r\n    getRelativeSystem() {\r\n        return this._relativeSystem;\r\n    }\r\n    \r\n    setRelativeSystem(system) {\r\n        system = this.getSystem(system);\r\n        if(this._relativeSystem === system) {\r\n            return system;\r\n        }\r\n        this._relativeSystem = system;\r\n        let updateDistance = (d, s) => {\r\n            d *= 1 + (s._distanceModifier || 0);\r\n            // if(s.name === 'Sol') {\r\n            //     console.log(d, s._currentDistance, s._distanceModifier || 0);///////////////////////\r\n            // }\r\n            s._currentDistance = d;\r\n            if(s._children) {\r\n                s._children.forEach(c => updateDistance(d, c));\r\n            }\r\n        };\r\n        this._sortedSystems.forEach(s => updateDistance(system ? this.getDistanceBetweenSystems(system, s) : 0, s));\r\n        this._sortedSystems.sort((a, b) => system ? a._currentDistance - b._currentDistance : a.name - b.name);\r\n        \r\n        this._sortedStations.sort((a, b) => system ? a._currentDistance - b._currentDistance : a.name - b.name);\r\n        \r\n        this._sortedBodies.sort((a, b) => system ? a._currentDistance - b._currentDistance : a.name - b.name);\r\n        return system;\r\n    }\r\n    \r\n    getNearestSystems(filterFn, count) {\r\n        let results = [];\r\n        if(arguments.length < 2) {\r\n            count = Number.POSITIVE_INFINITY;\r\n        }\r\n        else if(count <= 0) {\r\n            return results;\r\n        }\r\n        if(!filterFn) {\r\n            return this._sortedSystems.slice(0, count);\r\n        }\r\n        for(let system of this._sortedSystems) {\r\n            if(filterFn(system)) {\r\n                results.push(system);\r\n                if(results.length >= count) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return results;\r\n    }\r\n    \r\n    getNearestStations(filterFn, count) {\r\n        let results = [];\r\n        if(arguments.length < 2) {\r\n            count = Number.POSITIVE_INFINITY;\r\n        }\r\n        else if(count <= 0) {\r\n            return results;\r\n        }\r\n        if(!filterFn) {\r\n            return this._sortedStations.slice(0, count);\r\n        }\r\n        for(let station of this._sortedStations) {\r\n            if(filterFn(station)) {\r\n                results.push(station);\r\n                if(results.length >= count) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return results;\r\n    }\r\n    \r\n    getNearestRingBodies(type, count) {\r\n        let results = [];\r\n        if(count <= 0) {\r\n            return results;\r\n        }\r\n        for(let body of this._sortedBodies) {\r\n            if(body.rings) {\r\n                for(let ring of body.rings) {\r\n                    if(!type || ring.type === type) {\r\n                        results.push(body);\r\n                        break;\r\n                    }\r\n                }\r\n                if(results.length >= count) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return results;\r\n    }\r\n    \r\n    _isSearchRelevant(query, text) {\r\n        if(!query || !text) {\r\n            return !!query;\r\n        }\r\n        let queryTerms = this._getSearchTerms(query);\r\n        let textTerms = this._getSearchTerms(text);\r\n        return queryTerms.some(q => textTerms.some(t => t.startsWith(q)));\r\n    }\r\n    \r\n    search(query) {\r\n        if(!query.trim()) {\r\n            return [];\r\n        }\r\n        let matches = this.searchOptions.filter(opt => opt.name && opt.name.toLowerCase() === query);\r\n        let results = [];\r\n        let terms = this._getSearchTerms(query);\r\n        if(!terms.length) {\r\n            return results;\r\n        }\r\n        \r\n        let minTermLen = 3 - terms.length;\r\n        let opts = this.searchOptions;\r\n        let optsLen = opts.length;\r\n        let termsLen = terms.length;\r\n        for(let i = 0; i < optsLen; i++) {\r\n            let opt = opts[i];\r\n            let hasAllTerms = true;\r\n            for(let j = 0; j < termsLen; j++) {\r\n                let term = terms[j];\r\n                let termLen = term.length;\r\n                if(termLen < minTermLen) {\r\n                    termLen = minTermLen;\r\n                }\r\n                \r\n                let optTerms = opt._searchTerms;\r\n                let optTermsLen = optTerms.length;\r\n                \r\n                let foundTerm = false;\r\n                for(let k = 0; k < optTermsLen; k++) {\r\n                    let optTerm = optTerms[k].substring(0, termLen);\r\n                    if(optTerm === term) {\r\n                        foundTerm = true;\r\n                    }\r\n                    if(optTerm >= term) {\r\n                        break;\r\n                    }\r\n                }\r\n                if(!foundTerm) {\r\n                    hasAllTerms = false;\r\n                    break;\r\n                }\r\n            }\r\n            if(hasAllTerms && !matches.includes(opt)) {\r\n                results.push(opt);\r\n            }\r\n        }\r\n        \r\n        results.sort((a, b) => (a._currentDistance || 0) - (b._currentDistance || 0));\r\n        return [...matches, ...results];\r\n    }\r\n}\r\n\r\nfunction getModuleAttributes() {\r\n    return {\r\n        'Group': this.groupName,\r\n        'Class': `${this.class}${this.rating}`,\r\n        'Ship': this.ship && this.ship.name,\r\n        'Category': this.category,\r\n        'Mode': this.mode,\r\n    };\r\n}\r\n\r\nfunction getSystemAttributes() {\r\n    return {\r\n        'Allegiance': this.allegiance,\r\n        'Power': this.power,\r\n        // 'Minor faction': this.faction,\r\n        'Power state': this.powerState,\r\n        'System state': this.states.join(', '),\r\n        'Resources': this.reserveType,\r\n        'Habitation': this.population ? 'Populated' : 'Unpopulated',\r\n        'Population': this.population,\r\n    };\r\n}\r\n\r\nfunction getStationAttributes() {\r\n    return {\r\n        'Type': this.Type,\r\n        'Economy': this.economies.join(', '),\r\n        'Services': this.services.join(', '),\r\n    };\r\n}\r\n\r\nfunction prepareData(data) {\r\n    for(let items of Object.values(data)) {\r\n        for(let item of Object.values(items)) {\r\n            for(let [key, ref] of Object.entries(item.$resolve)) {\r\n                let value = item[key];\r\n                if(Array.isArray(value)) {\r\n                    item[key] = value.map(v => data[ref][v]);\r\n                }\r\n                else {\r\n                    item[key] = data[ref][value];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return data;\r\n}\r\n\r\nexport async function loadGalaxy() {\r\n    console.log('Loading galaxy...');\r\n    \r\n    let data = prepareData((await api.get('data/galaxy.json')).data);\r\n    \r\n    let galaxy = new Galaxy(data);\r\n    \r\n    for(let ship of Object.values(galaxy.ships)) {\r\n        ship._type = 'ship';////\r\n    }\r\n    for(let module of Object.values(galaxy.modules)) {\r\n        Object.defineProperty(module, 'attributes', {get: getModuleAttributes});\r\n        \r\n        galaxy._registerSearch('module', module);\r\n    }\r\n    for(let system of Object.values(galaxy.systems)) {\r\n        Object.defineProperty(system, 'attributes', {get: getSystemAttributes});\r\n        \r\n        galaxy.systems[system.name.toLowerCase()] = system;////\r\n        galaxy._sortedSystems.push(system);\r\n        \r\n        system.stations.sort((a, b) => a.starDistance - b.starDistance);///\r\n        system.bodies.sort((a, b) => a.starDistance - b.starDistance);///\r\n        \r\n        system._children = [...system.stations, ...system.bodies]\r\n            .sort((a, b) => a.starDistance - b.starDistance);///\r\n        \r\n        galaxy._registerSearch('system', system);\r\n    }\r\n    for(let station of Object.values(galaxy.stations)) {\r\n        Object.defineProperty(station, 'attributes', {get: getStationAttributes});\r\n        \r\n        galaxy._sortedStations.push(station);\r\n        \r\n        station._distanceModifier = station.starDistance * starDistanceFactor;\r\n        \r\n        galaxy._registerSearch('station', station);\r\n    }\r\n    for(let body of Object.values(data.bodies)) {\r\n        body._type = 'body'; ////////\r\n        \r\n        galaxy._sortedBodies.push(body);\r\n        \r\n        body._distanceModifier = body.starDistance * starDistanceFactor;\r\n    }\r\n    return galaxy;\r\n}\r\n\r\nlet currentGalaxyPromise = null;\r\n\r\nexport async function findGalaxy() {\r\n    if(!currentGalaxyPromise) {\r\n        currentGalaxyPromise = loadGalaxy();\r\n    }\r\n    return currentGalaxyPromise;\r\n}\r\n","import React from 'react';\r\n\r\nexport default function Attributes(props) {\r\n    let {attributes, hideKeys} = props;\r\n    \r\n    return (<>\r\n        {Object.entries(attributes).filter(([, v]) => v).map(([k, v]) => (\r\n            <div key={k}>\r\n                {!hideKeys && k !== v && (\r\n                    <small className=\"text-secondary\">{k}:</small>\r\n                )}\r\n                <small className=\"text-muted d-inline-block\">{typeof v === 'number' ? v.toLocaleString() : v}</small>\r\n            </div>\r\n        ))}\r\n    </>);\r\n};\r\n","import React, {useContext, useState} from 'react';\r\nimport {FilterContext, SearchContext, SelectContext} from '../Contexts';\r\nimport Attributes from '../Attributes';\r\nimport {Swipeable} from 'react-swipeable';\r\n\r\nexport default function Item(props) {\r\n    let {handle, variant, icon, name, sub, below, detail, children} = props;\r\n    \r\n    let [isSelected, setSelected] = useState(false);\r\n    let [detailSelected, setDetailSelected] = useState(null);\r\n    \r\n    let filterContext = useContext(FilterContext);\r\n    let selectContext = useContext(SelectContext);\r\n    let searchContext = useContext(SearchContext);\r\n    \r\n    handle = handle || `${variant}${name}${sub}`;/////\r\n    if(!name) {\r\n        name = handle.name;\r\n    }\r\n    \r\n    if(selectContext.ancestors.includes(handle)) {\r\n        return null;\r\n    }\r\n    \r\n    if(selectContext.selected !== handle) {\r\n        isSelected = false;\r\n    }\r\n    else if(detailSelected) {\r\n        isSelected = true;\r\n    }\r\n    \r\n    if(!isSelected && selectContext.selected) {\r\n        variant = 'muted';\r\n    }\r\n    \r\n    function toggleSelected() {\r\n        setSelected(!isSelected);\r\n        selectContext.setSelected(isSelected ? null : handle);\r\n        setDetailSelected(null);///\r\n    }\r\n    \r\n    let relevantAttributes = null;\r\n    if(searchContext && handle.attributes) {\r\n        relevantAttributes = {};\r\n        Object.entries(handle.attributes).forEach(([k, v]) => {\r\n            if((!name || !name.includes(v)) && searchContext.isRelevant(v)) {\r\n                relevantAttributes[k] = v;\r\n            }\r\n        });\r\n    }\r\n    \r\n    let isFavorite = filterContext.favorites.includes(handle);/////\r\n    \r\n    function renderDetail() {\r\n        let subSelectContext = {\r\n            selected: detailSelected,\r\n            setSelected: item => setDetailSelected(item) & setSelected(true),\r\n            ancestors: [...selectContext.ancestors, handle],\r\n        };\r\n        return (\r\n            <SelectContext.Provider value={subSelectContext}>\r\n                <div className=\"p-2 pt-1\" style={{background: '#080808'}}>\r\n                    {detail && detail(subSelectContext)}\r\n                    {children}\r\n                </div>\r\n            </SelectContext.Provider>\r\n        );\r\n    }\r\n    \r\n    let borderColor = '#424345';\r\n    let favoriteColor = '#5b5ad5';\r\n    let borderStyle = 'solid 2px ' + (isFavorite ? favoriteColor : borderColor);\r\n    \r\n    return (\r\n        <div className=\"m-0 mb-1 rounded-lg\"\r\n             style={{\r\n                 background: isSelected ? '#333' : '#1A1A1A',\r\n                 borderLeft: detail ? `solid 6px ${!isSelected && selectContext.selected ? borderColor : isFavorite ? favoriteColor : '#76777A'}` : borderStyle,\r\n                 borderTop: borderStyle,\r\n                 borderRight: borderStyle,\r\n                 borderBottom: borderStyle,\r\n                 // animation: isFavorite && 'swipe-right .4s ease-out',\r\n             }}>\r\n            <Swipeable\r\n                onSwipedLeft={() => filterContext.removeFavorite(handle)}\r\n                onSwipedRight={() => filterContext.addFavorite(handle)}>\r\n                <div className=\"cursor-pointer p-2\"\r\n                     style={{\r\n                         opacity: !isSelected && selectContext.selected ? .8 : 1,/////\r\n                     }}\r\n                     onClick={selectContext && detail && (e => e.stopPropagation() & toggleSelected())}>\r\n                    <div className=\"d-flex\">\r\n                        {(icon || name) && (\r\n                            <span className={`m-0 text-${variant} flex-grow-1`}>\r\n                                {icon && (\r\n                                    <span\r\n                                        className=\"mr-2\"\r\n                                        style={{position: 'relative', top: '-2px', opacity: .9}}>\r\n                                        {icon}\r\n                                    </span>\r\n                                )}\r\n                                {name}\r\n                            </span>\r\n                        )}\r\n                        {sub && (\r\n                            <small className={`float-right text-${variant}`}\r\n                                   style={{marginTop: '2px', whiteSpace: 'nowrap', opacity: .9}}>\r\n                                {sub}\r\n                            </small>\r\n                        )}\r\n                    </div>\r\n                    {below}\r\n                    {!isSelected && relevantAttributes && (\r\n                        <Attributes hideKeys attributes={relevantAttributes}/>\r\n                    )}\r\n                </div>\r\n            </Swipeable>\r\n            {!isSelected && (<>\r\n                {children && (\r\n                    <div className=\"px-2\">\r\n                        {children}\r\n                    </div>\r\n                )}\r\n            </>)}\r\n            {isSelected && renderDetail()}\r\n        </div>\r\n    );\r\n};\r\n","import React, {useContext, useState} from 'react';\r\nimport {FilterContext} from './Contexts';\r\n\r\nexport default function ExpandableList(props) {\r\n    let {items, size, ignoreFilter, ignoreSort, render} = props;\r\n    \r\n    let [maxItems, setMaxItems] = useState(size || 1);\r\n    \r\n    // if(typeof items === 'function') {\r\n    //     items = items(maxItems);\r\n    // }\r\n    \r\n    let filterContext = useContext(FilterContext);\r\n    if(filterContext) {\r\n        if(!ignoreFilter) {\r\n            items = items.filter(filterContext.filter);\r\n        }\r\n        if(!ignoreSort) {\r\n            items = [...items.filter(x => filterContext.favorites.includes(x)), ...items.filter(x => !filterContext.favorites.includes(x))];\r\n        }\r\n    }\r\n    \r\n    return (\r\n        <div className=\"my-1\">\r\n            {items.slice(0, maxItems).map(render)}\r\n            {items.length > maxItems && (\r\n                <span className=\"btn btn-outline-secondary d-block mt-2\"\r\n                      onClick={() => setMaxItems(maxItems * 2)}>\r\n                    Show more\r\n                </span>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","import React, {useContext} from 'react';\r\nimport StarSystem from './StarSystem';\r\nimport {GalaxyContext} from '../Contexts';\r\nimport Item from './Item';\r\nimport {GiDefenseSatellite, GiPlanetCore} from 'react-icons/all';\r\nimport Attributes from '../Attributes';\r\n\r\nexport default function Station(props) {\r\n    let {station} = props;\r\n    \r\n    let galaxy = useContext(GalaxyContext);\r\n    \r\n    station = galaxy.getStation(station);\r\n    if(!station) {\r\n        return <Item variant=\"secondary\" name={typeof props.station === 'string' ? props.station : '(Station)'}/>;\r\n    }\r\n    \r\n    let Icon = station.planetary ? GiPlanetCore : GiDefenseSatellite;\r\n    \r\n    return (\r\n        <Item variant=\"warning\"\r\n              handle={station}\r\n              icon={<Icon/>}\r\n              sub={station.starDistance ? station.starDistance.toLocaleString() + ' Ls' : ''}\r\n              detail={() => (\r\n                  <Attributes attributes={station.attributes}/>\r\n              )}>\r\n            {station.system && (\r\n                <StarSystem system={station.system}/>\r\n            )}\r\n        </Item>\r\n    );\r\n};\r\n","import React, {useContext} from 'react';\r\nimport {SettingsContext} from './Contexts';\r\nimport {Form} from 'react-bootstrap';\r\n\r\nexport default function SettingToggle(props) {\r\n    let {setting, label, inverted, onToggle} = props;\r\n    \r\n    let settings = useContext(SettingsContext);\r\n    \r\n    function onClick(e) {\r\n        settings.set({[setting]: !settings[setting]});\r\n        if(onToggle) {\r\n            onToggle(e);\r\n        }\r\n    }\r\n    \r\n    return (\r\n        <Form>\r\n            <Form.Group className=\"my-2\" onClick={onClick}>\r\n                <Form.Check readOnly checked={!!settings[setting] === !inverted} label={label || setting}/>\r\n            </Form.Group>\r\n        </Form>\r\n    );\r\n};\r\n","import React, {useContext} from 'react';\r\nimport Item from './Item';\r\nimport {GalaxyContext, SettingsContext} from '../Contexts';\r\nimport Attributes from '../Attributes';\r\nimport ExpandableList from '../ExpandableList';\r\nimport SearchResult from '../SearchResult';\r\nimport {GiInterceptorShip} from 'react-icons/all';\r\nimport SettingToggle from '../SettingToggle';\r\n\r\nexport default function Ship(props) {\r\n    let {ship} = props;\r\n    \r\n    let galaxy = useContext(GalaxyContext);\r\n    let settings = useContext(SettingsContext);\r\n    \r\n    ship = galaxy.getShip(ship);\r\n    \r\n    function detail({setSelected}) {\r\n        // let nearbyStations = galaxy._sortedSystems.flatMap(system => system.stations.filter(station => station.ships.includes(ship)));\r\n        let nearbyStations = galaxy.getNearestStations(s => s.ships.includes(ship));\r\n        if(settings.onlyDiscounts) {\r\n            nearbyStations = nearbyStations.filter(s => s.system.power === 'Li Yong-Rui');\r\n        }\r\n        return (<>\r\n            {!!nearbyStations.length && (<>\r\n                <Attributes attributes={ship.attributes}/>\r\n                {/*<h6 className=\"text-muted\">Purchase location:</h6>*/}\r\n                <SettingToggle setting=\"onlyDiscounts\" label=\"15% discount\" onToggle={() => setSelected(null)}/>\r\n                <ExpandableList items={nearbyStations} size={2} render={(station, i) => (\r\n                    <SearchResult key={i} result={station}/>\r\n                )}/>\r\n            </>)}\r\n        </>);\r\n    }\r\n    \r\n    return (\r\n        <Item variant=\"danger\"\r\n              handle={ship}\r\n              icon={<GiInterceptorShip/>}\r\n              sub={ship.pilot}\r\n              detail={detail}>\r\n        </Item>\r\n    );\r\n};\r\n","import React, {useContext} from 'react';\r\nimport Item from './Item';\r\nimport {GalaxyContext, SettingsContext} from '../Contexts';\r\nimport ExpandableList from '../ExpandableList';\r\nimport SearchResult from '../SearchResult';\r\nimport Attributes from '../Attributes';\r\nimport Ship from './Ship';\r\nimport SettingToggle from '../SettingToggle';\r\n\r\nexport default function Module(props) {\r\n    let {module} = props;\r\n    \r\n    let galaxy = useContext(GalaxyContext);\r\n    let settings = useContext(SettingsContext);\r\n    \r\n    module = galaxy.getModule(module);\r\n    \r\n    function detail({setSelected}) {\r\n        // let nearbyStations = galaxy._sortedSystems.flatMap(system => system.stations.filter(station => station.modules.includes(module)));\r\n        let nearbyStations = galaxy.getNearestStations(s => s.modules.includes(module));\r\n        if(settings.onlyDiscounts) {\r\n            nearbyStations = nearbyStations.filter(s => s.system.power === 'Li Yong-Rui');\r\n        }\r\n        return (<>\r\n            {module.ship && (\r\n                <Ship ship={module.ship}/>\r\n            )}\r\n            {!!nearbyStations.length && (<>\r\n                <Attributes attributes={module.attributes}/>\r\n                {/*<h6 className=\"text-muted\">Purchase location:</h6>*/}\r\n                <SettingToggle setting=\"onlyDiscounts\" label=\"15% discount\" onToggle={() => setSelected(null)}/>\r\n                <ExpandableList items={nearbyStations} size={2} render={(station, i) => (\r\n                    <SearchResult key={i} result={station}/>\r\n                )}/>\r\n            </>)}\r\n        </>);\r\n    }\r\n    \r\n    return (\r\n        <Item variant=\"danger\"\r\n              handle={module}\r\n              name={`${module.class + module.rating} ${module.name}`}\r\n              sub={(module.ship && module.ship.name) || module.mode}\r\n              detail={detail}>\r\n        </Item>\r\n    );\r\n};\r\n","import React, {useContext} from 'react';\r\nimport StarSystem from './StarSystem';\r\nimport Item from './Item';\r\nimport {GiAsteroid, GiVibratingBall, IoMdPlanet} from 'react-icons/all';\r\nimport {GalaxyContext} from '../Contexts';\r\n\r\nexport default function Body(props) {\r\n    let {body} = props;\r\n    \r\n    let galaxy = useContext(GalaxyContext);\r\n    \r\n    body = galaxy.getBody(body);\r\n    if(!body) {\r\n        return <Item variant=\"secondary\" name={typeof props.body === 'string' ? props.body : '(Body)'}/>;\r\n    }\r\n    \r\n    let Icon = body.starDistance ? IoMdPlanet : GiVibratingBall;\r\n    \r\n    return (\r\n        <Item\r\n            variant=\"success\"\r\n            handle={body}\r\n            icon={<Icon/>}\r\n            name={body.name || '(Body)'}\r\n            sub={body.starDistance ? body.starDistance.toLocaleString() + ' Ls' : ''}\r\n            detail={() => (\r\n                body.rings && body.rings.map((ring, i) => (\r\n                    <Item\r\n                        key={i}\r\n                        variant=\"info\"\r\n                        handle={ring}\r\n                        name={ring.name}\r\n                        icon={<GiAsteroid/>}\r\n                        sub={ring.type}/>\r\n                )))}>\r\n            <StarSystem system={body.system}/>\r\n        </Item>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport Station from './item/Station';\r\nimport Module from './item/Module';\r\nimport StarSystem from './item/StarSystem';\r\nimport Ship from './item/Ship';\r\nimport Body from './item/Body';\r\n\r\nconst resultMap = {\r\n    ship(result) {\r\n        return <Ship ship={result}/>;\r\n    },\r\n    module(result) {\r\n        return <Module module={result}/>;\r\n    },\r\n    system(result) {\r\n        return <StarSystem system={result}/>;\r\n    },\r\n    station(result) {\r\n        return <Station station={result}/>;\r\n    },\r\n    body(result) {\r\n        return <Body body={result}/>;\r\n    },\r\n};\r\n\r\nexport default function SearchResult(props) {\r\n    let {result} = props;\r\n    \r\n    let renderFn = resultMap[result._type];\r\n    if(!renderFn) {\r\n        console.error('[Search result]', result._type, result);\r\n        throw new Error('Unknown search result type: ' + result._type);\r\n    }\r\n    \r\n    return renderFn(result);\r\n};\r\n","import React, {useContext} from 'react';\r\nimport {GalaxyContext} from '../Contexts';\r\nimport Item from './Item';\r\nimport ExpandableList from '../ExpandableList';\r\nimport SearchResult from '../SearchResult';\r\nimport Attributes from '../Attributes';\r\nimport {BsBrightnessLow} from 'react-icons/all';\r\n\r\nexport default function StarSystem(props) {\r\n    let {system} = props;\r\n    \r\n    let galaxy = useContext(GalaxyContext);\r\n    \r\n    system = galaxy.getSystem(system);\r\n    if(!system) {\r\n        return <Item variant=\"secondary\" name={typeof props.system === 'string' ? props.system : '(System)'}/>;\r\n    }\r\n    \r\n    return (\r\n        <Item\r\n            // variant=\"info\"\r\n            handle={system}\r\n            icon={<BsBrightnessLow/>}\r\n            sub={system._currentDistance ? system._currentDistance.toLocaleString() + ' Ly' : null}\r\n            below={\r\n                system.permitRequired && (\r\n                    <small className=\"text-danger ml-2\">Permit required</small>\r\n                )}\r\n            detail={() => (<>\r\n                <Attributes attributes={system.attributes}/>\r\n                <ExpandableList items={system.stations} size={5} render={(item, i) => (\r\n                    <SearchResult key={i} result={item}/>\r\n                )}/>\r\n                {/*<ExpandableList items={system.bodies} size={5} render={(item, i) => (*/}\r\n                {/*    <SearchResult key={i} result={item}/>*/}\r\n                {/*)}/>*/}\r\n            </>)}>\r\n        </Item>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport Item from './Item';\r\nimport {capitalCase} from 'change-case';\r\n\r\nexport default function SignalSource(props) {\r\n    let {signalSource} = props;\r\n    \r\n    // let galaxy = useContext(GalaxyContext);\r\n    \r\n    return (\r\n        <Item\r\n            variant=\"muted\"\r\n            handle={signalSource}\r\n            name={`${capitalCase(signalSource.name)} (Threat ${signalSource.threat || 0})` || '(Unknown)'}>\r\n        \r\n        </Item>\r\n    );\r\n};\r\n","import React, {useState} from 'react';\r\nimport StarSystem from './StarSystem';\r\nimport {sentenceCase} from 'change-case';\r\nimport Item from './Item';\r\nimport Body from './Body';\r\nimport Ship from './Ship';\r\nimport SignalSource from './SignalSource';\r\nimport Station from './Station';\r\n\r\nexport default function JournalEntry(props) {\r\n    let {entry} = props;\r\n    \r\n    let [item, setItem] = useState(null);\r\n    \r\n    function cached(obj) {\r\n        if(!item) {\r\n            setItem(obj);\r\n        }\r\n        return obj;\r\n    }\r\n    \r\n    // let galaxy = useContext(GalaxyContext);\r\n    \r\n    let name = sentenceCase(entry.event, {})\r\n        .replace('Uss', 'USS')\r\n        .replace('Fss', 'FSS')\r\n        .replace('Dss', 'DSS');\r\n    \r\n    entry.StarSystem = entry.StarSystem || entry.SystemName;\r\n    \r\n    return (\r\n        <Item variant=\"muted\"\r\n              handle={entry}\r\n              name={name}\r\n              below={(<>\r\n                  {entry.From_Localised && (\r\n                      <small className=\"text-secondary d-block\">{entry.From_Localised}:</small>\r\n                  )}\r\n                  {entry.Message_Localised && (\r\n                      <small className=\"text-muted d-block\">{entry.Message_Localised}</small>\r\n                  )}\r\n              </>)}\r\n              sub={entry.timestamp.getUTCHours().toString().padStart(2, '0') + ':' + entry.timestamp.getUTCMinutes().toString().padStart(2, '0')}>\r\n            {entry.StarSystem && (\r\n                entry.StationName ? (\r\n                    <Station station={[entry.StarSystem, entry.StationName]}/>\r\n                ) : entry.Body || entry.BodyName ? (\r\n                    <Body body={cached(item || {\r\n                        id: entry.BodyID,\r\n                        name: entry.Body || entry.BodyName,\r\n                        // type: entry.BodyType,\r\n                        system: entry.StarSystem,\r\n                    })}/>\r\n                ) : (\r\n                    <StarSystem system={entry.StarSystem}/>\r\n                )\r\n            )}\r\n            {entry.Ship_Localised && (\r\n                <Ship ship={cached(item || {\r\n                    name: entry.Ship_Localised,\r\n                    pilot: entry.PilotName_Localised || entry.Commander,\r\n                })}/>\r\n            )}\r\n            {entry.USSType_Localised && (\r\n                <SignalSource signalSource={cached(item || {\r\n                    name: entry.USSType_Localised,\r\n                    threat: entry.USSThreat,\r\n                })}/>\r\n            )}\r\n        </Item>\r\n    );\r\n};\r\n","const currentSystemEvents = ['Location', 'FSDJump', 'SupercruiseEntry', 'SupercruiseExit', 'SupercruiseDrop'];\r\n\r\nexport class Player {\r\n    constructor() {\r\n        this.name = null;\r\n        this.journal = [];\r\n        // this.timestamp = null;\r\n    }\r\n    \r\n    getLatest(event) {\r\n        for(let entry of this.journal) {\r\n            if(entry.event === event) {\r\n                return entry;\r\n            }\r\n        }\r\n    }\r\n    \r\n    // getCurrentMaterials() {\r\n    //     let entry = this.getLatest('Materials');\r\n    //     return entry && ['Raw', 'Manufactured', 'Encoded']\r\n    //         .flatMap(type => entry[type].map(mat => [type, mat.Name, mat.Name_Localized, mat.Count]));\r\n    // }\r\n    \r\n    getCurrentSystem() {\r\n        for(let entry of this.journal) {\r\n            if(currentSystemEvents.includes(entry.event)) {\r\n                return entry.StarSystem;\r\n            }\r\n        }\r\n    }\r\n    \r\n    update(data) {\r\n        if(data.addLogEntries) {\r\n            data.addLogEntries.forEach(entry => {\r\n                entry.timestamp = new Date(entry.timestamp);\r\n                let index = this.journal.findIndex(e => e.uid && e.uid === entry.uid);\r\n                if(index !== -1) {\r\n                    this.journal[index] = entry;\r\n                }\r\n                else {\r\n                    this.journal.unshift(entry);\r\n                }\r\n            });\r\n            this.journal = this.journal.sort((a, b) => -(a.timestamp === b.timestamp ? a.uid - b.uid : a.timestamp - b.timestamp));\r\n            \r\n            let commanderEntry = this.getLatest('Commander');\r\n            this.name = commanderEntry ? commanderEntry.Name : null;\r\n        }\r\n    }\r\n}\r\n","import React from 'react';\r\nimport Item from './Item';\r\nimport {IoMdArrowDropdown} from 'react-icons/all';\r\n\r\nexport default function Category(props) {\r\n    const {name, detail, children} = props;\r\n    \r\n    return (\r\n        <Item name={name} icon={<IoMdArrowDropdown/>} detail={detail}>\r\n            {children}\r\n        </Item>\r\n    );\r\n};\r\n","import React, {useState} from 'react';\r\n\r\nimport './App.scss';\r\nimport {Button, InputGroup, Tab, Tabs} from 'react-bootstrap';\r\nimport {sentenceCase} from 'change-case';\r\nimport {tryConnect} from '../services/connection-service';\r\nimport {FilterContext, GalaxyContext, SearchContext, SelectContext, SettingsContext} from './Contexts';\r\nimport {findGalaxy} from '../services/galaxy-service';\r\nimport bootbox from 'bootbox';\r\nimport JournalEntry from './item/JournalEntry';\r\nimport {Player} from '../services/player-service';\r\nimport {FiMapPin, FiSearch, FiSettings} from 'react-icons/all';\r\nimport SearchResult from './SearchResult';\r\nimport ExpandableList from './ExpandableList';\r\nimport StarSystem from './item/StarSystem';\r\nimport Body from './item/Body';\r\nimport Category from './item/Category';\r\nimport Station from './item/Station';\r\n\r\nlet messageListener = null;\r\n\r\nlet allowAutoConnect = true;\r\n\r\nexport default function App() {\r\n    let [settings, setSettings] = useState(null);\r\n    let [player, setPlayer] = useState(null);\r\n    let [galaxy, setGalaxy] = useState(null);\r\n    let [connection, setConnection] = useState(null);\r\n    let [reconnecting, setReconnecting] = useState(null);\r\n    let [customSystemName, setCustomSystemName] = useState('');\r\n    let [currentTab, setCurrentTab] = useState(undefined);\r\n    let [searchQuery, setSearchQuery] = useState('');\r\n    let [searchResults, setSearchResults] = useState([]);\r\n    let [favorites, setFavorites] = useState([]);\r\n    let [selected, setSelected] = useState(null);\r\n    \r\n    if(!settings) {\r\n        settings = {\r\n            set(changes) {\r\n                setSettings({...settings, ...changes});\r\n            },\r\n        };\r\n        setSettings(settings);\r\n    }\r\n    \r\n    if(!player) {\r\n        player = new Player();\r\n        setPlayer(player);\r\n    }\r\n    \r\n    function promptConnect() {\r\n        disconnect();\r\n        bootbox.prompt({\r\n            title: 'Connect to IP address:',\r\n            value: connection ? connection.io.uri.replace('ws://', '') : localStorage['websocket'] || 'localhost',\r\n            callback: address => {\r\n                if(address) {\r\n                    localStorage['websocket'] = address || '';\r\n                    connect(address)\r\n                        .catch(err => console.error(err));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    \r\n    async function connect(address) {\r\n        setReconnecting(true);\r\n        let connection = await tryConnect(address);\r\n        setConnection(connection);\r\n        setReconnecting(false);\r\n        // setCurrentTab('nearby');\r\n        return connection;\r\n    }\r\n    \r\n    function disconnect() {\r\n        if(connection) {\r\n            connection.close();\r\n        }\r\n        localStorage['websocket'] = '';\r\n        setConnection(null);\r\n        setReconnecting(false);\r\n        setPlayer(null);\r\n    }\r\n    \r\n    // console.log(relativeSystem || '-', galaxy, player);///\r\n    \r\n    if(connection) {\r\n        connection.removeListener('message', messageListener);\r\n        messageListener = data => {\r\n            console.warn(data);\r\n            player.update(data);\r\n            setPlayer(null);////\r\n            setPlayer(player);\r\n        };\r\n        connection.on('message', messageListener);\r\n    }\r\n    // useEffect(() => {\r\n    //     if(connection) {\r\n    //         return () => connection.removeListener('message', listener);\r\n    //     }\r\n    // });\r\n    \r\n    let storedAddress = localStorage['websocket'];\r\n    if(storedAddress && allowAutoConnect) {\r\n        allowAutoConnect = false;\r\n        // let timeout = setTimeout(() => disconnect(), 1000);\r\n        connect(storedAddress)\r\n            // .then(() => clearTimeout(timeout))\r\n            .catch(err => console.error(err));\r\n    }\r\n    \r\n    if(!galaxy) {\r\n        findGalaxy().then(galaxy => setGalaxy(galaxy));\r\n        return (\r\n            <div style={{marginTop: '20vh'}}>\r\n                <div style={{maxWidth: '960px', animationDuration: '1s'}}>\r\n                    <h4 className=\"text-center text-light mb-5 animate-fade-in\" style={{animationDuration: '1s'}}>\r\n                        Loading galaxy data...\r\n                    </h4>\r\n                    <img className=\"d-block mx-auto animate-fade-in\" style={{animationDuration: '4s'}}\r\n                         src=\"img/favicon.png\" alt=\"Loading...\"/>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    \r\n    currentTab = currentTab || (connection ? 'nearby' : 'settings');///\r\n    \r\n    let relativeSystem = galaxy.setRelativeSystem(galaxy.getSystem(parseInt(customSystemName) ? null : customSystemName) || player.getCurrentSystem() || 'Sol');\r\n    \r\n    let hideEvents = ['Music', 'FSSSignalDiscovered'];\r\n    \r\n    function isEntryVisible(entry) {\r\n        return !hideEvents.includes(entry.event);\r\n    }\r\n    \r\n    function doSearch(searchText) {\r\n        // setCurrentTab(searchText ? 'search' : undefined);\r\n        if(searchText) {\r\n            setCurrentTab('search');\r\n        }\r\n        else {\r\n            searchText = '';\r\n        }\r\n        setSearchQuery(searchText);\r\n        setSearchResults(galaxy.search(searchText));\r\n        setSelected(null);\r\n    }\r\n    \r\n    function doFilter(item) {\r\n        // return item._type !== 'station' || item.type !== 'Fleet Carrier';\r\n        return true;\r\n    }\r\n    \r\n    let searchBarElem = null;\r\n    \r\n    function onSelectTab(tab) {\r\n        setCurrentTab(tab);\r\n        setSelected(null);\r\n        if(tab === 'search' && searchBarElem) {\r\n            if(currentTab === 'search' && searchBarElem.value) {\r\n                searchBarElem.value = '';\r\n                // setSearchQuery('');\r\n                // setSearchResults([]);\r\n                doSearch();\r\n            }\r\n            else {\r\n                searchBarElem.select();\r\n            }\r\n            searchBarElem.focus();\r\n        }\r\n    }\r\n    \r\n    function isSearchRelevant(text) {\r\n        return galaxy._isSearchRelevant(searchQuery, text);\r\n    }\r\n    \r\n    function addFavorite(item) {\r\n        if(!item._type) {\r\n            return;/////\r\n        }\r\n        setFavorites([item, ...favorites.filter(x => x !== item)]);\r\n    }\r\n    \r\n    function removeFavorite(item) {\r\n        setFavorites(favorites.filter(x => x !== item));\r\n    }\r\n    \r\n    return (\r\n        <SettingsContext.Provider value={settings}>\r\n            <SelectContext.Provider value={{selected, setSelected, ancestors: []}}>\r\n                <FilterContext.Provider value={{filter: doFilter, favorites, addFavorite, removeFavorite}}>\r\n                    <GalaxyContext.Provider value={galaxy}>\r\n                        <SearchContext.Provider value={{text: searchQuery, isRelevant: isSearchRelevant}}>\r\n                            <div className=\"p-2\">\r\n                                <div>\r\n                                    {player.name && (\r\n                                        <h6 className=\"text-primary float-right mt-1\">CMDR {player.name}</h6>\r\n                                    )}\r\n                                    <h5 className={'text-' + (relativeSystem.name.toLowerCase() === customSystemName.toLowerCase() ? 'success' : connection ? 'info' : 'light')}>\r\n                                        {relativeSystem.name}\r\n                                    </h5>\r\n                                </div>\r\n                                <InputGroup size=\"lg\" className=\"mb-2\">\r\n                                    <input type=\"text\"\r\n                                           className=\"form-control\"\r\n                                           value={searchQuery}\r\n                                           placeholder={'Search...'}\r\n                                           ref={elem => searchBarElem = elem}\r\n                                        // onFocus={() => setCurrentTab('search')}\r\n                                           onChange={e => doSearch(e.target.value)}/>\r\n                                </InputGroup>\r\n                                <Tabs activeKey={currentTab}\r\n                                      onSelect={onSelectTab}>\r\n                                    <Tab eventKey=\"search\" title={<FiSearch className=\"h4 mt-1\"/>}>\r\n                                        {currentTab === 'search' && (\r\n                                            searchQuery ? (\r\n                                                <ExpandableList\r\n                                                    items={searchResults}\r\n                                                    size={20}\r\n                                                    // ignoreSort\r\n                                                    render={(result, i) => (\r\n                                                        <SearchResult key={i} result={result}/>\r\n                                                    )}/>\r\n                                            ) : (<>\r\n                                                <ExpandableList\r\n                                                    items={favorites}\r\n                                                    size={10}\r\n                                                    // ignoreSort\r\n                                                    render={(item, i) => (\r\n                                                        <SearchResult key={i} result={item}/>\r\n                                                    )}/>\r\n                                                <ExpandableList\r\n                                                    items={galaxy.getNearestSystems(() => s => !favorites.includes(s), 80)}\r\n                                                    size={10}\r\n                                                    // ignoreSort\r\n                                                    render={(item, i) => (\r\n                                                        <SearchResult key={i} result={item}/>\r\n                                                    )}/>\r\n                                            </>)\r\n                                        )}\r\n                                    </Tab>\r\n                                    <Tab eventKey=\"nearby\" title={<FiMapPin className=\"h4 mt-1\"/>}>\r\n                                        {currentTab === 'nearby' && (<>\r\n                                            <div className=\"mt-2\">\r\n                                                <Category name=\"Nearby stations\" detail={() => (\r\n                                                    <ExpandableList\r\n                                                        items={galaxy.getNearestStations()}\r\n                                                        size={3}\r\n                                                        // ignoreSort\r\n                                                        render={(station, i) => (\r\n                                                            <SearchResult key={i} result={station}/>\r\n                                                        )}/>\r\n                                                )}/>\r\n                                                <Category name=\"Pristine rings\" detail={() => (<>\r\n                                                    {/*<SettingToggle*/}\r\n                                                    {/*    setting=\"allResourceTypes\"*/}\r\n                                                    {/*    inverted*/}\r\n                                                    {/*    label=\"Pristine\"/>*/}\r\n                                                    {galaxy.ringTypes.map((type, i) => (\r\n                                                        <Category key={i} name={type} detail={() => (<>\r\n                                                            <ExpandableList\r\n                                                                items={galaxy.getNearestRingBodies(type).filter(b => settings.allResourceTypes || b.system.reserveType === 'Pristine')}\r\n                                                                size={2}\r\n                                                                // ignoreSort\r\n                                                                render={(body, i) => (\r\n                                                                    <Body key={i} body={body}/>\r\n                                                                )}/>\r\n                                                        </>)}/>\r\n                                                    ))}\r\n                                                </>)}/>\r\n                                                <Category name=\"Material traders\" detail={() => (\r\n                                                    galaxy.materialTypes.map((type, i) => (\r\n                                                        <Category key={i} name={type} detail={() => (\r\n                                                            <ExpandableList\r\n                                                                items={galaxy.getNearestStations(s => s.services.includes(type + ' Material Trader'))}\r\n                                                                size={2}\r\n                                                                // ignoreSort\r\n                                                                render={(station, i) => (\r\n                                                                    <Station key={i} station={station}/>\r\n                                                                )}/>\r\n                                                        )}/>\r\n                                                    ))\r\n                                                )}/>\r\n                                                <Category name=\"Services\" detail={() => (\r\n                                                    ['Interstellar Factors', 'Black Market', 'Technology Broker'].map((type, i) => (\r\n                                                        <Category key={i} name={sentenceCase(type)} detail={() => (\r\n                                                            <ExpandableList\r\n                                                                items={galaxy.getNearestStations(s => s.services.includes(type))}\r\n                                                                size={2}\r\n                                                                // ignoreSort\r\n                                                                render={(station, i) => (\r\n                                                                    <Station key={i} station={station}/>\r\n                                                                )}/>\r\n                                                        )}/>\r\n                                                    ))\r\n                                                )}/>\r\n                                            </div>\r\n                                        </>)}\r\n                                    </Tab>\r\n                                    <Tab eventKey=\"settings\" title={<FiSettings className=\"h4 mt-1\"/>}>\r\n                                        <div className=\"p-2\">\r\n                                            <div className=\"p-2\">\r\n                                                <h5 className={'text-' + (customSystemName ? relativeSystem.name.toLowerCase() === customSystemName.toLowerCase() ? 'success' : 'danger' : 'light')}>\r\n                                                    Current system:\r\n                                                </h5>\r\n                                                <InputGroup size=\"md\" className=\"my-1\" style={{opacity: .8}}>\r\n                                                    <input type=\"text\"\r\n                                                           className=\"form-control\"\r\n                                                           value={customSystemName}\r\n                                                           placeholder=\"Change current system...\"\r\n                                                           onFocus={e => e.target.select()}\r\n                                                           onChange={e => doSearch(null) & setCustomSystemName(e.target.value)}/>\r\n                                                </InputGroup>\r\n                                                <StarSystem system={relativeSystem}/>\r\n                                            </div>\r\n                                            <Button\r\n                                                size=\"lg\"\r\n                                                variant={'outline-' + (connection ? 'light' : reconnecting ? 'warning' : 'info')}\r\n                                                className=\"w-100 py-2 my-3\"\r\n                                                style={{opacity: connection && .5}}\r\n                                                onClick={() => connection ? disconnect() : promptConnect()}>\r\n                                                {connection ? 'Connected' : reconnecting ? 'Connection not found' : 'Connect'}\r\n                                            </Button>\r\n                                            {!connection && (\r\n                                                <a href=\"data/elite-navigator.exe\" target=\"_blank\">\r\n                                                    <Button\r\n                                                        size=\"\"\r\n                                                        variant=\"outline-light\"\r\n                                                        className=\"w-100 py-2 my-2\"\r\n                                                        style={{opacity: .7}}>\r\n                                                        Download location sync\r\n                                                    </Button>\r\n                                                </a>\r\n                                            )}\r\n                                            {connection && currentTab === 'settings' && (<>\r\n                                                <ExpandableList\r\n                                                    items={player.journal.filter(isEntryVisible)}\r\n                                                    size={5}\r\n                                                    render={(entry, i) => (\r\n                                                        <JournalEntry key={`${entry.timestamp}${i}`} entry={entry}/>\r\n                                                    )}/>\r\n                                            </>)}\r\n                                        </div>\r\n                                    </Tab>\r\n                                </Tabs>\r\n                            </div>\r\n                        </SearchContext.Provider>\r\n                    </GalaxyContext.Provider>\r\n                </FilterContext.Provider>\r\n            </SelectContext.Provider>\r\n        </SettingsContext.Provider>\r\n    );\r\n};\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'bootstrap';\r\nimport './style/index.scss';\r\nimport App from './components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App/>, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}