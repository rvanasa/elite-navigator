(this["webpackJsonpelite-navigator-web"]=this["webpackJsonpelite-navigator-web"]||[]).push([[0],{126:function(e,t){},149:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(20),i=n.n(s),c=(n(91),n(94),n(11)),o=n.n(c),l=n(8),u=n(14),m=n(49),d=n(6),f=(n(96),n(156)),y=n(161),h=n(157),v=n(159),p=n(154),b=n(75),g=n.n(b),E=n(76),S="https://elite-navigator.herokuapp.com",j=null,O=null;function _(e){return k.apply(this,arguments)}function k(){return(k=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t||"elite-navigator",j&&j.close(),j=null,O=new Promise((function(e,n){var a=new E.EventEmitter,r=g.a.connect(S);j=r;var s=new Set;r.on("connect",(function(){console.log("Connected"),r.emit("join",t);document.addEventListener("visibilitychange",(function e(){r===j?"visible"!==document.visibilityState||r.connected||r.connect():document.removeEventListener("visibilitychange",e)})),e(a)})),r.on("join",(function(e){console.log("Joined:",e)})),r.on("leave",(function(e){console.log("Left:",e),s.has(e)&&(s.delete(e),a.emit("data",{resetPlayer:!0}))})),r.on("msg",(function(e,t){console.log(">",t,e),s.add(t),a.emit("data",{msg:e})})),r.on("error",(function(e){console.error(e),n(e)})),r.on("disconnect",(function(){console.log("Disconnected"),a.emit("data",{resetPlayer:!0})}))})),e.abrupt("return",O);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=r.a.createContext(null),N=r.a.createContext(null),C=r.a.createContext(null),x=r.a.createContext(null),D=r.a.createContext(null),L=n(13),T=n(28),P=n(29),F=n(47),B=n.n(F),M=n(77),R=Object(M.setupCache)({maxAge:24e4}),z=B.a.create({adapter:R.adapter}),I=function(){function e(t){var n=this;Object(T.a)(this,e),this.ships=t.ships,this.modules=t.modules,this.systems=t.systems,this.stations=t.stations,this.bodies=t.bodies,console.assert(Object.keys(t).every((function(e){return n.hasOwnProperty(e)}))),this.materialTypes=["Raw","Manufactured","Encoded"],this.ringTypes=["Rocky","Icy","Metallic","Metal Rich"],this.searchOptions=[],this._relativeSystem=null,this._sortedSystems=[],this._sortedStations=[],this._sortedBodies=[]}return Object(P.a)(e,[{key:"_getSearchTerms",value:function(e){return e?Object(l.a)(new Set(e.toString().toLowerCase().replace(/[^a-z0-9 ]/," ").split(" ").map((function(e){return e.trim()})).filter((function(e){return!!e})))).sort():[]}},{key:"_registerSearch",value:function(e,t){var n=this;return t._type=e,t._searchTerms=Object(l.a)(new Set([t.name].concat(Object(l.a)(Object.values(t.attributes).filter((function(e){return"string"===typeof e})))).filter((function(e){return!!e})).flatMap((function(e){return n._getSearchTerms(e)})).map((function(e){return e.trim()})).filter((function(e){return e})))).sort(),this.searchOptions.push(t),t}},{key:"_resolve",value:function(e,t){return("string"===typeof t?e[t.toLowerCase()]:"number"===typeof t?e[t]:t)||null}},{key:"getShip",value:function(e){return this._resolve(this.ships,e)}},{key:"getModule",value:function(e){return this._resolve(this.modules,e)}},{key:"getSystem",value:function(e){return this._resolve(this.systems,e)}},{key:"getStation",value:function(e){if(Array.isArray(e)){var t=this.getSystem(e[0]);return t&&t.stations[e[1]]||null}return this._resolve(this.stations,e)}},{key:"getBody",value:function(e){return this._resolve(this.bodies,e)}},{key:"getDistanceBetweenSystems",value:function(e,t){var n=e.x-t.x,a=e.y-t.y,r=e.z-t.z;return Math.round(Math.sqrt(Math.pow(n,2)+Math.pow(a,2)+Math.pow(r,2)))}},{key:"getRelativeSystem",value:function(){return this._relativeSystem}},{key:"setRelativeSystem",value:function(e){var t=this;if(e=this.getSystem(e),this._relativeSystem===e)return e;this._relativeSystem=e;return this._sortedSystems.forEach((function(n){return function e(t,n){t*=1+(n._distanceModifier||0),n._currentDistance=t,n._children&&n._children.forEach((function(n){return e(t,n)}))}(e?t.getDistanceBetweenSystems(e,n):0,n)})),this._sortedSystems.sort((function(t,n){return e?t._currentDistance-n._currentDistance:t.name-n.name})),this._sortedStations.sort((function(t,n){return e?t._currentDistance-n._currentDistance:t.name-n.name})),this._sortedBodies.sort((function(t,n){return e?t._currentDistance-n._currentDistance:t.name-n.name})),e}},{key:"getNearestSystems",value:function(e,t){var n=[];if(arguments.length<2)t=Number.POSITIVE_INFINITY;else if(t<=0)return n;if(!e)return this._sortedSystems.slice(0,t);var a,r=Object(L.a)(this._sortedSystems);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(e(s)&&(n.push(s),n.length>=t))break}}catch(i){r.e(i)}finally{r.f()}return n}},{key:"getNearestStations",value:function(e,t){var n=[];if(arguments.length<2)t=Number.POSITIVE_INFINITY;else if(t<=0)return n;if(!e)return this._sortedStations.slice(0,t);var a,r=Object(L.a)(this._sortedStations);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(e(s)&&(n.push(s),n.length>=t))break}}catch(i){r.e(i)}finally{r.f()}return n}},{key:"getNearestRingBodies",value:function(e,t){var n=[];if(t<=0)return n;var a,r=Object(L.a)(this._sortedBodies);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(s.rings){var i,c=Object(L.a)(s.rings);try{for(c.s();!(i=c.n()).done;){var o=i.value;if(!e||o.type===e){n.push(s);break}}}catch(l){c.e(l)}finally{c.f()}if(n.length>=t)break}}}catch(l){r.e(l)}finally{r.f()}return n}},{key:"_isSearchRelevant",value:function(e,t){if(!e||!t)return!!e;var n=this._getSearchTerms(e),a=this._getSearchTerms(t);return n.some((function(e){return a.some((function(t){return t.startsWith(e)}))}))}},{key:"search",value:function(e){if(!e.trim())return[];var t=this.searchOptions.filter((function(t){return t.name&&t.name.toLowerCase()===e})),n=[],a=this._getSearchTerms(e);if(!a.length)return n;for(var r=3-a.length,s=this.searchOptions,i=s.length,c=a.length,o=0;o<i;o++){for(var u=s[o],m=!0,d=0;d<c;d++){var f=a[d],y=f.length;y<r&&(y=r);for(var h=u._searchTerms,v=h.length,p=!1,b=0;b<v;b++){var g=h[b].substring(0,y);if(g===f&&(p=!0),g>=f)break}if(!p){m=!1;break}}m&&!t.includes(u)&&n.push(u)}return n.sort((function(e,t){return(e._currentDistance||0)-(t._currentDistance||0)})),[].concat(Object(l.a)(t),n)}}]),e}();function A(){return{}}function W(){return{Group:this.groupName,Class:"".concat(this.class).concat(this.rating),Ship:this.ship&&this.ship.name,Category:this.category,Mode:this.mode}}function U(){return{Allegiance:this.allegiance,Power:this.power,"Power state":this.powerState,"System state":this.states.join(", "),Resources:this.reserveType,Habitation:this.population?"Populated":"Unpopulated",Population:this.population}}function K(){return{Type:this.Type,Economy:this.economies.join(", "),Services:this.services.join(", ")}}function J(e){for(var t=0,n=Object.values(e);t<n.length;t++)for(var a=n[t],r=0,s=Object.values(a);r<s.length;r++)for(var i=s[r],c=function(){var t=Object(d.a)(l[o],2),n=t[0],a=t[1],r=i[n];Array.isArray(r)?i[n]=r.map((function(t){return e[a][t]})):i[n]=e[a][r]},o=0,l=Object.entries(i.$resolve);o<l.length;o++)c();return e}function V(){return Y.apply(this,arguments)}function Y(){return(Y=Object(u.a)(o.a.mark((function e(){var t,n,a,r,s,i,c,u,m,d,f,y,h,v,p,b,g;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Loading galaxy..."),e.t0=J,e.next=4,z.get("data/galaxy.json");case 4:for(e.t1=e.sent.data,t=(0,e.t0)(e.t1),n=new I(t),a=0,r=Object.values(n.ships);a<r.length;a++)s=r[a],Object.defineProperty(s,"attributes",{get:A}),n._registerSearch("ship",s);for(i=0,c=Object.values(n.modules);i<c.length;i++)u=c[i],Object.defineProperty(u,"attributes",{get:W}),n._registerSearch("module",u);for(m=0,d=Object.values(n.systems);m<d.length;m++)f=d[m],Object.defineProperty(f,"attributes",{get:U}),n.systems[f.name.toLowerCase()]=f,n._sortedSystems.push(f),f.stations.sort((function(e,t){return e.starDistance-t.starDistance})),f.bodies.sort((function(e,t){return e.starDistance-t.starDistance})),f._children=[].concat(Object(l.a)(f.stations),Object(l.a)(f.bodies)).sort((function(e,t){return e.starDistance-t.starDistance})),n._registerSearch("system",f);for(y=0,h=Object.values(n.stations);y<h.length;y++)v=h[y],Object.defineProperty(v,"attributes",{get:K}),n._sortedStations.push(v),v._distanceModifier=1e-4*v.starDistance,n._registerSearch("station",v);for(p=0,b=Object.values(t.bodies);p<b.length;p++)(g=b[p])._type="body",n._sortedBodies.push(g),g._distanceModifier=1e-4*g.starDistance;return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=null;function G(){return(G=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q||(q=V()),e.abrupt("return",q);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){var t=e.attributes,n=e.hideKeys;return t?r.a.createElement(r.a.Fragment,null,Object.entries(t).filter((function(e){return Object(d.a)(e,2)[1]})).map((function(e){var t=Object(d.a)(e,2),a=t[0],s=t[1];return r.a.createElement("div",{key:a},!n&&a!==s&&r.a.createElement("small",{className:"text-secondary"},a,":"),r.a.createElement("small",{className:"text-muted d-inline-block"},"number"===typeof s?s.toLocaleString():s))}))):null}var $=n(78);function Q(e){var t=e.handle,n=e.variant,s=e.icon,i=e.name,c=e.sub,o=e.below,u=e.detail,m=e.children,f=Object(a.useState)(!1),y=Object(d.a)(f,2),h=y[0],v=y[1],p=Object(a.useState)(null),b=Object(d.a)(p,2),g=b[0],E=b[1],S=Object(a.useContext)(x),j=Object(a.useContext)(N),O=Object(a.useContext)(C);if(t=t||"".concat(n).concat(i).concat(c),i||(i=t.name),j.ancestors.includes(t))return null;j.selected!==t?h=!1:g&&(h=!0),!h&&j.selected&&(n="muted");var _=null;O&&t.attributes&&(_={},Object.entries(t.attributes).forEach((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];i&&i.includes(a)||!O.isRelevant(a)||(_[n]=a)})));var k=S.favorites.includes(t);var w="solid 2px "+(k?"#5b5ad5":"#424345");return r.a.createElement("div",{className:"m-0 mb-1 rounded-lg",style:{background:h?"#333":"#1A1A1A",borderLeft:u?"solid 6px ".concat(!h&&j.selected?"#424345":k?"#5b5ad5":"#76777A"):w,borderTop:w,borderRight:w,borderBottom:w}},r.a.createElement($.a,{onSwipedLeft:function(){return S.removeFavorite(t)},onSwipedRight:function(){return S.addFavorite(t)}},r.a.createElement("div",{className:"cursor-pointer p-2",style:{opacity:!h&&j.selected?.8:1},onClick:j&&u&&function(e){return e.stopPropagation()&(v(!h),j.setSelected(h?null:t),void E(null))}},r.a.createElement("div",{className:"d-flex"},(s||i)&&r.a.createElement("span",{className:"m-0 text-".concat(n," flex-grow-1")},s&&r.a.createElement("span",{className:"mr-2",style:{position:"relative",top:"-2px",opacity:.9}},s),i),c&&r.a.createElement("small",{className:"float-right text-".concat(n),style:{marginTop:"2px",whiteSpace:"nowrap",opacity:.9}},c)),o,!h&&_&&r.a.createElement(H,{hideKeys:!0,attributes:_}))),!h&&r.a.createElement(r.a.Fragment,null,m&&r.a.createElement("div",{className:"px-2"},m)),h&&function(){var e={selected:g,setSelected:function(e){return E(e)&v(!0)},ancestors:[].concat(Object(l.a)(j.ancestors),[t])};return r.a.createElement(N.Provider,{value:e},r.a.createElement("div",{className:"p-2 pt-1",style:{background:"#080808"}},u&&u(e),m))}())}function X(e){var t=e.items,n=e.size,s=e.ignoreFilter,i=e.ignoreSort,c=e.render,o=Object(a.useState)(n||1),u=Object(d.a)(o,2),m=u[0],f=u[1],y=Object(a.useContext)(x);return t&&t.length?(y&&(s||(t=t.filter(y.filter)),i||(t=[].concat(Object(l.a)(t.filter((function(e){return y.favorites.includes(e)}))),Object(l.a)(t.filter((function(e){return!y.favorites.includes(e)})))))),r.a.createElement("div",{className:"my-1"},t.slice(0,m).map(c),t.length>m&&r.a.createElement("span",{className:"btn btn-outline-secondary d-block mt-2",onClick:function(){return f(2*m)}},"Show more"))):null}var Z=n(151);function ee(e){var t=e.station,n=Object(a.useContext)(w);if(!(t=n.getStation(t)))return r.a.createElement(Q,{variant:"secondary",name:"string"===typeof e.station?e.station:"(Station)"});var s=t.planetary?Z.d:Z.b;return r.a.createElement(Q,{variant:"warning",handle:t,icon:r.a.createElement(s,null),sub:t.starDistance?t.starDistance.toLocaleString()+" Ls":"",detail:function(){return r.a.createElement(H,{attributes:t.attributes})}},t.system&&r.a.createElement(ue,{system:t.system}))}var te=n(27),ne=n(160);function ae(e){var t=e.setting,n=e.label,s=e.inverted,i=e.onToggle,c=Object(a.useContext)(D);return r.a.createElement(ne.a,null,r.a.createElement(ne.a.Group,{className:"my-2",onClick:function(e){c.set(Object(te.a)({},t,!c[t])),i&&i(e)}},r.a.createElement(ne.a.Check,{readOnly:!0,checked:!!c[t]===!s,label:n||t})))}function re(e){var t=e.ship,n=Object(a.useContext)(w),s=Object(a.useContext)(D);return t=n.getShip(t),r.a.createElement(Q,{variant:"danger",handle:t,icon:r.a.createElement(Z.c,null),sub:t.pilot,detail:function(e){var a=e.setSelected,i=n.getNearestStations((function(e){return e.ships.includes(t)}));return s.onlyDiscounts&&(i=i.filter((function(e){return"Li Yong-Rui"===e.system.power}))),r.a.createElement(r.a.Fragment,null,r.a.createElement(H,{attributes:t.attributes}),r.a.createElement(ae,{setting:"onlyDiscounts",label:"15% discount",onToggle:function(){return a(null)}}),r.a.createElement(X,{items:i,size:2,render:function(e,t){return r.a.createElement(le,{key:t,result:e})}}))}})}function se(e){var t=e.module,n=Object(a.useContext)(w),s=Object(a.useContext)(D);return t=n.getModule(t),r.a.createElement(Q,{variant:"danger",handle:t,name:"".concat(t.class+t.rating," ").concat(t.name),sub:t.ship&&t.ship.name||t.mode,detail:function(e){var a=e.setSelected,i=n.getNearestStations((function(e){return e.modules.includes(t)}));return s.onlyDiscounts&&(i=i.filter((function(e){return"Li Yong-Rui"===e.system.power}))),r.a.createElement(r.a.Fragment,null,t.ship&&r.a.createElement(re,{ship:t.ship}),r.a.createElement(H,{attributes:t.attributes}),r.a.createElement(ae,{setting:"onlyDiscounts",label:"15% discount",onToggle:function(){return a(null)}}),r.a.createElement(X,{items:i,size:2,render:function(e,t){return r.a.createElement(le,{key:t,result:e})}}))}})}var ie=n(152);function ce(e){var t=e.body,n=Object(a.useContext)(w);if(!(t=n.getBody(t)))return r.a.createElement(Q,{variant:"secondary",name:"string"===typeof e.body?e.body:"(Body)"});var s=n.getSystem(t.system),i=t.type&&t.type.toLowerCase().includes("star")?ie.a:Z.e;return r.a.createElement(Q,{variant:"success",handle:t,icon:r.a.createElement(i,null),name:t.name||"(Body)",sub:t.starDistance?t.starDistance.toLocaleString()+" Ls":"",below:r.a.createElement("small",{className:"text-muted"},t.type),detail:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(H,{attributes:t.attributes}),t.rings&&t.rings.map((function(e,t){return r.a.createElement(Q,{key:t,variant:"info",handle:e,name:e.name,icon:r.a.createElement(Z.a,null),sub:e.type})})))}},s&&r.a.createElement(ue,{system:s}))}var oe={ship:function(e){return r.a.createElement(re,{ship:e})},module:function(e){return r.a.createElement(se,{module:e})},system:function(e){return r.a.createElement(ue,{system:e})},station:function(e){return r.a.createElement(ee,{station:e})},body:function(e){return r.a.createElement(ce,{body:e})}};function le(e){var t=e.result,n=oe[t._type];if(!n)throw console.error("[Search result]",t._type,t),new Error("Unknown search result type: "+t._type);return n(t)}function ue(e){var t=e.system,n=Object(a.useContext)(w);return(t=n.getSystem(t))?r.a.createElement(Q,{handle:t,icon:r.a.createElement(ie.a,null),sub:t._currentDistance?t._currentDistance.toLocaleString()+" Ly":null,below:t.permitRequired&&r.a.createElement("small",{className:"text-danger ml-2"},"Permit required"),detail:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(H,{attributes:t.attributes}),r.a.createElement(X,{items:t.stations,size:5,render:function(e,t){return r.a.createElement(le,{key:t,result:e})}}))}}):r.a.createElement(Q,{variant:"secondary",name:"string"===typeof e.system?e.system:"(System)"})}var me=n(153);function de(e){var t=e.signalSource;return r.a.createElement(Q,{variant:"muted",handle:t,name:"".concat(Object(me.a)(t.name)," (Threat ").concat(t.threat||0,")")||!1})}var fe=["Location","FSDJump","CarrierJump"],ye=function(){function e(){Object(T.a)(this,e),this.name=null,this.journal=[],this.discoveries=[],this._currentSystem=null}return Object(P.a)(e,[{key:"getLatest",value:function(e){var t,n=Object(L.a)(this.journal);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.event===e)return a}}catch(r){n.e(r)}finally{n.f()}}},{key:"getCurrentSystem",value:function(e){return this._currentSystem&&(e.getSystem(this._currentSystem.name)||this._currentSystem)}},{key:"update",value:function(e){var t=this;if(e.journalEntries){e.journalEntries.forEach((function(e){e.timestamp=new Date(e.timestamp).getTime();var n=t.journal.findIndex((function(t){return t.uid&&t.uid===e.uid}));if(-1!==n?t.journal[n]=e:t.journal.unshift(e),e.hasOwnProperty("WasDiscovered")&&!e.WasDiscovered&&!e.WasMapped)if(-1!==(n=t.discoveries.findIndex((function(t){return t.BodyName===e.BodyName})))){var a=t.discoveries[n];!(e.timestamp===a.timestamp?e.uid>a.uid:e.timestamp>a.timestamp)||!e.TerraformState&&a.TerraformState||(t.discoveries[n]=e)}else t.discoveries.unshift(e)})),this.journal=this.journal.sort((function(e,t){return-(e.timestamp===t.timestamp?e.uid-t.uid:e.timestamp-t.timestamp)})),this.discoveries=this.discoveries.sort((function(e,t){return-(e.timestamp===t.timestamp?e.uid-t.uid:e.timestamp-t.timestamp)}));var n=this.getLatest("Commander");this.name=n?n.Name:null}this._currentSystem=null;var a,r=Object(L.a)(this.journal);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(fe.includes(s.event)){this._currentSystem={_type:"system",name:s.StarSystem||s.SystemName,x:s.StarPos[0],y:s.StarPos[1],z:s.StarPos[2],population:s.Population,states:[],stations:[],bodies:[],attributes:{}};break}}}catch(i){r.e(i)}finally{r.f()}}}]),e}();function he(e){return{_type:"body",id:e.BodyID,name:e.Body||e.BodyName,type:e.PlanetClass||e.StarType&&"".concat(e.StarType+e.Subclass,"-").concat(e.Luminosity," star"),system:e.StarSystem,rings:e.Rings&&e.Rings.map((function(t){return{name:t.Name.replace(e.BodyName,"").trim(),type:t.RingClass.replace("eRingClass_","").replace("MetalRich","Metal Rich").replace("Metalic","Metallic")}})),firstDiscovered:!e.WasDiscovered&&!e.WasMapped,attributes:{Type:e.PlanetClass,"Earth masses":e.MassEM,Atmosphere:Object(p.a)(e.Atmosphere||""),Volcanism:Object(p.a)(e.Volcanism||""),Landable:e.Landable&&"Landable",State:e.TerraformState,"First Discovered":e.firstDiscovered&&"First Discovered"}}}function ve(e){return{_type:"ship",name:e.Ship_Localised,pilot:e.PilotName_Localised||e.Commander}}function pe(e){return{_type:"signal",name:e.USSType_Localised,threat:e.USSThreat}}function be(e){var t=e.entry,n=e.internal,s=Object(a.useState)(null),i=Object(d.a)(s,2),c=i[0],o=i[1];function l(e){return c||o(e),e}var u=Object(a.useContext)(w),m=Object(p.a)(t.event,{}).replace("Uss","USS").replace("Fss","FSS").replace("Dss","DSS");t.StarSystem=t.StarSystem||t.SystemName;var f=new Date(t.timestamp),y=r.a.createElement(r.a.Fragment,null,t.StarSystem&&(t.StationName?r.a.createElement(ee,{station:[t.StarSystem,t.StationName]}):t.Body||t.BodyName?r.a.createElement(ce,{body:l(c||u.getBody(t.BodyName)||he(t))}):r.a.createElement(ue,{system:t.StarSystem})),t.Ship_Localised&&r.a.createElement(re,{ship:l(c||ve(t))}),t.USSType_Localised&&r.a.createElement(de,{signalSource:l(c||pe(t))}));return n?y:r.a.createElement(Q,{variant:"muted",handle:t,name:m,below:r.a.createElement(r.a.Fragment,null,t.From_Localised&&r.a.createElement("small",{className:"text-secondary d-block"},t.From_Localised,":"),t.Message_Localised&&r.a.createElement("small",{className:"text-muted d-block"},t.Message_Localised)),sub:f.getUTCHours().toString().padStart(2,"0")+":"+f.getUTCMinutes().toString().padStart(2,"0")},y)}var ge=n(158),Ee=n(155);function Se(e){var t=e.name,n=e.detail,a=e.children;return r.a.createElement(Q,{name:t,icon:r.a.createElement(Ee.a,null),detail:n},a)}var je=null,Oe=!0;function _e(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)(null),c=Object(d.a)(i,2),b=c[0],g=c[1],E=Object(a.useState)(null),S=Object(d.a)(E,2),j=S[0],O=S[1],k=Object(a.useState)(null),L=Object(d.a)(k,2),T=L[0],P=L[1],F=Object(a.useState)(null),B=Object(d.a)(F,2),M=B[0],R=B[1],z=Object(a.useState)(""),I=Object(d.a)(z,2),A=I[0],W=I[1],U=Object(a.useState)(void 0),K=Object(d.a)(U,2),J=K[0],V=K[1],Y=Object(a.useState)(""),q=Object(d.a)(Y,2),H=q[0],$=q[1],Q=Object(a.useState)([]),Z=Object(d.a)(Q,2),te=Z[0],ne=Z[1],ae=Object(a.useState)([]),re=Object(d.a)(ae,2),se=re[0],ie=re[1],oe=Object(a.useState)(null),me=Object(d.a)(oe,2),de=me[0],fe=me[1];function he(e){return ve.apply(this,arguments)}function ve(){return(ve=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.next=3,_(t);case 3:return n=e.sent,P(n),R(!1),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(){T&&T.close(),P(null),R(!1),g(null)}if(n||(n={set:function(e){s(Object(m.a)(Object(m.a)({},n),e))}},s(n)),b||(b=new ye,g(b)),T&&(je&&T.removeListener("data",je),je=function(e){e.msg&&b.update(e.msg),g(null),e.resetPlayer||g(b)},T.on("data",je)),Oe){Oe=!1;var Ee=setTimeout((function(){return pe()}),1e3);he().then((function(){return clearTimeout(Ee)})).catch((function(e){return console.error(e)}))}if(!j)return function(){return G.apply(this,arguments)}().then((function(e){return O(e)})),r.a.createElement("div",{style:{marginTop:"20vh"}},r.a.createElement("div",{style:{maxWidth:"960px",animationDuration:"1s"}},r.a.createElement("h4",{className:"text-center text-light mb-5 animate-fade-in",style:{animationDuration:"1s"}},"Loading galaxy data..."),r.a.createElement("img",{className:"d-block mx-auto animate-fade-in",style:{animationDuration:"4s"},src:"img/favicon.png",alt:"Loading..."})));var _e=b.getCurrentSystem(j),ke=j.setRelativeSystem(j.getSystem(parseInt(A)?null:A)||_e||"Sol");J=J||(_e?"nearby":"settings");var we=["Music","FSSSignalDiscovered"];function Ne(e){return!we.includes(e.event)}function Ce(e){e?V("search"):e="",$(e),ne(j.search(e)),fe(null)}var xe=null;return r.a.createElement(D.Provider,{value:n},r.a.createElement(N.Provider,{value:{selected:de,setSelected:fe,ancestors:[]}},r.a.createElement(x.Provider,{value:{filter:function(e){return!0},favorites:se,addFavorite:function(e){e._type&&ie([e].concat(Object(l.a)(se.filter((function(t){return t!==e})))))},removeFavorite:function(e){ie(se.filter((function(t){return t!==e})))}}},r.a.createElement(w.Provider,{value:j},r.a.createElement(C.Provider,{value:{text:H,isRelevant:function(e){return j._isSearchRelevant(H,e)}}},r.a.createElement("div",{className:"p-2"},r.a.createElement("div",null,b.name&&r.a.createElement("h6",{className:"text-primary float-right mt-1"},"CMDR ",b.name),r.a.createElement("h5",{className:"text-"+(ke.name.toLowerCase()===A.toLowerCase()?"success":_e?_e&&ke.name.toLowerCase()!==_e.name.toLowerCase()?"danger":"info":"light")},ke.name)),r.a.createElement(f.a,{size:"lg",className:"mb-2"},r.a.createElement("input",{type:"text",className:"form-control",value:H,placeholder:"Search...",ref:function(e){return xe=e},onChange:function(e){return Ce(e.target.value)}})),r.a.createElement(y.a,{activeKey:J,onSelect:function(e){V(e),fe(null),"search"===e&&xe&&("search"===J&&xe.value?(xe.value="",Ce()):xe.select(),xe.focus())}},r.a.createElement(h.a,{eventKey:"search",title:r.a.createElement(ge.c,{className:"h4 mt-1"})},"search"===J&&(H?r.a.createElement(X,{items:te,size:20,render:function(e,t){return r.a.createElement(le,{key:t,result:e})}}):r.a.createElement(r.a.Fragment,null,r.a.createElement(X,{items:se,size:10,render:function(e,t){return r.a.createElement(le,{key:t,result:e})}}),r.a.createElement(X,{items:j.getNearestSystems((function(){return function(e){return!se.includes(e)}}),80),size:10,render:function(e,t){return r.a.createElement(le,{key:t,result:e})}})))),r.a.createElement(h.a,{eventKey:"nearby",title:r.a.createElement(ge.a,{className:"h4 mt-1"})},"nearby"===J&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mt-2"},r.a.createElement(Se,{name:"Nearby stations",detail:function(){return r.a.createElement(X,{items:j.getNearestStations(),size:3,render:function(e,t){return r.a.createElement(le,{key:t,result:e})}})}}),r.a.createElement(Se,{name:"Pristine rings",detail:function(){return r.a.createElement(r.a.Fragment,null,j.ringTypes.map((function(e,t){return r.a.createElement(Se,{key:t,name:e,detail:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(X,{items:j.getNearestRingBodies(e).filter((function(e){return n.allResourceTypes||"Pristine"===e.system.reserveType})),size:2,render:function(e,t){return r.a.createElement(ce,{key:t,body:e})}}))}})})))}}),r.a.createElement(Se,{name:"Services",detail:function(){return["Interstellar Factors","Black Market","Technology Broker"].map((function(e,t){return r.a.createElement(Se,{key:t,name:Object(p.a)(e),detail:function(){return r.a.createElement(X,{items:j.getNearestStations((function(t){return t.services.includes(e)})),size:2,render:function(e,t){return r.a.createElement(ee,{key:t,station:e})}})}})}))}}),r.a.createElement(C.Provider,{value:{isRelevant:function(e){return"Terraformable"===e}}},r.a.createElement(X,{items:function(){var e=b.journal.filter((function(e){return(e.TerraformState||"Earthlike body"===e.PlanetClass||"Water world"===e.PlanetClass||"Ammonia world"===e.PlanetClass)&&e.StarSystem===ke.name})).sort((function(e,t){return e.BodyName.localeCompare(t.BodyName)}));return e.filter((function(t,n){return e.slice(n+1).every((function(e){return t.BodyName!==e.BodyName}))}))}(),size:10,render:function(e,t){return r.a.createElement(be,{key:"".concat(e.timestamp).concat(t),internal:!0,entry:e})}}))))),r.a.createElement(h.a,{eventKey:"settings",title:r.a.createElement(ge.b,{className:"h4 mt-1"})},"settings"===J&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"p-2"},r.a.createElement("div",{className:"p-2"},r.a.createElement("h5",{className:"text-"+(A?ke.name.toLowerCase()===A.toLowerCase()?"success":"danger":"light")},"Current system:"),r.a.createElement(f.a,{size:"md",className:"my-1",style:{opacity:.8}},r.a.createElement("input",{type:"text",className:"form-control",value:A,placeholder:"Choose populated system...",onFocus:function(e){return e.target.select()},onChange:function(e){return Ce(null)&W(e.target.value)}})),r.a.createElement(ue,{system:ke})),T?_e&&r.a.createElement("h5",{className:"text-muted mb-2 mt-3 ml-2"},"Connected to local network"):r.a.createElement(v.a,{size:"lg",variant:"outline-"+(T?"light":M?"warning":"info"),className:"w-100 py-2 my-3",style:{opacity:T&&.5},onClick:function(){return T?pe():(pe(),void he().catch((function(e){return console.error(e)})))}},M?"Connecting...":"Connect"),_e?r.a.createElement(r.a.Fragment,null,r.a.createElement(Se,{name:"Recent actions",detail:function(){return r.a.createElement(X,{items:b.journal.filter(Ne),size:5,render:function(e,t){return r.a.createElement(be,{key:"".concat(e.timestamp).concat(t),entry:e})}})}}),r.a.createElement(Se,{name:"First discoveries",detail:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Se,{name:"Everything",detail:function(){return r.a.createElement(X,{items:b.discoveries,size:10,render:function(e,t){return r.a.createElement(be,{key:"".concat(e.timestamp).concat(t),internal:!0,entry:e})}})}}),r.a.createElement(Se,{name:"Terraformable",detail:function(){return r.a.createElement(X,{items:b.discoveries.filter((function(e){return e.TerraformState})),size:10,render:function(e,t){return r.a.createElement(be,{key:"".concat(e.timestamp).concat(t),internal:!0,entry:e})}})}}),r.a.createElement(Se,{name:"Earthlike",detail:function(){return r.a.createElement(X,{items:b.discoveries.filter((function(e){return"Earthlike body"===e.PlanetClass})),size:10,render:function(e,t){return r.a.createElement(be,{key:"".concat(e.timestamp).concat(t),internal:!0,entry:e})}})}}))}})):r.a.createElement("a",{href:"data/elite-navigator.exe",target:"_blank"},r.a.createElement(v.a,{variant:"outline-light",className:"w-100 py-2 my-2",style:{opacity:.7},onClick:function(){return he("localhost")}},"Download location sync"))))))))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(_e,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},86:function(e,t,n){e.exports=n(149)},94:function(e,t,n){},96:function(e,t,n){}},[[86,1,2]]]);
//# sourceMappingURL=main.7af82c57.chunk.js.map