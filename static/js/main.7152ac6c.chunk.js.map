{"version":3,"sources":["services/connection-service.js","components/Contexts.js","services/galaxy-service.js","components/Attributes.js","components/item/Item.js","components/ExpandableList.js","components/item/Station.js","components/SettingToggle.js","components/item/Ship.js","components/item/Module.js","components/item/Body.js","components/SearchResult.js","components/item/StarSystem.js","components/item/SignalSource.js","components/item/JournalEntry.js","services/player-service.js","components/item/Category.js","components/App.js","serviceWorker.js","index.js"],"names":["currentConnection","pendingAddress","pendingPromise","tryConnect","address","a","replace","includes","close","console","log","Promise","resolve","reject","connection","io","connect","on","document","addEventListener","visibilityListener","visibilityState","connected","removeEventListener","err","GalaxyContext","React","createContext","SelectContext","SearchContext","FilterContext","SettingsContext","cache","setupCache","maxAge","api","axios","create","adapter","Galaxy","data","this","ships","modules","systems","stations","bodies","assert","Object","keys","every","k","hasOwnProperty","materialTypes","ringTypes","searchOptions","_relativeSystem","_sortedSystems","_sortedStations","_sortedBodies","text","Set","toString","toLowerCase","split","map","s","trim","filter","sort","type","option","_type","_searchTerms","name","values","attributes","v","flatMap","_getSearchTerms","push","dict","key","ship","_resolve","module","system","station","Array","isArray","getSystem","body","b","dx","x","dy","y","dz","z","Math","round","sqrt","forEach","updateDistance","d","_distanceModifier","_currentDistance","_children","c","getDistanceBetweenSystems","filterFn","count","results","arguments","length","Number","POSITIVE_INFINITY","slice","rings","ring","query","queryTerms","textTerms","some","q","t","startsWith","matches","opt","terms","minTermLen","opts","optsLen","termsLen","i","hasAllTerms","j","term","termLen","optTerms","optTermsLen","foundTerm","optTerm","substring","getShipAttributes","getModuleAttributes","groupName","class","rating","category","mode","getSystemAttributes","allegiance","power","powerState","states","join","reserveType","population","getStationAttributes","Type","economies","services","prepareData","items","item","ref","value","entries","$resolve","loadGalaxy","get","galaxy","defineProperty","_registerSearch","starDistance","currentGalaxyPromise","Attributes","props","hideKeys","className","toLocaleString","Item","handle","variant","icon","sub","below","detail","children","useState","isSelected","setSelected","detailSelected","setDetailSelected","filterContext","useContext","selectContext","searchContext","ancestors","selected","relevantAttributes","isRelevant","isFavorite","favorites","borderStyle","style","background","borderLeft","borderTop","borderRight","borderBottom","onSwipedLeft","removeFavorite","onSwipedRight","addFavorite","opacity","onClick","e","stopPropagation","position","top","marginTop","whiteSpace","subSelectContext","Provider","renderDetail","ExpandableList","size","ignoreFilter","ignoreSort","render","maxItems","setMaxItems","Station","getStation","Icon","planetary","GiPlanetCore","GiDefenseSatellite","StarSystem","SettingToggle","setting","label","inverted","onToggle","settings","Form","Group","set","Check","readOnly","checked","Ship","getShip","pilot","nearbyStations","getNearestStations","onlyDiscounts","SearchResult","result","Module","getModule","Body","getBody","BsBrightnessLow","GiVibratingBall","resultMap","renderFn","error","Error","permitRequired","SignalSource","signalSource","capitalCase","threat","JournalEntry","entry","internal","setItem","cached","obj","sentenceCase","event","SystemName","internalComponent","StationName","BodyName","id","BodyID","PlanetClass","StarType","Subclass","Luminosity","MassEM","Atmosphere","Volcanism","Landable","TerraformState","wasDiscovered","Ship_Localised","PilotName_Localised","Commander","USSType_Localised","USSThreat","From_Localised","Message_Localised","timestamp","getUTCHours","padStart","getUTCMinutes","currentSystemEvents","Player","journal","discoveries","_currentSystem","journalEntries","Date","getTime","index","findIndex","uid","unshift","WasDiscovered","WasMapped","other","commanderEntry","getLatest","Name","StarPos","Population","Category","messageListener","allowAutoConnect","App","setSettings","player","setPlayer","setGalaxy","setConnection","reconnecting","setReconnecting","customSystemName","setCustomSystemName","undefined","currentTab","setCurrentTab","searchQuery","setSearchQuery","searchResults","setSearchResults","setFavorites","disconnect","changes","removeListener","update","storedAddress","localStorage","timeout","setTimeout","then","clearTimeout","catch","findGalaxy","maxWidth","animationDuration","src","alt","playerSystem","getCurrentSystem","relativeSystem","setRelativeSystem","parseInt","hideEvents","isEntryVisible","doSearch","searchText","search","searchBarElem","_isSearchRelevant","InputGroup","placeholder","elem","onChange","target","Tabs","activeKey","onSelect","tab","select","focus","Tab","eventKey","title","getNearestSystems","getNearestRingBodies","allResourceTypes","localeCompare","onFocus","Button","bootbox","prompt","uri","callback","href","Boolean","window","location","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.7152ac6c.chunk.js","sourcesContent":["import io from 'socket.io-client';\r\n\r\nconst defaultHost = '127.0.0.1';\r\nconst defaultPort = 4777;\r\n\r\nlet currentConnection = null;\r\nlet pendingAddress = null;\r\nlet pendingPromise = null;\r\n\r\n// export function getCurrentConnection() {\r\n//     return currentConnection;\r\n// }\r\n\r\nexport async function tryConnect(address) {\r\n    address = address.replace('ws://', '');\r\n    if(!address) {\r\n        address = defaultHost;\r\n    }\r\n    if(!address.includes(':')) {\r\n        address += ':' + defaultPort;\r\n    }\r\n    address = 'ws://' + address;\r\n    if(address === pendingAddress && pendingPromise) {\r\n        return pendingPromise;\r\n    }\r\n    if(currentConnection) {\r\n        currentConnection.close();\r\n    }\r\n    console.log('Connecting to', address);\r\n    currentConnection = null;\r\n    pendingAddress = address;\r\n    pendingPromise = new Promise((resolve, reject) => {\r\n        let connection = io.connect(address);\r\n        currentConnection = connection;\r\n\r\n        connection.on('connect', () => {\r\n            console.log('Connected');\r\n\r\n            let visibilityListener = () => {\r\n                if(connection !== currentConnection) {\r\n                    document.removeEventListener('visibilitychange', visibilityListener);\r\n                    return;\r\n                }\r\n                if(document.visibilityState === 'visible' && !connection.connected) {\r\n                    connection.connect();\r\n                }\r\n            };\r\n            document.addEventListener('visibilitychange', visibilityListener);\r\n\r\n            pendingAddress = pendingPromise = null;\r\n            resolve(connection);\r\n        });\r\n\r\n        connection.on('error', err => {\r\n            pendingAddress = pendingPromise = null;\r\n            reject(err);\r\n        });\r\n\r\n        connection.on('disconnect', () => {\r\n            console.log('Disconnected');\r\n        });\r\n    });\r\n    return pendingPromise;\r\n}","import React from 'react';\r\n\r\nexport const GalaxyContext = React.createContext(null);\r\n\r\nexport const SelectContext = React.createContext(null);\r\n\r\nexport const SearchContext = React.createContext(null);\r\n\r\nexport const FilterContext = React.createContext(null);\r\n\r\nexport const SettingsContext = React.createContext(null);\r\n","import axios from 'axios';\r\nimport {setupCache} from 'axios-cache-adapter';\r\n\r\nconst cache = setupCache({\r\n    maxAge: 1000 * 60 * 4,\r\n});\r\n\r\nconst api = axios.create({\r\n    adapter: cache.adapter,\r\n});\r\n\r\nconst starDistanceFactor = 1e-4;\r\n\r\nclass Galaxy {\r\n    constructor(data) {\r\n        this.ships = data.ships;\r\n        this.modules = data.modules;\r\n        this.systems = data.systems;\r\n        this.stations = data.stations;\r\n        this.bodies = data.bodies;\r\n        \r\n        console.assert(Object.keys(data).every(k => this.hasOwnProperty(k)));\r\n        \r\n        this.materialTypes = ['Raw', 'Manufactured', 'Encoded'];\r\n        this.ringTypes = ['Rocky', 'Icy', 'Metallic', 'Metal Rich'];\r\n        \r\n        this.searchOptions = [];\r\n        \r\n        this._relativeSystem = null;\r\n        this._sortedSystems = [];\r\n        this._sortedStations = [];\r\n        this._sortedBodies = [];\r\n    }\r\n    \r\n    _getSearchTerms(text) {\r\n        if(!text) {\r\n            return [];\r\n        }\r\n        return [...new Set(text.toString().toLowerCase().replace(/[^a-z0-9 ]/, ' ').split(' ').map(s => s.trim()).filter(s => !!s))].sort();\r\n    }\r\n    \r\n    _registerSearch(type, option) {\r\n        option._type = type;\r\n        option._searchTerms = [\r\n            ...new Set([option.name, ...Object.values(option.attributes).filter(v => typeof v === 'string')]\r\n                .filter(s => !!s)\r\n                .flatMap(s => this._getSearchTerms(s))\r\n                .map(s => s.trim())\r\n                .filter(s => s))\r\n        ].sort();\r\n        this.searchOptions.push(option);\r\n        return option;\r\n    }\r\n    \r\n    _resolve(dict, key) {\r\n        return (typeof key === 'string' ? dict[key.toLowerCase()] : typeof key === 'number' ? dict[key] : key) || null;\r\n    }\r\n    \r\n    getShip(ship) {\r\n        return this._resolve(this.ships, ship);\r\n    }\r\n    \r\n    getModule(module) {\r\n        return this._resolve(this.modules, module);\r\n    }\r\n    \r\n    getSystem(system) {\r\n        return this._resolve(this.systems, system);\r\n    }\r\n    \r\n    getStation(station) {\r\n        if(Array.isArray(station)) {\r\n            let system = this.getSystem(station[0]);\r\n            return (system && system.stations[station[1]]) || null;\r\n        }\r\n        return this._resolve(this.stations, station);\r\n    }\r\n    \r\n    getBody(body) {\r\n        return this._resolve(this.bodies, body);\r\n    }\r\n    \r\n    getDistanceBetweenSystems(a, b) {\r\n        let [dx, dy, dz] = [a.x - b.x, a.y - b.y, a.z - b.z];\r\n        return Math.round(Math.sqrt(dx ** 2 + dy ** 2 + dz ** 2));\r\n    }\r\n    \r\n    getRelativeSystem() {\r\n        return this._relativeSystem;\r\n    }\r\n    \r\n    setRelativeSystem(system) {\r\n        system = this.getSystem(system);\r\n        if(this._relativeSystem === system) {\r\n            return system;\r\n        }\r\n        this._relativeSystem = system;\r\n        let updateDistance = (d, s) => {\r\n            d *= 1 + (s._distanceModifier || 0);\r\n            // if(s.name === 'Sol') {\r\n            //     console.log(d, s._currentDistance, s._distanceModifier || 0);///////////////////////\r\n            // }\r\n            s._currentDistance = d;\r\n            if(s._children) {\r\n                s._children.forEach(c => updateDistance(d, c));\r\n            }\r\n        };\r\n        this._sortedSystems.forEach(s => updateDistance(system ? this.getDistanceBetweenSystems(system, s) : 0, s));\r\n        this._sortedSystems.sort((a, b) => system ? a._currentDistance - b._currentDistance : a.name - b.name);\r\n        \r\n        this._sortedStations.sort((a, b) => system ? a._currentDistance - b._currentDistance : a.name - b.name);\r\n        \r\n        this._sortedBodies.sort((a, b) => system ? a._currentDistance - b._currentDistance : a.name - b.name);\r\n        return system;\r\n    }\r\n    \r\n    getNearestSystems(filterFn, count) {\r\n        let results = [];\r\n        if(arguments.length < 2) {\r\n            count = Number.POSITIVE_INFINITY;\r\n        }\r\n        else if(count <= 0) {\r\n            return results;\r\n        }\r\n        if(!filterFn) {\r\n            return this._sortedSystems.slice(0, count);\r\n        }\r\n        for(let system of this._sortedSystems) {\r\n            if(filterFn(system)) {\r\n                results.push(system);\r\n                if(results.length >= count) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return results;\r\n    }\r\n    \r\n    getNearestStations(filterFn, count) {\r\n        let results = [];\r\n        if(arguments.length < 2) {\r\n            count = Number.POSITIVE_INFINITY;\r\n        }\r\n        else if(count <= 0) {\r\n            return results;\r\n        }\r\n        if(!filterFn) {\r\n            return this._sortedStations.slice(0, count);\r\n        }\r\n        for(let station of this._sortedStations) {\r\n            if(filterFn(station)) {\r\n                results.push(station);\r\n                if(results.length >= count) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return results;\r\n    }\r\n    \r\n    getNearestRingBodies(type, count) {\r\n        let results = [];\r\n        if(count <= 0) {\r\n            return results;\r\n        }\r\n        for(let body of this._sortedBodies) {\r\n            if(body.rings) {\r\n                for(let ring of body.rings) {\r\n                    if(!type || ring.type === type) {\r\n                        results.push(body);\r\n                        break;\r\n                    }\r\n                }\r\n                if(results.length >= count) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return results;\r\n    }\r\n    \r\n    _isSearchRelevant(query, text) {\r\n        if(!query || !text) {\r\n            return !!query;\r\n        }\r\n        let queryTerms = this._getSearchTerms(query);\r\n        let textTerms = this._getSearchTerms(text);\r\n        return queryTerms.some(q => textTerms.some(t => t.startsWith(q)));\r\n    }\r\n    \r\n    search(query) {\r\n        if(!query.trim()) {\r\n            return [];\r\n        }\r\n        let matches = this.searchOptions.filter(opt => opt.name && opt.name.toLowerCase() === query);\r\n        let results = [];\r\n        let terms = this._getSearchTerms(query);\r\n        if(!terms.length) {\r\n            return results;\r\n        }\r\n        \r\n        let minTermLen = 3 - terms.length;\r\n        let opts = this.searchOptions;\r\n        let optsLen = opts.length;\r\n        let termsLen = terms.length;\r\n        for(let i = 0; i < optsLen; i++) {\r\n            let opt = opts[i];\r\n            let hasAllTerms = true;\r\n            for(let j = 0; j < termsLen; j++) {\r\n                let term = terms[j];\r\n                let termLen = term.length;\r\n                if(termLen < minTermLen) {\r\n                    termLen = minTermLen;\r\n                }\r\n                \r\n                let optTerms = opt._searchTerms;\r\n                let optTermsLen = optTerms.length;\r\n                \r\n                let foundTerm = false;\r\n                for(let k = 0; k < optTermsLen; k++) {\r\n                    let optTerm = optTerms[k].substring(0, termLen);\r\n                    if(optTerm === term) {\r\n                        foundTerm = true;\r\n                    }\r\n                    if(optTerm >= term) {\r\n                        break;\r\n                    }\r\n                }\r\n                if(!foundTerm) {\r\n                    hasAllTerms = false;\r\n                    break;\r\n                }\r\n            }\r\n            if(hasAllTerms && !matches.includes(opt)) {\r\n                results.push(opt);\r\n            }\r\n        }\r\n        \r\n        results.sort((a, b) => (a._currentDistance || 0) - (b._currentDistance || 0));\r\n        return [...matches, ...results];\r\n    }\r\n}\r\n\r\nfunction getShipAttributes() {\r\n    return {\r\n    };\r\n}\r\n\r\nfunction getModuleAttributes() {\r\n    return {\r\n        'Group': this.groupName,\r\n        'Class': `${this.class}${this.rating}`,\r\n        'Ship': this.ship && this.ship.name,\r\n        'Category': this.category,\r\n        'Mode': this.mode,\r\n    };\r\n}\r\n\r\nfunction getSystemAttributes() {\r\n    return {\r\n        'Allegiance': this.allegiance,\r\n        'Power': this.power,\r\n        // 'Minor faction': this.faction,\r\n        'Power state': this.powerState,\r\n        'System state': this.states.join(', '),\r\n        'Resources': this.reserveType,\r\n        'Habitation': this.population ? 'Populated' : 'Unpopulated',\r\n        'Population': this.population,\r\n    };\r\n}\r\n\r\nfunction getStationAttributes() {\r\n    return {\r\n        'Type': this.Type,\r\n        'Economy': this.economies.join(', '),\r\n        'Services': this.services.join(', '),\r\n    };\r\n}\r\n\r\nfunction prepareData(data) {\r\n    for(let items of Object.values(data)) {\r\n        for(let item of Object.values(items)) {\r\n            for(let [key, ref] of Object.entries(item.$resolve)) {\r\n                let value = item[key];\r\n                if(Array.isArray(value)) {\r\n                    item[key] = value.map(v => data[ref][v]);\r\n                }\r\n                else {\r\n                    item[key] = data[ref][value];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return data;\r\n}\r\n\r\nexport async function loadGalaxy() {\r\n    console.log('Loading galaxy...');\r\n    \r\n    let data = prepareData((await api.get('data/galaxy.json')).data);\r\n    \r\n    let galaxy = new Galaxy(data);\r\n    \r\n    for(let ship of Object.values(galaxy.ships)) {\r\n        // ship._type = 'ship';////\r\n    \r\n        Object.defineProperty(ship, 'attributes', {get: getShipAttributes});\r\n        \r\n        galaxy._registerSearch('ship', ship);\r\n    }\r\n    for(let module of Object.values(galaxy.modules)) {\r\n        Object.defineProperty(module, 'attributes', {get: getModuleAttributes});\r\n        \r\n        galaxy._registerSearch('module', module);\r\n    }\r\n    for(let system of Object.values(galaxy.systems)) {\r\n        Object.defineProperty(system, 'attributes', {get: getSystemAttributes});\r\n        \r\n        galaxy.systems[system.name.toLowerCase()] = system;////\r\n        galaxy._sortedSystems.push(system);\r\n        \r\n        system.stations.sort((a, b) => a.starDistance - b.starDistance);///\r\n        system.bodies.sort((a, b) => a.starDistance - b.starDistance);///\r\n        \r\n        system._children = [...system.stations, ...system.bodies]\r\n            .sort((a, b) => a.starDistance - b.starDistance);///\r\n        \r\n        galaxy._registerSearch('system', system);\r\n    }\r\n    for(let station of Object.values(galaxy.stations)) {\r\n        Object.defineProperty(station, 'attributes', {get: getStationAttributes});\r\n        \r\n        galaxy._sortedStations.push(station);\r\n        \r\n        station._distanceModifier = station.starDistance * starDistanceFactor;\r\n        \r\n        galaxy._registerSearch('station', station);\r\n    }\r\n    for(let body of Object.values(data.bodies)) {\r\n        body._type = 'body'; ////////\r\n        \r\n        galaxy._sortedBodies.push(body);\r\n        \r\n        body._distanceModifier = body.starDistance * starDistanceFactor;\r\n    }\r\n    return galaxy;\r\n}\r\n\r\nlet currentGalaxyPromise = null;\r\n\r\nexport async function findGalaxy() {\r\n    if(!currentGalaxyPromise) {\r\n        currentGalaxyPromise = loadGalaxy();\r\n    }\r\n    return currentGalaxyPromise;\r\n}\r\n","import React from 'react';\r\n\r\nexport default function Attributes(props) {\r\n    let {attributes, hideKeys} = props;\r\n    \r\n    if(!attributes) {\r\n        return null;\r\n    }\r\n    \r\n    return (<>\r\n        {Object.entries(attributes).filter(([, v]) => v).map(([k, v]) => (\r\n            <div key={k}>\r\n                {!hideKeys && k !== v && (\r\n                    <small className=\"text-secondary\">{k}:</small>\r\n                )}\r\n                <small className=\"text-muted d-inline-block\">{typeof v === 'number' ? v.toLocaleString() : v}</small>\r\n            </div>\r\n        ))}\r\n    </>);\r\n};\r\n","import React, {useContext, useState} from 'react';\r\nimport {FilterContext, SearchContext, SelectContext} from '../Contexts';\r\nimport Attributes from '../Attributes';\r\nimport {Swipeable} from 'react-swipeable';\r\n\r\nexport default function Item(props) {\r\n    let {handle, variant, icon, name, sub, below, detail, children} = props;\r\n    \r\n    let [isSelected, setSelected] = useState(false);\r\n    let [detailSelected, setDetailSelected] = useState(null);\r\n    \r\n    let filterContext = useContext(FilterContext);\r\n    let selectContext = useContext(SelectContext);\r\n    let searchContext = useContext(SearchContext);\r\n    \r\n    handle = handle || `${variant}${name}${sub}`;/////\r\n    if(!name) {\r\n        name = handle.name;\r\n    }\r\n    \r\n    if(selectContext.ancestors.includes(handle)) {\r\n        return null;\r\n    }\r\n    \r\n    if(selectContext.selected !== handle) {\r\n        isSelected = false;\r\n    }\r\n    else if(detailSelected) {\r\n        isSelected = true;\r\n    }\r\n    \r\n    if(!isSelected && selectContext.selected) {\r\n        variant = 'muted';\r\n    }\r\n    \r\n    function toggleSelected() {\r\n        setSelected(!isSelected);\r\n        selectContext.setSelected(isSelected ? null : handle);\r\n        setDetailSelected(null);///\r\n    }\r\n    \r\n    let relevantAttributes = null;\r\n    if(searchContext && handle.attributes) {\r\n        relevantAttributes = {};\r\n        Object.entries(handle.attributes).forEach(([k, v]) => {\r\n            if((!name || !name.includes(v)) && searchContext.isRelevant(v)) {\r\n                relevantAttributes[k] = v;\r\n            }\r\n        });\r\n    }\r\n    \r\n    let isFavorite = filterContext.favorites.includes(handle);/////\r\n    \r\n    function renderDetail() {\r\n        let subSelectContext = {\r\n            selected: detailSelected,\r\n            setSelected: item => setDetailSelected(item) & setSelected(true),\r\n            ancestors: [...selectContext.ancestors, handle],\r\n        };\r\n        return (\r\n            <SelectContext.Provider value={subSelectContext}>\r\n                <div className=\"p-2 pt-1\" style={{background: '#080808'}}>\r\n                    {detail && detail(subSelectContext)}\r\n                    {children}\r\n                </div>\r\n            </SelectContext.Provider>\r\n        );\r\n    }\r\n    \r\n    let borderColor = '#424345';\r\n    let favoriteColor = '#5b5ad5';\r\n    let borderStyle = 'solid 2px ' + (isFavorite ? favoriteColor : borderColor);\r\n    \r\n    return (\r\n        <div className=\"m-0 mb-1 rounded-lg\"\r\n             style={{\r\n                 background: isSelected ? '#333' : '#1A1A1A',\r\n                 borderLeft: detail ? `solid 6px ${!isSelected && selectContext.selected ? borderColor : isFavorite ? favoriteColor : '#76777A'}` : borderStyle,\r\n                 borderTop: borderStyle,\r\n                 borderRight: borderStyle,\r\n                 borderBottom: borderStyle,\r\n                 // animation: isFavorite && 'swipe-right .4s ease-out',\r\n             }}>\r\n            <Swipeable\r\n                onSwipedLeft={() => filterContext.removeFavorite(handle)}\r\n                onSwipedRight={() => filterContext.addFavorite(handle)}>\r\n                <div className=\"cursor-pointer p-2\"\r\n                     style={{\r\n                         opacity: !isSelected && selectContext.selected ? .8 : 1,/////\r\n                     }}\r\n                     onClick={selectContext && detail && (e => e.stopPropagation() & toggleSelected())}>\r\n                    <div className=\"d-flex\">\r\n                        {(icon || name) && (\r\n                            <span className={`m-0 text-${variant} flex-grow-1`}>\r\n                                {icon && (\r\n                                    <span\r\n                                        className=\"mr-2\"\r\n                                        style={{position: 'relative', top: '-2px', opacity: .9}}>\r\n                                        {icon}\r\n                                    </span>\r\n                                )}\r\n                                {name}\r\n                            </span>\r\n                        )}\r\n                        {sub && (\r\n                            <small className={`float-right text-${variant}`}\r\n                                   style={{marginTop: '2px', whiteSpace: 'nowrap', opacity: .9}}>\r\n                                {sub}\r\n                            </small>\r\n                        )}\r\n                    </div>\r\n                    {below}\r\n                    {!isSelected && relevantAttributes && (\r\n                        <Attributes hideKeys attributes={relevantAttributes}/>\r\n                    )}\r\n                </div>\r\n            </Swipeable>\r\n            {!isSelected && (<>\r\n                {children && (\r\n                    <div className=\"px-2\">\r\n                        {children}\r\n                    </div>\r\n                )}\r\n            </>)}\r\n            {isSelected && renderDetail()}\r\n        </div>\r\n    );\r\n};\r\n","import React, {useContext, useState} from 'react';\r\nimport {FilterContext} from './Contexts';\r\n\r\nexport default function ExpandableList(props) {\r\n    let {items, size, ignoreFilter, ignoreSort, render} = props;\r\n    \r\n    let [maxItems, setMaxItems] = useState(size || 1);\r\n    \r\n    let filterContext = useContext(FilterContext);\r\n    \r\n    if(!items || !items.length) {\r\n        return null;\r\n    }\r\n    \r\n    if(filterContext) {\r\n        if(!ignoreFilter) {\r\n            items = items.filter(filterContext.filter);\r\n        }\r\n        if(!ignoreSort) {\r\n            items = [...items.filter(x => filterContext.favorites.includes(x)), ...items.filter(x => !filterContext.favorites.includes(x))];\r\n        }\r\n    }\r\n    \r\n    return (\r\n        <div className=\"my-1\">\r\n            {items.slice(0, maxItems).map(render)}\r\n            {items.length > maxItems && (\r\n                <span className=\"btn btn-outline-secondary d-block mt-2\"\r\n                      onClick={() => setMaxItems(maxItems * 2)}>\r\n                    Show more\r\n                </span>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","import React, {useContext} from 'react';\r\nimport StarSystem from './StarSystem';\r\nimport {GalaxyContext} from '../Contexts';\r\nimport Item from './Item';\r\nimport {GiDefenseSatellite, GiPlanetCore} from 'react-icons/all';\r\nimport Attributes from '../Attributes';\r\n\r\nexport default function Station(props) {\r\n    let {station} = props;\r\n    \r\n    let galaxy = useContext(GalaxyContext);\r\n    \r\n    station = galaxy.getStation(station);\r\n    if(!station) {\r\n        return <Item variant=\"secondary\" name={typeof props.station === 'string' ? props.station : '(Station)'}/>;\r\n    }\r\n    \r\n    let Icon = station.planetary ? GiPlanetCore : GiDefenseSatellite;\r\n    \r\n    return (\r\n        <Item variant=\"warning\"\r\n              handle={station}\r\n              icon={<Icon/>}\r\n              sub={station.starDistance ? station.starDistance.toLocaleString() + ' Ls' : ''}\r\n              detail={() => (\r\n                  <Attributes attributes={station.attributes}/>\r\n              )}>\r\n            {station.system && (\r\n                <StarSystem system={station.system}/>\r\n            )}\r\n        </Item>\r\n    );\r\n};\r\n","import React, {useContext} from 'react';\r\nimport {SettingsContext} from './Contexts';\r\nimport {Form} from 'react-bootstrap';\r\n\r\nexport default function SettingToggle(props) {\r\n    let {setting, label, inverted, onToggle} = props;\r\n    \r\n    let settings = useContext(SettingsContext);\r\n    \r\n    function onClick(e) {\r\n        settings.set({[setting]: !settings[setting]});\r\n        if(onToggle) {\r\n            onToggle(e);\r\n        }\r\n    }\r\n    \r\n    return (\r\n        <Form>\r\n            <Form.Group className=\"my-2\" onClick={onClick}>\r\n                <Form.Check readOnly checked={!!settings[setting] === !inverted} label={label || setting}/>\r\n            </Form.Group>\r\n        </Form>\r\n    );\r\n};\r\n","import React, {useContext} from 'react';\r\nimport Item from './Item';\r\nimport {GalaxyContext, SettingsContext} from '../Contexts';\r\nimport Attributes from '../Attributes';\r\nimport ExpandableList from '../ExpandableList';\r\nimport SearchResult from '../SearchResult';\r\nimport {GiInterceptorShip} from 'react-icons/all';\r\nimport SettingToggle from '../SettingToggle';\r\n\r\nexport default function Ship(props) {\r\n    let {ship} = props;\r\n    \r\n    let galaxy = useContext(GalaxyContext);\r\n    let settings = useContext(SettingsContext);\r\n    \r\n    ship = galaxy.getShip(ship);\r\n    \r\n    function detail({setSelected}) {\r\n        // let nearbyStations = galaxy._sortedSystems.flatMap(system => system.stations.filter(station => station.ships.includes(ship)));\r\n        let nearbyStations = galaxy.getNearestStations(s => s.ships.includes(ship));\r\n        if(settings.onlyDiscounts) {\r\n            nearbyStations = nearbyStations.filter(s => s.system.power === 'Li Yong-Rui');\r\n        }\r\n        return (<>\r\n            <Attributes attributes={ship.attributes}/>\r\n            {/*<h6 className=\"text-muted\">Purchase location:</h6>*/}\r\n            <SettingToggle setting=\"onlyDiscounts\" label=\"15% discount\" onToggle={() => setSelected(null)}/>\r\n            <ExpandableList items={nearbyStations} size={2} render={(station, i) => (\r\n                <SearchResult key={i} result={station}/>\r\n            )}/>\r\n        </>);\r\n    }\r\n    \r\n    return (\r\n        <Item variant=\"danger\"\r\n              handle={ship}\r\n              icon={<GiInterceptorShip/>}\r\n              sub={ship.pilot}\r\n              detail={detail}>\r\n        </Item>\r\n    );\r\n};\r\n","import React, {useContext} from 'react';\r\nimport Item from './Item';\r\nimport {GalaxyContext, SettingsContext} from '../Contexts';\r\nimport ExpandableList from '../ExpandableList';\r\nimport SearchResult from '../SearchResult';\r\nimport Attributes from '../Attributes';\r\nimport Ship from './Ship';\r\nimport SettingToggle from '../SettingToggle';\r\n\r\nexport default function Module(props) {\r\n    let {module} = props;\r\n    \r\n    let galaxy = useContext(GalaxyContext);\r\n    let settings = useContext(SettingsContext);\r\n    \r\n    module = galaxy.getModule(module);\r\n    \r\n    function detail({setSelected}) {\r\n        // let nearbyStations = galaxy._sortedSystems.flatMap(system => system.stations.filter(station => station.modules.includes(module)));\r\n        let nearbyStations = galaxy.getNearestStations(s => s.modules.includes(module));\r\n        if(settings.onlyDiscounts) {\r\n            nearbyStations = nearbyStations.filter(s => s.system.power === 'Li Yong-Rui');\r\n        }\r\n        return (<>\r\n            {module.ship && (\r\n                <Ship ship={module.ship}/>\r\n            )}\r\n            <Attributes attributes={module.attributes}/>\r\n            {/*<h6 className=\"text-muted\">Purchase location:</h6>*/}\r\n            <SettingToggle setting=\"onlyDiscounts\" label=\"15% discount\" onToggle={() => setSelected(null)}/>\r\n            <ExpandableList items={nearbyStations} size={2} render={(station, i) => (\r\n                <SearchResult key={i} result={station}/>\r\n            )}/>\r\n        </>);\r\n    }\r\n    \r\n    return (\r\n        <Item variant=\"danger\"\r\n              handle={module}\r\n              name={`${module.class + module.rating} ${module.name}`}\r\n              sub={(module.ship && module.ship.name) || module.mode}\r\n              detail={detail}>\r\n        </Item>\r\n    );\r\n};\r\n","import React, {useContext} from 'react';\r\nimport StarSystem from './StarSystem';\r\nimport Item from './Item';\r\nimport {BsBrightnessLow, GiAsteroid, GiVibratingBall} from 'react-icons/all';\r\nimport {GalaxyContext} from '../Contexts';\r\nimport Attributes from '../Attributes';\r\n\r\nexport default function Body(props) {\r\n    let {body} = props;\r\n    \r\n    let galaxy = useContext(GalaxyContext);\r\n    \r\n    body = galaxy.getBody(body);\r\n    if(!body) {\r\n        return <Item variant=\"secondary\" name={typeof props.body === 'string' ? props.body : '(Body)'}/>;\r\n    }\r\n    \r\n    let system = galaxy.getSystem(body.system);\r\n    \r\n    let Icon = body.type && body.type.toLowerCase().includes('star') ? BsBrightnessLow : GiVibratingBall/*IoMdPlanet*/;\r\n    \r\n    return (\r\n        <Item\r\n            variant=\"success\"\r\n            handle={body}\r\n            icon={<Icon/>}\r\n            name={body.name || '(Body)'}\r\n            sub={body.starDistance ? body.starDistance.toLocaleString() + ' Ls' : ''}\r\n            below={<small className=\"text-muted\">{body.type}</small>}\r\n            detail={() => (<>\r\n                <Attributes attributes={body.attributes}/>\r\n                {body.rings && body.rings.map((ring, i) => (\r\n                    <Item\r\n                        key={i}\r\n                        variant=\"info\"\r\n                        handle={ring}\r\n                        name={ring.name}\r\n                        icon={<GiAsteroid/>}\r\n                        sub={ring.type}/>\r\n                ))}\r\n            </>)}>\r\n            {system && (\r\n                <StarSystem system={system}/>\r\n            )}\r\n        </Item>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport Station from './item/Station';\r\nimport Module from './item/Module';\r\nimport StarSystem from './item/StarSystem';\r\nimport Ship from './item/Ship';\r\nimport Body from './item/Body';\r\n\r\nconst resultMap = {\r\n    ship(result) {\r\n        return <Ship ship={result}/>;\r\n    },\r\n    module(result) {\r\n        return <Module module={result}/>;\r\n    },\r\n    system(result) {\r\n        return <StarSystem system={result}/>;\r\n    },\r\n    station(result) {\r\n        return <Station station={result}/>;\r\n    },\r\n    body(result) {\r\n        return <Body body={result}/>;\r\n    },\r\n};\r\n\r\nexport default function SearchResult(props) {\r\n    let {result} = props;\r\n    \r\n    let renderFn = resultMap[result._type];\r\n    if(!renderFn) {\r\n        console.error('[Search result]', result._type, result);\r\n        throw new Error('Unknown search result type: ' + result._type);\r\n    }\r\n    \r\n    return renderFn(result);\r\n};\r\n","import React, {useContext} from 'react';\r\nimport {GalaxyContext} from '../Contexts';\r\nimport Item from './Item';\r\nimport ExpandableList from '../ExpandableList';\r\nimport SearchResult from '../SearchResult';\r\nimport Attributes from '../Attributes';\r\nimport {BsBrightnessLow} from 'react-icons/all';\r\n\r\nexport default function StarSystem(props) {\r\n    let {system} = props;\r\n    \r\n    let galaxy = useContext(GalaxyContext);\r\n    \r\n    system = galaxy.getSystem(system);\r\n    if(!system) {\r\n        return <Item variant=\"secondary\" name={typeof props.system === 'string' ? props.system : '(System)'}/>;\r\n    }\r\n    \r\n    return (\r\n        <Item\r\n            // variant=\"info\"\r\n            handle={system}\r\n            icon={<BsBrightnessLow/>}\r\n            sub={system._currentDistance ? system._currentDistance.toLocaleString() + ' Ly' : null}\r\n            below={\r\n                system.permitRequired && (\r\n                    <small className=\"text-danger ml-2\">Permit required</small>\r\n                )}\r\n            detail={() => (<>\r\n                <Attributes attributes={system.attributes}/>\r\n                <ExpandableList items={system.stations} size={5} render={(item, i) => (\r\n                    <SearchResult key={i} result={item}/>\r\n                )}/>\r\n                {/*<ExpandableList items={system.bodies} size={5} render={(item, i) => (*/}\r\n                {/*    <SearchResult key={i} result={item}/>*/}\r\n                {/*)}/>*/}\r\n            </>)}>\r\n        </Item>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport Item from './Item';\r\nimport {capitalCase} from 'change-case';\r\n\r\nexport default function SignalSource(props) {\r\n    let {signalSource} = props;\r\n    \r\n    // let galaxy = useContext(GalaxyContext);\r\n    \r\n    return (\r\n        <Item\r\n            variant=\"muted\"\r\n            handle={signalSource}\r\n            name={`${capitalCase(signalSource.name)} (Threat ${signalSource.threat || 0})` || '(Unknown)'}>\r\n        \r\n        </Item>\r\n    );\r\n};\r\n","import React, {useState} from 'react';\r\nimport StarSystem from './StarSystem';\r\nimport {sentenceCase} from 'change-case';\r\nimport Item from './Item';\r\nimport Body from './Body';\r\nimport Ship from './Ship';\r\nimport SignalSource from './SignalSource';\r\nimport Station from './Station';\r\n\r\nexport default function JournalEntry(props) {\r\n    let {entry, internal} = props;\r\n\r\n    let [item, setItem] = useState(null);\r\n\r\n    function cached(obj) {\r\n        if(!item) {\r\n            setItem(obj);\r\n        }\r\n        return obj;\r\n    }\r\n\r\n    // let galaxy = useContext(GalaxyContext);\r\n\r\n    let name = sentenceCase(entry.event, {})\r\n        .replace('Uss', 'USS')\r\n        .replace('Fss', 'FSS')\r\n        .replace('Dss', 'DSS');\r\n\r\n    entry.StarSystem = entry.StarSystem || entry.SystemName;\r\n\r\n    let internalComponent = (<>\r\n        {entry.StarSystem && (\r\n            entry.StationName ? (\r\n                <Station station={[entry.StarSystem, entry.StationName]}/>\r\n            ) : entry.Body || entry.BodyName ? (\r\n                <Body body={cached(item || {\r\n                    _type: 'body',\r\n                    id: entry.BodyID,\r\n                    name: entry.Body || entry.BodyName,\r\n                    type: entry.PlanetClass || (entry.StarType && `${entry.StarType + entry.Subclass}-${entry.Luminosity} star`),\r\n                    system: entry.StarSystem,\r\n                    // starDistance: Math.round(entry.DistanceFromArrivalLS),\r\n                    attributes: {\r\n                        'Type': entry.PlanetClass,\r\n                        'Earth masses': entry.MassEM,\r\n                        'Atmosphere': sentenceCase(entry.Atmosphere || ''),\r\n                        'Volcanism': sentenceCase(entry.Volcanism || ''),\r\n                        'Landable': entry.Landable && 'Landable',\r\n                        'State': entry.TerraformState,\r\n                        'Discovered': !entry.wasDiscovered && 'Discovered',\r\n                    },\r\n                })}/>\r\n            ) : (\r\n                <StarSystem system={entry.StarSystem}/>\r\n            )\r\n        )}\r\n        {entry.Ship_Localised && (\r\n            <Ship ship={cached(item || {\r\n                _type: 'ship',\r\n                name: entry.Ship_Localised,\r\n                pilot: entry.PilotName_Localised || entry.Commander,\r\n            })}/>\r\n        )}\r\n        {entry.USSType_Localised && (\r\n            <SignalSource signalSource={cached(item || {\r\n                _type: 'signal',\r\n                name: entry.USSType_Localised,\r\n                threat: entry.USSThreat,\r\n            })}/>\r\n        )}\r\n    </>);\r\n\r\n    if(internal) {\r\n        return internalComponent;\r\n    }\r\n\r\n    return (\r\n        <Item variant=\"muted\"\r\n              handle={entry}\r\n              name={name}\r\n              below={(<>\r\n                  {entry.From_Localised && (\r\n                      <small className=\"text-secondary d-block\">{entry.From_Localised}:</small>\r\n                  )}\r\n                  {entry.Message_Localised && (\r\n                      <small className=\"text-muted d-block\">{entry.Message_Localised}</small>\r\n                  )}\r\n              </>)}\r\n              sub={entry.timestamp.getUTCHours().toString().padStart(2, '0') + ':' + entry.timestamp.getUTCMinutes().toString().padStart(2, '0')}>\r\n            {internalComponent}\r\n        </Item>\r\n    );\r\n};\r\n","const currentSystemEvents = ['Location', 'FSDJump', 'CarrierJump'];\r\n\r\nexport class Player {\r\n    constructor() {\r\n        this.name = null;\r\n        this.journal = [];\r\n        this.discoveries = [];\r\n        // this.timestamp = null;\r\n\r\n        // this.hasExtendedJournal = false;\r\n\r\n        this._currentSystem = null;\r\n    }\r\n\r\n    getLatest(event) {\r\n        for(let entry of this.journal) {\r\n            if(entry.event === event) {\r\n                return entry;\r\n            }\r\n        }\r\n    }\r\n\r\n    // getCurrentMaterials() {\r\n    //     let entry = this.getLatest('Materials');\r\n    //     return entry && ['Raw', 'Manufactured', 'Encoded']\r\n    //         .flatMap(type => entry[type].map(mat => [type, mat.Name, mat.Name_Localized, mat.Count]));\r\n    // }\r\n\r\n    getCurrentSystem(galaxy) {\r\n        return this._currentSystem && (galaxy.getSystem(this._currentSystem.name) || this._currentSystem);\r\n    }\r\n\r\n    update(data) {\r\n        if(data.journalEntries) {\r\n            data.journalEntries.forEach(entry => {\r\n                entry.timestamp = new Date(entry.timestamp).getTime();\r\n                let index = this.journal.findIndex(e => e.uid && e.uid === entry.uid);\r\n                if(index !== -1) {\r\n                    this.journal[index] = entry;\r\n                }\r\n                else {\r\n                    this.journal.unshift(entry);\r\n                }\r\n\r\n                if(entry.hasOwnProperty('WasDiscovered') && !entry.WasDiscovered && !entry.WasMapped) {\r\n                    index = this.discoveries.findIndex(e => e.BodyName === entry.BodyName);\r\n                    if(index !== -1) {\r\n                        let other = this.discoveries[index];\r\n                        if((entry.timestamp === other.timestamp ? entry.uid > other.uid : entry.timestamp > other.timestamp) && (entry.TerraformState || !other.TerraformState)) {\r\n                            this.discoveries[index] = entry;\r\n                        }\r\n                    }\r\n                    else {\r\n                        this.discoveries.unshift(entry);\r\n                    }\r\n                }\r\n            });\r\n            this.journal = this.journal.sort((a, b) => -(a.timestamp === b.timestamp ? a.uid - b.uid : a.timestamp - b.timestamp));\r\n\r\n            this.discoveries = this.discoveries.sort((a, b) => -(a.timestamp === b.timestamp ? a.uid - b.uid : a.timestamp - b.timestamp));//////////\r\n\r\n            // console.log(this.discoveries.filter(d=>d.TerraformState))///////\r\n\r\n            let commanderEntry = this.getLatest('Commander');\r\n            this.name = commanderEntry ? commanderEntry.Name : null;\r\n        }\r\n\r\n        // this.discoveries = this.journal.filter(entry => String(entry.WasDiscovered) === 'false');\r\n\r\n        this._currentSystem = null;\r\n        for(let entry of this.journal) {\r\n            if(currentSystemEvents.includes(entry.event)) {\r\n                this._currentSystem = {\r\n                    _type: 'system',\r\n                    name: entry.StarSystem || entry.SystemName,\r\n                    x: entry.StarPos[0],\r\n                    y: entry.StarPos[1],\r\n                    z: entry.StarPos[2],\r\n                    population: entry.Population,\r\n                    states: [],\r\n                    stations: [],\r\n                    bodies: [],\r\n                    attributes: {},\r\n                };\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\n","import React from 'react';\r\nimport Item from './Item';\r\nimport {IoMdArrowDropdown} from 'react-icons/all';\r\n\r\nexport default function Category(props) {\r\n    const {name, detail, children} = props;\r\n    \r\n    return (\r\n        <Item name={name} icon={<IoMdArrowDropdown/>} detail={detail}>\r\n            {children}\r\n        </Item>\r\n    );\r\n};\r\n","import React, {useState} from 'react';\r\n\r\nimport './App.scss';\r\nimport {Button, InputGroup, Tab, Tabs} from 'react-bootstrap';\r\nimport {sentenceCase} from 'change-case';\r\nimport {tryConnect} from '../services/connection-service';\r\nimport {FilterContext, GalaxyContext, SearchContext, SelectContext, SettingsContext} from './Contexts';\r\nimport {findGalaxy} from '../services/galaxy-service';\r\nimport bootbox from 'bootbox';\r\nimport JournalEntry from './item/JournalEntry';\r\nimport {Player} from '../services/player-service';\r\nimport {FiMapPin, FiRadio, FiSearch} from 'react-icons/all';\r\nimport SearchResult from './SearchResult';\r\nimport ExpandableList from './ExpandableList';\r\nimport StarSystem from './item/StarSystem';\r\nimport Body from './item/Body';\r\nimport Category from './item/Category';\r\nimport Station from './item/Station';\r\n\r\nlet messageListener = null;\r\n\r\nlet allowAutoConnect = true;\r\n\r\nexport default function App() {\r\n    let [settings, setSettings] = useState(null);\r\n    let [player, setPlayer] = useState(null);\r\n    let [galaxy, setGalaxy] = useState(null);\r\n    let [connection, setConnection] = useState(null);\r\n    let [reconnecting, setReconnecting] = useState(null);\r\n    let [customSystemName, setCustomSystemName] = useState('');\r\n    let [currentTab, setCurrentTab] = useState(undefined);\r\n    let [searchQuery, setSearchQuery] = useState('');\r\n    let [searchResults, setSearchResults] = useState([]);\r\n    let [favorites, setFavorites] = useState([]);\r\n    let [selected, setSelected] = useState(null);\r\n\r\n    if(!settings) {\r\n        settings = {\r\n            set(changes) {\r\n                setSettings({...settings, ...changes});\r\n            },\r\n        };\r\n        setSettings(settings);\r\n    }\r\n\r\n    if(!player) {\r\n        player = new Player();\r\n        setPlayer(player);\r\n    }\r\n\r\n    function promptConnect() {\r\n        disconnect();\r\n        bootbox.prompt({\r\n            title: 'Connect to IP address:',\r\n            value: connection ? connection.io.uri.replace('ws://', '') : localStorage['websocket'] || 'localhost',\r\n            callback: address => {\r\n                if(address) {\r\n                    localStorage['websocket'] = address || '';\r\n                    connect(address)\r\n                        .catch(err => console.error(err));\r\n                }\r\n            },\r\n        });\r\n    }\r\n\r\n    async function connect(address) {\r\n        setReconnecting(true);\r\n        let connection = await tryConnect(address);\r\n        setConnection(connection);\r\n        setReconnecting(false);\r\n        // setCurrentTab('nearby');\r\n        return connection;\r\n    }\r\n\r\n    function disconnect() {\r\n        if(connection) {\r\n            connection.close();\r\n        }\r\n        // localStorage['websocket'] = '';\r\n        setConnection(null);\r\n        setReconnecting(false);\r\n        setPlayer(null);\r\n    }\r\n\r\n    // console.log(relativeSystem || '-', galaxy, player);///\r\n\r\n    if(connection) {\r\n        connection.removeListener('message', messageListener);\r\n        messageListener = data => {\r\n            player.update(data);\r\n            setPlayer(null);////\r\n            setPlayer(player);\r\n        };\r\n        connection.on('message', messageListener);\r\n    }\r\n    // useEffect(() => {\r\n    //     if(connection) {\r\n    //         return () => connection.removeListener('message', listener);\r\n    //     }\r\n    // });\r\n\r\n    let storedAddress = localStorage['websocket'];\r\n    if(/*storedAddress && */allowAutoConnect) {\r\n        allowAutoConnect = false;\r\n        let timeout = setTimeout(() => disconnect(), 1000);\r\n        connect(storedAddress/**/ || 'localhost')\r\n            .then(() => clearTimeout(timeout))\r\n            .catch(err => console.error(err));\r\n    }\r\n\r\n    if(!galaxy) {\r\n        findGalaxy().then(galaxy => setGalaxy(galaxy));\r\n        return (\r\n            <div style={{marginTop: '20vh'}}>\r\n                <div style={{maxWidth: '960px', animationDuration: '1s'}}>\r\n                    <h4 className=\"text-center text-light mb-5 animate-fade-in\" style={{animationDuration: '1s'}}>\r\n                        Loading galaxy data...\r\n                    </h4>\r\n                    <img className=\"d-block mx-auto animate-fade-in\" style={{animationDuration: '4s'}}\r\n                         src=\"img/favicon.png\" alt=\"Loading...\"/>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    currentTab = currentTab || (connection ? 'nearby' : 'settings');///\r\n\r\n    let playerSystem = player.getCurrentSystem(galaxy);\r\n    let relativeSystem = galaxy.setRelativeSystem(galaxy.getSystem(parseInt(customSystemName) ? null : customSystemName) || playerSystem || 'Sol');\r\n\r\n    let hideEvents = ['Music', 'FSSSignalDiscovered'];\r\n\r\n    function isEntryVisible(entry) {\r\n        return !hideEvents.includes(entry.event);\r\n    }\r\n\r\n    function doSearch(searchText) {\r\n        // setCurrentTab(searchText ? 'search' : undefined);\r\n        if(searchText) {\r\n            setCurrentTab('search');\r\n        }\r\n        else {\r\n            searchText = '';\r\n        }\r\n        setSearchQuery(searchText);\r\n        setSearchResults(galaxy.search(searchText));\r\n        setSelected(null);\r\n    }\r\n\r\n    function doFilter(item) {\r\n        // return item._type !== 'station' || item.type !== 'Fleet Carrier';\r\n        return true;\r\n    }\r\n\r\n    let searchBarElem = null;\r\n\r\n    function onSelectTab(tab) {\r\n        setCurrentTab(tab);\r\n        setSelected(null);\r\n        if(tab === 'search' && searchBarElem) {\r\n            if(currentTab === 'search' && searchBarElem.value) {\r\n                searchBarElem.value = '';\r\n                // setSearchQuery('');\r\n                // setSearchResults([]);\r\n                doSearch();\r\n            }\r\n            else {\r\n                searchBarElem.select();\r\n            }\r\n            searchBarElem.focus();\r\n        }\r\n    }\r\n\r\n    function isSearchRelevant(text) {\r\n        return galaxy._isSearchRelevant(searchQuery, text);\r\n    }\r\n\r\n    function addFavorite(item) {\r\n        if(!item._type) {\r\n            return;/////\r\n        }\r\n        setFavorites([item, ...favorites.filter(x => x !== item)]);\r\n    }\r\n\r\n    function removeFavorite(item) {\r\n        setFavorites(favorites.filter(x => x !== item));\r\n    }\r\n\r\n    return (\r\n        <SettingsContext.Provider value={settings}>\r\n            <SelectContext.Provider value={{selected, setSelected, ancestors: []}}>\r\n                <FilterContext.Provider value={{filter: doFilter, favorites, addFavorite, removeFavorite}}>\r\n                    <GalaxyContext.Provider value={galaxy}>\r\n                        <SearchContext.Provider value={{text: searchQuery, isRelevant: isSearchRelevant}}>\r\n                            <div className=\"p-2\">\r\n                                <div>\r\n                                    {player.name && (\r\n                                        <h6 className=\"text-primary float-right mt-1\">CMDR {player.name}</h6>\r\n                                    )}\r\n                                    <h5 className={'text-' + (relativeSystem.name.toLowerCase() === customSystemName.toLowerCase() ? 'success' : connection ?\r\n                                        playerSystem && relativeSystem.name.toLowerCase() !== playerSystem.name.toLowerCase() ? 'danger' : 'info' : 'light')}>\r\n                                        {relativeSystem.name}\r\n                                    </h5>\r\n                                </div>\r\n                                <InputGroup size=\"lg\" className=\"mb-2\">\r\n                                    <input type=\"text\"\r\n                                           className=\"form-control\"\r\n                                           value={searchQuery}\r\n                                           placeholder={'Search...'}\r\n                                           ref={elem => searchBarElem = elem}\r\n                                        // onFocus={() => setCurrentTab('search')}\r\n                                           onChange={e => doSearch(e.target.value)}/>\r\n                                </InputGroup>\r\n                                <Tabs activeKey={currentTab}\r\n                                      onSelect={onSelectTab}>\r\n                                    <Tab eventKey=\"search\" title={<FiSearch className=\"h4 mt-1\"/>}>\r\n                                        {currentTab === 'search' && (\r\n                                            searchQuery ? (\r\n                                                <ExpandableList\r\n                                                    items={searchResults}\r\n                                                    size={20}\r\n                                                    // ignoreSort\r\n                                                    render={(result, i) => (\r\n                                                        <SearchResult key={i} result={result}/>\r\n                                                    )}/>\r\n                                            ) : (<>\r\n                                                <ExpandableList\r\n                                                    items={favorites}\r\n                                                    size={10}\r\n                                                    // ignoreSort\r\n                                                    render={(item, i) => (\r\n                                                        <SearchResult key={i} result={item}/>\r\n                                                    )}/>\r\n                                                <ExpandableList\r\n                                                    items={galaxy.getNearestSystems(() => s => !favorites.includes(s), 80)}\r\n                                                    size={10}\r\n                                                    // ignoreSort\r\n                                                    render={(item, i) => (\r\n                                                        <SearchResult key={i} result={item}/>\r\n                                                    )}/>\r\n                                            </>)\r\n                                        )}\r\n                                    </Tab>\r\n                                    <Tab eventKey=\"nearby\" title={<FiMapPin className=\"h4 mt-1\"/>}>\r\n                                        {currentTab === 'nearby' && (<>\r\n                                            <div className=\"mt-2\">\r\n                                                <Category name=\"Nearby stations\" detail={() => (\r\n                                                    <ExpandableList\r\n                                                        items={galaxy.getNearestStations()}\r\n                                                        size={3}\r\n                                                        // ignoreSort\r\n                                                        render={(station, i) => (\r\n                                                            <SearchResult key={i} result={station}/>\r\n                                                        )}/>\r\n                                                )}/>\r\n                                                <Category name=\"Pristine rings\" detail={() => (<>\r\n                                                    {/*<SettingToggle*/}\r\n                                                    {/*    setting=\"allResourceTypes\"*/}\r\n                                                    {/*    inverted*/}\r\n                                                    {/*    label=\"Pristine\"/>*/}\r\n                                                    {galaxy.ringTypes.map((type, i) => (\r\n                                                        <Category key={i} name={type} detail={() => (<>\r\n                                                            <ExpandableList\r\n                                                                items={galaxy.getNearestRingBodies(type).filter(b => settings.allResourceTypes || b.system.reserveType === 'Pristine')}\r\n                                                                size={2}\r\n                                                                // ignoreSort\r\n                                                                render={(body, i) => (\r\n                                                                    <Body key={i} body={body}/>\r\n                                                                )}/>\r\n                                                        </>)}/>\r\n                                                    ))}\r\n                                                </>)}/>\r\n                                                {/*<Category name=\"Material traders\" detail={() => (*/}\r\n                                                {/*    galaxy.materialTypes.map((type, i) => (*/}\r\n                                                {/*        <Category key={i} name={type} detail={() => (*/}\r\n                                                {/*            <ExpandableList*/}\r\n                                                {/*                items={galaxy.getNearestStations(s => s.services.includes(type + ' Material Trader'))}*/}\r\n                                                {/*                size={2}*/}\r\n                                                {/*                // ignoreSort*/}\r\n                                                {/*                render={(station, i) => (*/}\r\n                                                {/*                    <Station key={i} station={station}/>*/}\r\n                                                {/*                )}/>*/}\r\n                                                {/*        )}/>*/}\r\n                                                {/*    ))*/}\r\n                                                {/*)}/>*/}\r\n                                                <Category name=\"Services\" detail={() => (\r\n                                                    ['Interstellar Factors', 'Black Market', 'Technology Broker'].map((type, i) => (\r\n                                                        <Category key={i} name={sentenceCase(type)} detail={() => (\r\n                                                            <ExpandableList\r\n                                                                items={galaxy.getNearestStations(s => s.services.includes(type))}\r\n                                                                size={2}\r\n                                                                // ignoreSort\r\n                                                                render={(station, i) => (\r\n                                                                    <Station key={i} station={station}/>\r\n                                                                )}/>\r\n                                                        )}/>\r\n                                                    ))\r\n                                                )}/>\r\n                                                {/*******************/}\r\n                                                <SearchContext.Provider\r\n                                                    value={{isRelevant: v => v === 'Terraformable'}}>\r\n                                                    <ExpandableList\r\n                                                        items={(() => {\r\n                                                            let items = player.journal.filter(entry => (entry.TerraformState || entry.PlanetClass === 'Earthlike body' || entry.PlanetClass === 'Water world' || entry.PlanetClass === 'Ammonia world') && entry.StarSystem === relativeSystem.name).sort((a, b) => a.BodyName.localeCompare(b.BodyName));\r\n                                                            return items.filter((a, i) => items.slice(i + 1).every(b => a.BodyName !== b.BodyName));\r\n                                                        })()}\r\n                                                        size={10}\r\n                                                        render={(entry, i) => (\r\n                                                            <JournalEntry\r\n                                                                key={`${entry.timestamp}${i}`}\r\n                                                                internal\r\n                                                                entry={entry}/>\r\n                                                        )}/>\r\n                                                </SearchContext.Provider>\r\n                                            </div>\r\n                                        </>)}\r\n                                    </Tab>\r\n                                    <Tab eventKey=\"settings\" title={<FiRadio className=\"h4 mt-1\"/>}>\r\n                                        {currentTab === 'settings' && (<>\r\n                                            <div className=\"p-2\">\r\n                                                <div className=\"p-2\">\r\n                                                    <h5 className={'text-' + (customSystemName ? relativeSystem.name.toLowerCase() === customSystemName.toLowerCase() ? 'success' : 'danger' : 'light')}>\r\n                                                        Current system:\r\n                                                    </h5>\r\n                                                    <InputGroup size=\"md\" className=\"my-1\" style={{opacity: .8}}>\r\n                                                        <input type=\"text\"\r\n                                                               className=\"form-control\"\r\n                                                               value={customSystemName}\r\n                                                               placeholder=\"Choose populated system...\"\r\n                                                               onFocus={e => e.target.select()}\r\n                                                               onChange={e => doSearch(null) & setCustomSystemName(e.target.value)}/>\r\n                                                    </InputGroup>\r\n                                                    <StarSystem system={relativeSystem}/>\r\n                                                </div>\r\n                                                <Button\r\n                                                    size=\"lg\"\r\n                                                    variant={'outline-' + (connection ? 'light' : reconnecting ? 'warning' : 'info')}\r\n                                                    className=\"w-100 py-2 my-3\"\r\n                                                    style={{opacity: connection && .5}}\r\n                                                    onClick={() => connection ? disconnect() : promptConnect()}>\r\n                                                    {connection ? 'Connected' : reconnecting ? 'Connecting...' : 'Connect'}\r\n                                                </Button>\r\n                                                {!connection ? (\r\n                                                    <a href=\"data/elite-navigator.exe\" target=\"_blank\">\r\n                                                        <Button\r\n                                                            variant=\"outline-light\"\r\n                                                            className=\"w-100 py-2 my-2\"\r\n                                                            style={{opacity: .7}}\r\n                                                            onClick={() => connect('localhost')}>\r\n                                                            Download location sync\r\n                                                        </Button>\r\n                                                    </a>\r\n                                                ) : (<>\r\n                                                    <Category name=\"Recent actions\" detail={() => (\r\n                                                        <ExpandableList\r\n                                                            items={player.journal.filter(isEntryVisible)}\r\n                                                            size={5}\r\n                                                            render={(entry, i) => (\r\n                                                                <JournalEntry key={`${entry.timestamp}${i}`}\r\n                                                                              entry={entry}/>\r\n                                                            )}/>\r\n                                                    )}/>\r\n                                                    <Category name=\"First discoveries\" detail={() => (<>\r\n                                                        <Category name=\"Everything\" detail={() => (\r\n                                                            <ExpandableList\r\n                                                                items={player.discoveries}\r\n                                                                size={10}\r\n                                                                render={(entry, i) => (\r\n                                                                    <JournalEntry\r\n                                                                        key={`${entry.timestamp}${i}`}\r\n                                                                        internal\r\n                                                                        entry={entry}/>\r\n                                                                )}/>\r\n                                                        )}/>\r\n                                                        <Category name=\"Terraformable\" detail={() => (\r\n                                                            <ExpandableList\r\n                                                                items={player.discoveries.filter(entry => entry.TerraformState)}\r\n                                                                size={10}\r\n                                                                render={(entry, i) => (\r\n                                                                    <JournalEntry\r\n                                                                        key={`${entry.timestamp}${i}`}\r\n                                                                        internal\r\n                                                                        entry={entry}/>\r\n                                                                )}/>\r\n                                                        )}/>\r\n                                                        <Category name=\"Earthlike\" detail={() => (\r\n                                                            <ExpandableList\r\n                                                                items={player.discoveries.filter(entry => entry.PlanetClass === 'Earthlike body')}\r\n                                                                size={10}\r\n                                                                render={(entry, i) => (\r\n                                                                    <JournalEntry\r\n                                                                        key={`${entry.timestamp}${i}`}\r\n                                                                        internal\r\n                                                                        entry={entry}/>\r\n                                                                )}/>\r\n                                                        )}/>\r\n                                                    </>)}/>\r\n                                                </>)}\r\n                                            </div>\r\n                                        </>)}\r\n                                    </Tab>\r\n                                </Tabs>\r\n                            </div>\r\n                        </SearchContext.Provider>\r\n                    </GalaxyContext.Provider>\r\n                </FilterContext.Provider>\r\n            </SelectContext.Provider>\r\n        </SettingsContext.Provider>\r\n    );\r\n};\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'bootstrap';\r\nimport './style/index.scss';\r\nimport App from './components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App/>, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}