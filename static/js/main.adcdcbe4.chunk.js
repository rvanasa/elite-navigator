(this["webpackJsonpelite-navigator-web"]=this["webpackJsonpelite-navigator-web"]||[]).push([[0],{127:function(e,t){},158:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(21),i=n.n(s),c=(n(95),n(98),n(11)),o=n.n(c),l=n(8),u=n(14),m=n(16),d=n(6),f=(n(54),n(165)),y=n(170),v=n(166),h=n(168),p=n(163),g=n(78),b=n.n(g),E=n(79),S="https://elite-navigator.herokuapp.com",j=null,O=null;function k(e){return _.apply(this,arguments)}function _(){return(_=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t||"elite-navigator",j&&j.close(),j=null,O=new Promise((function(e,n){var a=new E.EventEmitter,r=b.a.connect(S);j=r;var s=new Set;r.on("connect",(function(){console.log("Connected"),r.emit("join",t,"webapp");document.addEventListener("visibilitychange",(function e(){r===j?"visible"!==document.visibilityState||r.connected||r.connect():document.removeEventListener("visibilitychange",e)})),e(a)})),r.on("join",(function(e,t){console.log("Joined:",t,e),a.emit("msg",{joinedAsRole:t},e),"uplink"===t&&s.add(e)})),r.on("leave",(function(e){console.log("Left:",e),s.has(e)&&(s.delete(e),s.size||a.emit("msg",{uplinkDisconnected:!0}))})),r.on("msg",(function(e,t,n){console.log("Received:",n,t,e),a.emit("msg",e,t,n)})),r.on("error",(function(e){console.error(e),n(e)})),r.on("disconnect",(function(){console.log("Disconnected"),a.emit("msg",{uplinkDisconnected:!0})})),a.on("msg",(function(e,t,n){r.emit("msg",e,t,n)}))})),e.abrupt("return",O);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=r.a.createContext(null),w=r.a.createContext(null),x=r.a.createContext(null),C=r.a.createContext(null),D=r.a.createContext(null),L=n(13),T=n(29),M=n(30),F=n(49),B=n.n(F),R=n(80),P=Object(R.setupCache)({maxAge:24e4}),z=B.a.create({adapter:P.adapter}),A=function(){function e(t){var n=this;Object(T.a)(this,e),this.ships=t.ships||{},this.modules=t.modules||{},this.systems=t.systems||{},this.stations=t.stations||{},this.bodies=t.bodies||{},console.assert(Object.keys(t).every((function(e){return n.hasOwnProperty(e)}))),this.materialTypes=["Raw","Manufactured","Encoded"],this.technologyTypes=["Human","Guardian"],this.ringTypes=["Rocky","Icy","Metallic","Metal Rich"],this.searchOptions=[],this._relativeSystem=null,this._sortedSystems=[],this._sortedStations=[],this._sortedBodies=[]}return Object(M.a)(e,[{key:"_getSearchTerms",value:function(e){return e?Object(l.a)(new Set(e.toString().toLowerCase().replace(/[^a-z0-9 ]/," ").split(" ").map((function(e){return e.trim()})).filter((function(e){return!!e})))).sort():[]}},{key:"_registerSearch",value:function(e,t){var n=this;return t._type=e,t._searchTerms=Object(l.a)(new Set([t.name].concat(Object(l.a)(Object.values(t.attributes).filter((function(e){return"string"===typeof e})))).filter((function(e){return!!e})).flatMap((function(e){return n._getSearchTerms(e)})).map((function(e){return e.trim()})).filter((function(e){return e})))).sort(),this.searchOptions.push(t),t}},{key:"_resolve",value:function(e,t){return("string"===typeof t?e[t.toLowerCase()]:"number"===typeof t?e[t]:t)||null}},{key:"getShip",value:function(e){return this._resolve(this.ships,e)}},{key:"getModule",value:function(e){return this._resolve(this.modules,e)}},{key:"getSystem",value:function(e){return this._resolve(this.systems,e)}},{key:"getStation",value:function(e){if(Array.isArray(e)){var t=this.getSystem(e[0]);return t&&t.stations[e[1]]||null}return this._resolve(this.stations,e)}},{key:"getBody",value:function(e){return this._resolve(this.bodies,e)}},{key:"getDistanceBetweenSystems",value:function(e,t){var n=e.x-t.x,a=e.y-t.y,r=e.z-t.z;return Math.round(Math.sqrt(Math.pow(n,2)+Math.pow(a,2)+Math.pow(r,2)))}},{key:"getRelativeSystem",value:function(){return this._relativeSystem}},{key:"setRelativeSystem",value:function(e){var t=this;if(e=this.getSystem(e),this._relativeSystem===e)return e;this._relativeSystem=e;return this._sortedSystems.forEach((function(n){return function e(t,n){t*=1+(n._distanceModifier||0),n._currentDistance=t,n._children&&n._children.forEach((function(n){return e(t,n)}))}(e?t.getDistanceBetweenSystems(e,n):0,n)})),this._sortedSystems.sort((function(t,n){return e?t._currentDistance-n._currentDistance:t.name-n.name})),this._sortedStations.sort((function(t,n){return e?t._currentDistance-n._currentDistance:t.name-n.name})),this._sortedBodies.sort((function(t,n){return e?t._currentDistance-n._currentDistance:t.name-n.name})),e}},{key:"getNearestSystems",value:function(e,t){var n=[];if(arguments.length<2)t=Number.POSITIVE_INFINITY;else if(t<=0)return n;if(!e)return this._sortedSystems.slice(0,t);var a,r=Object(L.a)(this._sortedSystems);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(e(s)&&(n.push(s),n.length>=t))break}}catch(i){r.e(i)}finally{r.f()}return n}},{key:"getNearestStations",value:function(e,t){var n=[];if(arguments.length<2)t=Number.POSITIVE_INFINITY;else if(t<=0)return n;if(!e)return this._sortedStations.slice(0,t);var a,r=Object(L.a)(this._sortedStations);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(e(s)&&(n.push(s),n.length>=t))break}}catch(i){r.e(i)}finally{r.f()}return n}},{key:"getNearestRingBodies",value:function(e,t){var n=[];if(t<=0)return n;var a,r=Object(L.a)(this._sortedBodies);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(s.rings){var i,c=Object(L.a)(s.rings);try{for(c.s();!(i=c.n()).done;){var o=i.value;if(!e||o.type===e){n.push(s);break}}}catch(l){c.e(l)}finally{c.f()}if(n.length>=t)break}}}catch(l){r.e(l)}finally{r.f()}return n}},{key:"_isSearchRelevant",value:function(e,t){if(!e||!t)return!!e;var n=this._getSearchTerms(e),a=this._getSearchTerms(t);return n.some((function(e){return a.some((function(t){return t.startsWith(e)}))}))}},{key:"search",value:function(e){if(!e.trim())return[];var t=this.searchOptions.filter((function(t){return t.name&&t.name.toLowerCase()===e})),n=[],a=this._getSearchTerms(e);if(!a.length)return n;for(var r=3-a.length,s=this.searchOptions,i=s.length,c=a.length,o=0;o<i;o++){for(var u=s[o],m=!0,d=0;d<c;d++){var f=a[d],y=f.length;y<r&&(y=r);for(var v=u._searchTerms,h=v.length,p=!1,g=0;g<h;g++){var b=v[g].substring(0,y);if(b===f&&(p=!0),b>=f)break}if(!p){m=!1;break}}m&&!t.includes(u)&&n.push(u)}return n.sort((function(e,t){return(e._currentDistance||0)-(t._currentDistance||0)})),[].concat(Object(l.a)(t),n)}}]),e}();function I(){return{}}function W(){return{Group:this.groupName,Class:"".concat(this.class).concat(this.rating),Ship:this.ship&&this.ship.name,Category:this.category,Mode:this.mode}}function U(){return{Allegiance:this.allegiance,Power:this.power,"Power state":this.powerState,"System state":this.states.join(", "),Resources:this.reserveType,Habitation:this.population?"Populated":"Unpopulated",Population:this.population}}function G(){return{Type:this.Type,Economy:this.economies.join(", "),Services:this.services.join(", "),"Large landing pads":"L"===this.padSize&&"Large landing pads"}}function K(e){for(var t=0,n=Object.values(e);t<n.length;t++)for(var a=n[t],r=0,s=Object.values(a);r<s.length;r++)for(var i=s[r],c=function(){var t=Object(d.a)(l[o],2),n=t[0],a=t[1],r=i[n];Array.isArray(r)?i[n]=r.map((function(t){return e[a][t]})):i[n]=e[a][r]},o=0,l=Object.entries(i.$resolve);o<l.length;o++)c();return e}function J(){return H.apply(this,arguments)}function H(){return(H=Object(u.a)(o.a.mark((function e(){var t,n,a,r,s,i,c,u,m,d,f,y,v,h,p,g,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Loading galaxy..."),e.t0=K,e.next=4,z.get("data/galaxy.json");case 4:for(e.t1=e.sent.data,t=(0,e.t0)(e.t1),n=new A(t),a=0,r=Object.values(n.ships);a<r.length;a++)s=r[a],Object.defineProperty(s,"attributes",{get:I}),n._registerSearch("ship",s);for(i=0,c=Object.values(n.modules);i<c.length;i++)u=c[i],Object.defineProperty(u,"attributes",{get:W}),n._registerSearch("module",u);for(m=0,d=Object.values(n.systems);m<d.length;m++)f=d[m],Object.defineProperty(f,"attributes",{get:U}),n.systems[f.name.toLowerCase()]=f,n._sortedSystems.push(f),f.stations.sort((function(e,t){return e.starDistance-t.starDistance})),f.bodies.sort((function(e,t){return e.starDistance-t.starDistance})),f._children=[].concat(Object(l.a)(f.stations),Object(l.a)(f.bodies)).sort((function(e,t){return e.starDistance-t.starDistance})),n._registerSearch("system",f);for(y=0,v=Object.values(n.stations);y<v.length;y++)h=v[y],Object.defineProperty(h,"attributes",{get:G}),n._sortedStations.push(h),h._distanceModifier=1e-4*h.starDistance,n._registerSearch("station",h);for(p=0,g=Object.values(t.bodies);p<g.length;p++)(b=g[p])._type="body",n._sortedBodies.push(b),b._distanceModifier=1e-4*b.starDistance;return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=null,Y=new A({});function q(){return(q=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V||(V=J()),e.abrupt("return",V);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){var t=e.attributes,n=e.hideKeys;return t?r.a.createElement(r.a.Fragment,null,Object.entries(t).filter((function(e){return Object(d.a)(e,2)[1]})).map((function(e){var t=Object(d.a)(e,2),a=t[0],s=t[1];return r.a.createElement("div",{key:a},!n&&a!==s&&r.a.createElement("small",{className:"text-secondary"},a,":"),r.a.createElement("small",{className:"text-muted d-inline-block"},"number"===typeof s?s.toLocaleString():s))}))):null}var Q=n(81);function X(e){var t=e.handle,n=e.variant,s=e.icon,i=e.name,c=e.sub,o=e.below,u=e.detail,m=e.children,f=Object(a.useState)(!1),y=Object(d.a)(f,2),v=y[0],h=y[1],p=Object(a.useState)(null),g=Object(d.a)(p,2),b=g[0],E=g[1],S=Object(a.useContext)(C),j=Object(a.useContext)(w),O=Object(a.useContext)(x);if(t=t||"".concat(n).concat(i).concat(c),i||(i=t.name),j.ancestors.includes(t))return null;j.selected!==t?v=!1:b&&(v=!0),!v&&j.selected&&(n="muted");var k=null;O&&t.attributes&&(k={},Object.entries(t.attributes).forEach((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];i&&i.includes(a)||!O.isRelevant(a)||(k[n]=a)})));var _=S.favorites.includes(t);var N="solid 2px "+(_?"#5b5ad5":"#424345");return r.a.createElement("div",{className:"m-0 mb-1 rounded-lg",style:{background:v?"#333":"#1A1A1A",borderLeft:u?"solid 6px ".concat(!v&&j.selected?"#424345":_?"#5b5ad5":"#76777A"):N,borderTop:N,borderRight:N,borderBottom:N}},r.a.createElement(Q.a,{onSwipedLeft:function(){return S.removeFavorite(t)},onSwipedRight:function(){return S.addFavorite(t)}},r.a.createElement("div",{className:"cursor-pointer p-2",style:{opacity:!v&&j.selected?.8:1},onClick:j&&u&&function(e){return e.stopPropagation()&(h(!v),j.setSelected(v?null:t),void E(null))}},r.a.createElement("div",{className:"d-flex"},(s||i)&&r.a.createElement("span",{className:"m-0 text-".concat(n," flex-grow-1")},s&&r.a.createElement("span",{className:"mr-2",style:{position:"relative",top:"-2px",opacity:.9}},s),i),c&&r.a.createElement("small",{className:"float-right text-".concat(n),style:{marginTop:"2px",whiteSpace:"nowrap",opacity:.9}},c)),o,!v&&k&&r.a.createElement($,{hideKeys:!0,attributes:k}))),!v&&r.a.createElement(r.a.Fragment,null,m&&r.a.createElement("div",{className:"px-2"},m)),v&&function(){var e={selected:b,setSelected:function(e){return E(e)&h(!0)},ancestors:[].concat(Object(l.a)(j.ancestors),[t])};return r.a.createElement(w.Provider,{value:e},r.a.createElement("div",{className:"p-2 pt-1",style:{background:"#080808"}},u&&u(e),m))}())}function Z(e){var t=e.items,n=e.size,s=e.ignoreFilter,i=e.ignoreSort,c=e.render,o=Object(a.useState)(n||1),u=Object(d.a)(o,2),m=u[0],f=u[1],y=Object(a.useContext)(C);return t&&t.length?(y&&(s||(t=t.filter(y.filter)),i||(t=[].concat(Object(l.a)(t.filter((function(e){return y.favorites.includes(e)}))),Object(l.a)(t.filter((function(e){return!y.favorites.includes(e)})))))),r.a.createElement("div",{className:"my-1"},t.slice(0,m).map(c),t.length>m&&r.a.createElement("span",{className:"btn btn-outline-secondary d-block mt-2",onClick:function(){return f(2*m)}},"Show more"))):null}var ee=n(160);function te(e){var t=e.station,n=Object(a.useContext)(N);if(!(t=n.getStation(t)))return r.a.createElement(X,{variant:"secondary",name:"string"===typeof e.station?e.station:"(Station)"});var s=t.planetary?ee.d:ee.b;return r.a.createElement(X,{variant:"warning",handle:t,icon:r.a.createElement(s,null),sub:t.starDistance?t.starDistance.toLocaleString()+" Ls":"",detail:function(){return r.a.createElement($,{attributes:t.attributes})}},t.system&&r.a.createElement(me,{system:t.system}))}var ne=n(28),ae=n(169);function re(e){var t=e.setting,n=e.label,s=e.inverted,i=e.onToggle,c=Object(a.useContext)(D);return r.a.createElement(ae.a,null,r.a.createElement(ae.a.Group,{className:"my-2",onClick:function(){var e=!c[t];c.set(Object(ne.a)({},t,e)),i&&i(e)}},r.a.createElement(ae.a.Check,{readOnly:!0,checked:!!c[t]===!s,label:n||t})))}function se(e){var t=e.ship,n=Object(a.useContext)(N),s=Object(a.useContext)(D);return t=n.getShip(t),r.a.createElement(X,{variant:"danger",handle:t,icon:r.a.createElement(ee.c,null),sub:t.pilot,detail:function(e){var a=e.setSelected,i=n.getNearestStations((function(e){return e.ships.includes(t)}));return s.onlyDiscounts&&(i=i.filter((function(e){return"Li Yong-Rui"===e.system.power}))),r.a.createElement(r.a.Fragment,null,r.a.createElement($,{attributes:t.attributes}),r.a.createElement(re,{setting:"onlyDiscounts",label:"15% discount",onToggle:function(){return a(null)}}),r.a.createElement(Z,{items:i,size:2,render:function(e,t){return r.a.createElement(ue,{key:t,result:e})}}))}})}function ie(e){var t=e.module,n=Object(a.useContext)(N),s=Object(a.useContext)(D);return t=n.getModule(t),r.a.createElement(X,{variant:"danger",handle:t,name:"".concat(t.class+t.rating," ").concat(t.name),sub:t.ship&&t.ship.name||t.mode,detail:function(e){var a=e.setSelected,i=n.getNearestStations((function(e){return e.modules.includes(t)}));return s.onlyDiscounts&&(i=i.filter((function(e){return"Li Yong-Rui"===e.system.power}))),r.a.createElement(r.a.Fragment,null,t.ship&&r.a.createElement(se,{ship:t.ship}),r.a.createElement($,{attributes:t.attributes}),r.a.createElement(re,{setting:"onlyDiscounts",label:"15% discount",onToggle:function(){return a(null)}}),r.a.createElement(Z,{items:i,size:2,render:function(e,t){return r.a.createElement(ue,{key:t,result:e})}}))}})}var ce=n(161);function oe(e){var t=e.body,n=Object(a.useContext)(N);if(!(t=n.getBody(t)))return r.a.createElement(X,{variant:"secondary",name:"string"===typeof e.body?e.body:"(Body)"});var s=n.getSystem(t.system),i=t.type&&t.type.toLowerCase().includes("star")?ce.a:ee.e;return r.a.createElement(X,{variant:"success",handle:t,icon:r.a.createElement(i,null),name:t.name||"(Body)",sub:t.starDistance?t.starDistance.toLocaleString()+" Ls":"",below:r.a.createElement("small",{className:"text-muted"},t.type),detail:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement($,{attributes:t.attributes}),t.rings&&t.rings.map((function(e,t){return r.a.createElement(X,{key:t,variant:"info",handle:e,name:e.name,icon:r.a.createElement(ee.a,null),sub:e.type})})))}},s&&r.a.createElement(me,{system:s}))}var le={ship:function(e){return r.a.createElement(se,{ship:e})},module:function(e){return r.a.createElement(ie,{module:e})},system:function(e){return r.a.createElement(me,{system:e})},station:function(e){return r.a.createElement(te,{station:e})},body:function(e){return r.a.createElement(oe,{body:e})}};function ue(e){var t=e.result,n=le[t._type];if(!n)throw console.error("[Search result]",t._type,t),new Error("Unknown search result type: "+t._type);return n(t)}function me(e){var t=e.system,n=Object(a.useContext)(N);return(t=n.getSystem(t))?r.a.createElement(X,{handle:t,icon:r.a.createElement(ce.a,null),sub:t._currentDistance?t._currentDistance.toLocaleString()+" Ly":null,below:t.permitRequired&&r.a.createElement("small",{className:"text-danger ml-2"},"Permit required"),detail:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement($,{attributes:t.attributes}),r.a.createElement(Z,{items:t.stations,size:5,render:function(e,t){return r.a.createElement(ue,{key:t,result:e})}}))}}):r.a.createElement(X,{variant:"secondary",name:"string"===typeof e.system?e.system:"(System)"})}var de=n(162);function fe(e){var t=e.signalSource;return r.a.createElement(X,{variant:"muted",handle:t,name:"".concat(Object(de.a)(t.name)," (Threat ").concat(t.threat||0,")")||!1})}var ye=["Location","FSDJump","CarrierJump"],ve=function(){function e(){Object(T.a)(this,e),this.name=null,this.journal=[],this.discoveries=[],this._currentSystem=null}return Object(M.a)(e,[{key:"getMostRecent",value:function(e){var t,n=Object(L.a)(this.journal);try{for(n.s();!(t=n.n()).done;){var a=t.value;if("string"===typeof e?a.event===e:e(a))return a}}catch(r){n.e(r)}finally{n.f()}}},{key:"getCurrentSystem",value:function(e){return this._currentSystem&&(e.getSystem(this._currentSystem.name)||this._currentSystem)}},{key:"update",value:function(e){var t=this;if(e.journalEntries){e.journalEntries.forEach((function(e){e.timestamp=new Date(e.timestamp).getTime();var n=t.journal.findIndex((function(t){return t.uid&&t.uid===e.uid}));if(-1!==n?t.journal[n]=e:t.journal.unshift(e),e.hasOwnProperty("WasDiscovered")&&!e.WasDiscovered&&!e.WasMapped)if(-1!==(n=t.discoveries.findIndex((function(t){return t.BodyName===e.BodyName})))){var a=t.discoveries[n];!(e.timestamp===a.timestamp?e.uid>a.uid:e.timestamp>a.timestamp)||!e.TerraformState&&a.TerraformState||(t.discoveries[n]=e)}else t.discoveries.unshift(e)})),this.journal=this.journal.sort((function(e,t){return-(e.timestamp===t.timestamp?e.uid-t.uid:e.timestamp-t.timestamp)})),this.discoveries=this.discoveries.sort((function(e,t){return-(e.timestamp===t.timestamp?e.uid-t.uid:e.timestamp-t.timestamp)}));var n=this.getMostRecent("Commander");this.name=n?n.Name:null}this._currentSystem=null;var a,r=Object(L.a)(this.journal);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(ye.includes(s.event)){this._currentSystem={_type:"system",name:s.StarSystem||s.SystemName,x:s.StarPos[0],y:s.StarPos[1],z:s.StarPos[2],population:s.Population,states:[],stations:[],bodies:[],attributes:{}};break}}}catch(i){r.e(i)}finally{r.f()}}}]),e}();function he(e){var t="Terraformable"===e.TerraformState;return{_type:"body",id:e.BodyID,name:e.Body||e.BodyName,type:e.PlanetClass||e.StarType&&"".concat(e.StarType+e.Subclass,"-").concat(e.Luminosity," star"),system:e.StarSystem,rings:e.Rings&&e.Rings.map((function(t){return{name:t.Name.replace(e.BodyName,"").trim(),type:t.RingClass.replace("eRingClass_","").replace("MetalRich","Metal Rich").replace("Metalic","Metallic")}})),starDistance:Math.round(e.DistanceFromArrivalLS),terraformable:t,landable:e.Landable,gravity:e.SurfaceGravity/9.81,firstDiscovered:!e.WasDiscovered&&!e.WasMapped,attributes:{Type:e.PlanetClass,"Earth masses":e.MassEM,Atmosphere:Object(p.a)(e.Atmosphere||""),Volcanism:Object(p.a)(e.Volcanism||""),Landable:e.Landable&&"Landable",Terraformable:t,"First Discovered":e.firstDiscovered&&"First Discovered"}}}function pe(e){return{_type:"ship",name:e.Ship_Localised,pilot:e.PilotName_Localised||e.Commander}}function ge(e){return{_type:"signal",name:e.USSType_Localised,threat:e.USSThreat}}function be(e){var t=e.entry,n=e.internal,s=Object(a.useState)(null),i=Object(d.a)(s,2),c=i[0],o=i[1];function l(e){return c||o(e),e}var u=Object(a.useContext)(N),m=Object(p.a)(t.event,{}).replace("Uss","USS").replace("Fss","FSS").replace("Dss","DSS");t.StarSystem=t.StarSystem||t.SystemName;var f=new Date(t.timestamp),y=r.a.createElement(r.a.Fragment,null,t.StarSystem&&(t.StationName?r.a.createElement(te,{station:[t.StarSystem,t.StationName]}):t.Body||t.BodyName?r.a.createElement(oe,{body:l(c||u.getBody(t.BodyName)||he(t))}):r.a.createElement(me,{system:t.StarSystem})),t.Ship_Localised&&r.a.createElement(se,{ship:l(c||pe(t))}),t.USSType_Localised&&r.a.createElement(fe,{signalSource:l(c||ge(t))}));return n?y:r.a.createElement(X,{variant:"muted",handle:t,name:m,below:r.a.createElement(r.a.Fragment,null,t.From_Localised&&r.a.createElement("small",{className:"text-secondary d-block"},t.From_Localised,":"),t.Message_Localised&&r.a.createElement("small",{className:"text-muted d-block"},t.Message_Localised)),sub:f.getUTCHours().toString().padStart(2,"0")+":"+f.getUTCMinutes().toString().padStart(2,"0")},y)}var Ee=n(167),Se=n(164);function je(e){var t=e.name,n=e.detail,a=e.children;return r.a.createElement(X,{name:t,icon:r.a.createElement(Se.a,null),detail:n},a)}var Oe=n(82),ke=n.n(Oe),_e=n(4),Ne=n.n(_e);function we(e){var t=e.body,n=e.player,s=Object(a.useContext)(N),i="string"===typeof(t=s.getBody(t)).system?t.system:(s.getSystem(t.system)||{}).name,c=n&&n.getMostRecent((function(e){return"SAAScanComplete"===e.event&&e.BodyName===t.name})),o=n&&n.getMostRecent((function(e){return"SAASignalsFound"===e.event&&e.BodyName===t.name}));return r.a.createElement("div",{className:Ne()("d-flex py-2",c?"text-success":t.landable&&"text-warning"),style:{background:"black",opacity:c&&!o&&.6}},r.a.createElement("div",{className:"px-3",style:{minWidth:"60px"}},r.a.createElement("h4",{className:"mb-0"},t.name.replace(i,"").trim())),r.a.createElement("div",null,r.a.createElement("div",{style:{marginTop:"4px"}},t.type),t.landable&&r.a.createElement("div",{className:"text-muted"},Math.round(10*t.gravity)/10," G"),o&&o.Signals.map((function(e,t){return r.a.createElement("div",{key:t,className:"text-warning"},e.Type_Localised,e.Count&&" x"+e.Count)}))))}function xe(e){var t=e.text;return r.a.createElement("div",{style:{marginTop:"20vh"}},r.a.createElement("div",{style:{maxWidth:"960px",animationDuration:"1s"}},r.a.createElement("h4",{className:"text-center text-light mb-5 animate-fade-in",style:{animationDuration:"1s"}},t),r.a.createElement("img",{className:"d-block mx-auto animate-fade-in",style:{animationDuration:"4s"},src:"img/favicon.png",alt:"Loading..."})))}function Ce(e){var t=e.name,n=e.children;return r.a.createElement("div",{className:"mt-1 mb-3"},r.a.createElement("h5",{className:"ml-1 text-light"},t),n)}var De=null,Le=!0;function Te(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)(null),c=Object(d.a)(i,2),g=c[0],b=c[1],E=Object(a.useState)(null),S=Object(d.a)(E,2),j=S[0],O=S[1],_=Object(a.useState)(null),L=Object(d.a)(_,2),T=L[0],M=L[1],F=Object(a.useState)(null),B=Object(d.a)(F,2),R=B[0],P=B[1],z=Object(a.useState)(""),A=Object(d.a)(z,2),I=A[0],W=A[1],U=Object(a.useState)(void 0),G=Object(d.a)(U,2),K=G[0],J=G[1],H=Object(a.useState)(""),V=Object(d.a)(H,2),$=V[0],Q=V[1],X=Object(a.useState)([]),ee=Object(d.a)(X,2),ne=ee[0],ae=ee[1],se=Object(a.useState)([]),ie=Object(d.a)(se,2),ce=ie[0],le=ie[1],de=Object(a.useState)(null),fe=Object(d.a)(de,2),ye=fe[0],pe=fe[1],ge=ke.a.parse(window.location.search).layout;function Se(e){var t,n;"overlay"!==ge&&(e.hasOwnProperty("overlay")&&(t={overlay:e.overlay||null},n="uplink",console.log("Sending message:",t,n),T.emit("msg",t,n)))}function Oe(e){return _e.apply(this,arguments)}function _e(){return(_e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.next=3,k(t);case 3:return T=e.sent,M(T),P(!1),e.abrupt("return",T);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(){T&&T.close(),M(null),P(!1),b(null)}if(n||(n={set:function(e){s(Object(m.a)(Object(m.a)({},n),e))}},s(n)),g||(g=new ve,b(g)),T&&(De&&T.removeListener("msg",De),De=function(e,t,a){a||"uplink"!==e.joinedAsRole||Se(n),"uplink"===a&&(e.overlay&&s(Object(m.a)(Object(m.a)({},n),{},{overlay:e.overlay})),g.update(e)),b(null),!a&&e.uplinkDisconnected||b(g)},T.on("msg",De)),Le&&(Le=!1,Oe().catch((function(e){return console.error(e)}))),!j){if("overlay"!==ge)return function(){return q.apply(this,arguments)}().then((function(e){return O(e)})),r.a.createElement(xe,{text:"Loading galaxy data..."});j=Y}var Te=g.getCurrentSystem(j),Me=j.setRelativeSystem(j.getSystem(parseInt(I)?null:I)||Te||"Sol");if("overlay"===ge&&!Me)return r.a.createElement(xe,{text:"Loading player data..."});K||J(K="settings");var Fe=["Music","FSSSignalDiscovered"];function Be(e){return!Fe.includes(e.event)}function Re(e){e?J("search"):e="",Q(e),ae(j.search(e)),pe(null)}var Pe=null;function ze(e){J(e),pe(null),"search"===e&&Pe&&("search"===K&&Pe.value?(Pe.value="",Re()):Pe.select(),Pe.focus())}"overlay"===ge&&(document.body.style.backgroundColor="#0000");return r.a.createElement(D.Provider,{value:n},r.a.createElement(w.Provider,{value:{selected:ye,setSelected:pe,ancestors:[]}},r.a.createElement(C.Provider,{value:{filter:function(e){return!0},favorites:ce,addFavorite:function(e){e._type&&le([e].concat(Object(l.a)(ce.filter((function(t){return t!==e})))))},removeFavorite:function(e){le(ce.filter((function(t){return t!==e})))}}},r.a.createElement(N.Provider,{value:j},r.a.createElement(x.Provider,{value:{text:$,isRelevant:function(e){return j._isSearchRelevant($,e)}}},r.a.createElement("div",{className:"p-2"},r.a.createElement("div",null,g.name&&"overlay"!==ge&&r.a.createElement("h6",{className:"text-primary float-right mt-1"},"CMDR ",g.name),r.a.createElement("h5",{className:"text-"+(Me.name.toLowerCase()===I.toLowerCase()?"success":Te?Te&&Me.name.toLowerCase()!==Te.name.toLowerCase()?"danger":"info":"light")},"overlay"!==ge||Te||I||$?Me.name:r.a.createElement(r.a.Fragment,null,"\xa0"))),"overlay"===ge?function(){var e=g.journal.filter((function(e){return"Scan"===e.event&&e.StarSystem===Me.name&&e.StarType})).reverse();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",{className:"text-info",style:{opacity:.5}},e.map((function(e){return e.StarType+e.Subclass+" "+e.Luminosity})).join(", ")),r.a.createElement(Z,{items:function(){var e=g.journal.filter((function(e){return(e.TerraformState||"Earthlike body"===e.PlanetClass||"Ammonia world"===e.PlanetClass)&&e.StarSystem===Me.name})).sort((function(e,t){return e.BodyName.localeCompare(t.BodyName)}));return e.filter((function(t,n){return e.slice(n+1).every((function(e){return t.BodyName!==e.BodyName}))}))}(),size:100,render:function(e,t){return r.a.createElement(we,{key:t,body:he(e),player:g})}}))}():r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{size:"lg",className:"mb-2"},r.a.createElement("input",{type:"text",className:"form-control",value:$,placeholder:"Search...",ref:function(e){return Pe=e},onChange:function(e){return Re(e.target.value)}})),r.a.createElement(y.a,{activeKey:K,onSelect:ze},r.a.createElement(v.a,{eventKey:"search",title:r.a.createElement(Ee.c,{className:"h4 mt-1"})},"search"===K&&($?r.a.createElement(Z,{items:ne,size:20,render:function(e,t){return r.a.createElement(ue,{key:t,result:e})}}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,{items:ce,size:10,render:function(e,t){return r.a.createElement(ue,{key:t,result:e})}}),r.a.createElement(Z,{items:j.getNearestSystems((function(){return function(e){return!ce.includes(e)}}),80),size:10,render:function(e,t){return r.a.createElement(ue,{key:t,result:e})}})))),r.a.createElement(v.a,{eventKey:"settings",title:r.a.createElement(Ee.b,{className:"h4 mt-1"})},"settings"===K&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"p-2"},r.a.createElement("div",{className:"p-2"},r.a.createElement("h5",{className:"text-"+(I?Me.name.toLowerCase()===I.toLowerCase()?"success":"danger":"light")},"Current system:"),r.a.createElement(f.a,{size:"md",className:"my-1",style:{opacity:.8}},r.a.createElement("input",{type:"text",className:"form-control",value:I,placeholder:"Choose populated system...",onFocus:function(e){return e.target.select()},onChange:function(e){return Re(null)&W(e.target.value)}})),r.a.createElement(me,{system:Me})),T?Te&&r.a.createElement("div",{className:"ml-2 mt-3"},r.a.createElement(re,{setting:"overlay",label:"Exploration overlay",onToggle:function(e){return Se(Object(m.a)(Object(m.a)({},n),{},{overlay:e}))}})):r.a.createElement(h.a,{size:"lg",variant:"outline-"+(T?"light":R?"warning":"info"),className:"w-100 py-2 my-3",style:{opacity:T&&.5},onClick:function(){return T?Ne():(Ne(),void Oe().catch((function(e){return console.error(e)})))}},R?"Connecting...":"Connect"),Te?r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(je,{name:"Recent actions",detail:function(){return r.a.createElement(Z,{items:g.journal.filter(Be),size:5,render:function(e,t){return r.a.createElement(be,{key:"".concat(e.timestamp).concat(t),entry:e})}})}})):r.a.createElement("a",{href:"https://github.com/rvanasa/elite-navigator/releases",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(h.a,{variant:"outline-light",className:"w-100 py-2 my-2",style:{opacity:.7},onClick:function(){return Oe("localhost")}},"Download location sync"))))),r.a.createElement(v.a,{eventKey:"nearby",title:r.a.createElement(Ee.a,{className:"h4 mt-1"})},"nearby"===K&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mt-2"},r.a.createElement(je,{name:"Nearby stations",detail:function(){return r.a.createElement(Z,{items:j.getNearestStations(),size:3,render:function(e,t){return r.a.createElement(ue,{key:t,result:e})}})}}),r.a.createElement(je,{name:"Pristine rings",detail:function(){return r.a.createElement(r.a.Fragment,null,j.ringTypes.map((function(e,t){return r.a.createElement(je,{key:t,name:e,detail:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,{items:j.getNearestRingBodies(e).filter((function(e){return n.allResourceTypes||"Pristine"===e.system.reserveType})),size:2,render:function(e,t){return r.a.createElement(oe,{key:t,body:e})}}))}})})))}}),r.a.createElement(je,{name:"Material traders",detail:function(){return j.materialTypes.map((function(e,t){return r.a.createElement(Ce,{key:t,name:e},r.a.createElement(Z,{items:j.getNearestStations((function(t){return t.services.includes(e+" Material Trader")})),size:2,render:function(e,t){return r.a.createElement(te,{key:t,station:e})}}))}))}}),r.a.createElement(je,{name:"Services",detail:function(){return["Interstellar Factors","Black Market","Human Technology Broker","Guardian Technology Broker"].map((function(e,t){return r.a.createElement(je,{key:t,name:Object(p.a)(e),detail:function(){return r.a.createElement(Z,{items:j.getNearestStations((function(t){return t.services.includes(e)})),size:2,render:function(e,t){return r.a.createElement(te,{key:t,station:e})}})}})}))}}))))))))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},54:function(e,t,n){},90:function(e,t,n){e.exports=n(158)},98:function(e,t,n){}},[[90,1,2]]]);
//# sourceMappingURL=main.adcdcbe4.chunk.js.map