(this["webpackJsonpelite-navigator-web"]=this["webpackJsonpelite-navigator-web"]||[]).push([[0],{126:function(e,t){},149:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(20),i=n.n(s),c=(n(92),n(94),n(11)),o=n.n(c),l=n(8),u=n(14),m=n(48),d=n(6),f=(n(96),n(156)),h=n(161),y=n(157),v=n(159),p=n(154),b=n(76),g=n.n(b),E=null,S=null,j=null;function O(e){return _.apply(this,arguments)}function _(){return(_=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=t.replace("ws://",""))||(t="127.0.0.1"),t.includes(":")||(t+=":4777"),(t="ws://"+t)!==S||!j){e.next=6;break}return e.abrupt("return",j);case 6:return E&&E.close(),E=null,S=t,j=new Promise((function(e,n){var a=g.a.connect(t);E=a,a.on("connect",(function(){console.log("Connected");document.addEventListener("visibilitychange",(function e(){a===E?"visible"!==document.visibilityState||a.connected||a.connect():document.removeEventListener("visibilitychange",e)})),S=j=null,e(a)})),a.on("error",(function(e){S=j=null,n(e)})),a.on("disconnect",(function(){console.log("Disconnected")}))})),e.abrupt("return",j);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=r.a.createContext(null),w=r.a.createContext(null),N=r.a.createContext(null),x=r.a.createContext(null),C=r.a.createContext(null),D=n(13),L=n(28),T=n(29),P=n(46),F=n.n(P),M=n(77),B=Object(M.setupCache)({maxAge:24e4}),z=F.a.create({adapter:B.adapter}),R=function(){function e(t){var n=this;Object(L.a)(this,e),this.ships=t.ships,this.modules=t.modules,this.systems=t.systems,this.stations=t.stations,this.bodies=t.bodies,console.assert(Object.keys(t).every((function(e){return n.hasOwnProperty(e)}))),this.materialTypes=["Raw","Manufactured","Encoded"],this.ringTypes=["Rocky","Icy","Metallic","Metal Rich"],this.searchOptions=[],this._relativeSystem=null,this._sortedSystems=[],this._sortedStations=[],this._sortedBodies=[]}return Object(T.a)(e,[{key:"_getSearchTerms",value:function(e){return e?Object(l.a)(new Set(e.toString().toLowerCase().replace(/[^a-z0-9 ]/," ").split(" ").map((function(e){return e.trim()})).filter((function(e){return!!e})))).sort():[]}},{key:"_registerSearch",value:function(e,t){var n=this;return t._type=e,t._searchTerms=Object(l.a)(new Set([t.name].concat(Object(l.a)(Object.values(t.attributes).filter((function(e){return"string"===typeof e})))).filter((function(e){return!!e})).flatMap((function(e){return n._getSearchTerms(e)})).map((function(e){return e.trim()})).filter((function(e){return e})))).sort(),this.searchOptions.push(t),t}},{key:"_resolve",value:function(e,t){return("string"===typeof t?e[t.toLowerCase()]:"number"===typeof t?e[t]:t)||null}},{key:"getShip",value:function(e){return this._resolve(this.ships,e)}},{key:"getModule",value:function(e){return this._resolve(this.modules,e)}},{key:"getSystem",value:function(e){return this._resolve(this.systems,e)}},{key:"getStation",value:function(e){if(Array.isArray(e)){var t=this.getSystem(e[0]);return t&&t.stations[e[1]]||null}return this._resolve(this.stations,e)}},{key:"getBody",value:function(e){return this._resolve(this.bodies,e)}},{key:"getDistanceBetweenSystems",value:function(e,t){var n=e.x-t.x,a=e.y-t.y,r=e.z-t.z;return Math.round(Math.sqrt(Math.pow(n,2)+Math.pow(a,2)+Math.pow(r,2)))}},{key:"getRelativeSystem",value:function(){return this._relativeSystem}},{key:"setRelativeSystem",value:function(e){var t=this;if(e=this.getSystem(e),this._relativeSystem===e)return e;this._relativeSystem=e;return this._sortedSystems.forEach((function(n){return function e(t,n){t*=1+(n._distanceModifier||0),n._currentDistance=t,n._children&&n._children.forEach((function(n){return e(t,n)}))}(e?t.getDistanceBetweenSystems(e,n):0,n)})),this._sortedSystems.sort((function(t,n){return e?t._currentDistance-n._currentDistance:t.name-n.name})),this._sortedStations.sort((function(t,n){return e?t._currentDistance-n._currentDistance:t.name-n.name})),this._sortedBodies.sort((function(t,n){return e?t._currentDistance-n._currentDistance:t.name-n.name})),e}},{key:"getNearestSystems",value:function(e,t){var n=[];if(arguments.length<2)t=Number.POSITIVE_INFINITY;else if(t<=0)return n;if(!e)return this._sortedSystems.slice(0,t);var a,r=Object(D.a)(this._sortedSystems);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(e(s)&&(n.push(s),n.length>=t))break}}catch(i){r.e(i)}finally{r.f()}return n}},{key:"getNearestStations",value:function(e,t){var n=[];if(arguments.length<2)t=Number.POSITIVE_INFINITY;else if(t<=0)return n;if(!e)return this._sortedStations.slice(0,t);var a,r=Object(D.a)(this._sortedStations);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(e(s)&&(n.push(s),n.length>=t))break}}catch(i){r.e(i)}finally{r.f()}return n}},{key:"getNearestRingBodies",value:function(e,t){var n=[];if(t<=0)return n;var a,r=Object(D.a)(this._sortedBodies);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(s.rings){var i,c=Object(D.a)(s.rings);try{for(c.s();!(i=c.n()).done;){var o=i.value;if(!e||o.type===e){n.push(s);break}}}catch(l){c.e(l)}finally{c.f()}if(n.length>=t)break}}}catch(l){r.e(l)}finally{r.f()}return n}},{key:"_isSearchRelevant",value:function(e,t){if(!e||!t)return!!e;var n=this._getSearchTerms(e),a=this._getSearchTerms(t);return n.some((function(e){return a.some((function(t){return t.startsWith(e)}))}))}},{key:"search",value:function(e){if(!e.trim())return[];var t=this.searchOptions.filter((function(t){return t.name&&t.name.toLowerCase()===e})),n=[],a=this._getSearchTerms(e);if(!a.length)return n;for(var r=3-a.length,s=this.searchOptions,i=s.length,c=a.length,o=0;o<i;o++){for(var u=s[o],m=!0,d=0;d<c;d++){var f=a[d],h=f.length;h<r&&(h=r);for(var y=u._searchTerms,v=y.length,p=!1,b=0;b<v;b++){var g=y[b].substring(0,h);if(g===f&&(p=!0),g>=f)break}if(!p){m=!1;break}}m&&!t.includes(u)&&n.push(u)}return n.sort((function(e,t){return(e._currentDistance||0)-(t._currentDistance||0)})),[].concat(Object(l.a)(t),n)}}]),e}();function I(){return{}}function A(){return{Group:this.groupName,Class:"".concat(this.class).concat(this.rating),Ship:this.ship&&this.ship.name,Category:this.category,Mode:this.mode}}function U(){return{Allegiance:this.allegiance,Power:this.power,"Power state":this.powerState,"System state":this.states.join(", "),Resources:this.reserveType,Habitation:this.population?"Populated":"Unpopulated",Population:this.population}}function W(){return{Type:this.Type,Economy:this.economies.join(", "),Services:this.services.join(", ")}}function K(e){for(var t=0,n=Object.values(e);t<n.length;t++)for(var a=n[t],r=0,s=Object.values(a);r<s.length;r++)for(var i=s[r],c=function(){var t=Object(d.a)(l[o],2),n=t[0],a=t[1],r=i[n];Array.isArray(r)?i[n]=r.map((function(t){return e[a][t]})):i[n]=e[a][r]},o=0,l=Object.entries(i.$resolve);o<l.length;o++)c();return e}function J(){return V.apply(this,arguments)}function V(){return(V=Object(u.a)(o.a.mark((function e(){var t,n,a,r,s,i,c,u,m,d,f,h,y,v,p,b,g;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Loading galaxy..."),e.t0=K,e.next=4,z.get("data/galaxy.json");case 4:for(e.t1=e.sent.data,t=(0,e.t0)(e.t1),n=new R(t),a=0,r=Object.values(n.ships);a<r.length;a++)s=r[a],Object.defineProperty(s,"attributes",{get:I}),n._registerSearch("ship",s);for(i=0,c=Object.values(n.modules);i<c.length;i++)u=c[i],Object.defineProperty(u,"attributes",{get:A}),n._registerSearch("module",u);for(m=0,d=Object.values(n.systems);m<d.length;m++)f=d[m],Object.defineProperty(f,"attributes",{get:U}),n.systems[f.name.toLowerCase()]=f,n._sortedSystems.push(f),f.stations.sort((function(e,t){return e.starDistance-t.starDistance})),f.bodies.sort((function(e,t){return e.starDistance-t.starDistance})),f._children=[].concat(Object(l.a)(f.stations),Object(l.a)(f.bodies)).sort((function(e,t){return e.starDistance-t.starDistance})),n._registerSearch("system",f);for(h=0,y=Object.values(n.stations);h<y.length;h++)v=y[h],Object.defineProperty(v,"attributes",{get:W}),n._sortedStations.push(v),v._distanceModifier=1e-4*v.starDistance,n._registerSearch("station",v);for(p=0,b=Object.values(t.bodies);p<b.length;p++)(g=b[p])._type="body",n._sortedBodies.push(g),g._distanceModifier=1e-4*g.starDistance;return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y=null;function q(){return(q=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y||(Y=J()),e.abrupt("return",Y);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=n(78),H=n.n(G);function $(e){var t=e.attributes,n=e.hideKeys;return t?r.a.createElement(r.a.Fragment,null,Object.entries(t).filter((function(e){return Object(d.a)(e,2)[1]})).map((function(e){var t=Object(d.a)(e,2),a=t[0],s=t[1];return r.a.createElement("div",{key:a},!n&&a!==s&&r.a.createElement("small",{className:"text-secondary"},a,":"),r.a.createElement("small",{className:"text-muted d-inline-block"},"number"===typeof s?s.toLocaleString():s))}))):null}var Q=n(79);function X(e){var t=e.handle,n=e.variant,s=e.icon,i=e.name,c=e.sub,o=e.below,u=e.detail,m=e.children,f=Object(a.useState)(!1),h=Object(d.a)(f,2),y=h[0],v=h[1],p=Object(a.useState)(null),b=Object(d.a)(p,2),g=b[0],E=b[1],S=Object(a.useContext)(x),j=Object(a.useContext)(w),O=Object(a.useContext)(N);if(t=t||"".concat(n).concat(i).concat(c),i||(i=t.name),j.ancestors.includes(t))return null;j.selected!==t?y=!1:g&&(y=!0),!y&&j.selected&&(n="muted");var _=null;O&&t.attributes&&(_={},Object.entries(t.attributes).forEach((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];i&&i.includes(a)||!O.isRelevant(a)||(_[n]=a)})));var k=S.favorites.includes(t);var C="solid 2px "+(k?"#5b5ad5":"#424345");return r.a.createElement("div",{className:"m-0 mb-1 rounded-lg",style:{background:y?"#333":"#1A1A1A",borderLeft:u?"solid 6px ".concat(!y&&j.selected?"#424345":k?"#5b5ad5":"#76777A"):C,borderTop:C,borderRight:C,borderBottom:C}},r.a.createElement(Q.a,{onSwipedLeft:function(){return S.removeFavorite(t)},onSwipedRight:function(){return S.addFavorite(t)}},r.a.createElement("div",{className:"cursor-pointer p-2",style:{opacity:!y&&j.selected?.8:1},onClick:j&&u&&function(e){return e.stopPropagation()&(v(!y),j.setSelected(y?null:t),void E(null))}},r.a.createElement("div",{className:"d-flex"},(s||i)&&r.a.createElement("span",{className:"m-0 text-".concat(n," flex-grow-1")},s&&r.a.createElement("span",{className:"mr-2",style:{position:"relative",top:"-2px",opacity:.9}},s),i),c&&r.a.createElement("small",{className:"float-right text-".concat(n),style:{marginTop:"2px",whiteSpace:"nowrap",opacity:.9}},c)),o,!y&&_&&r.a.createElement($,{hideKeys:!0,attributes:_}))),!y&&r.a.createElement(r.a.Fragment,null,m&&r.a.createElement("div",{className:"px-2"},m)),y&&function(){var e={selected:g,setSelected:function(e){return E(e)&v(!0)},ancestors:[].concat(Object(l.a)(j.ancestors),[t])};return r.a.createElement(w.Provider,{value:e},r.a.createElement("div",{className:"p-2 pt-1",style:{background:"#080808"}},u&&u(e),m))}())}function Z(e){var t=e.items,n=e.size,s=e.ignoreFilter,i=e.ignoreSort,c=e.render,o=Object(a.useState)(n||1),u=Object(d.a)(o,2),m=u[0],f=u[1],h=Object(a.useContext)(x);return t&&t.length?(h&&(s||(t=t.filter(h.filter)),i||(t=[].concat(Object(l.a)(t.filter((function(e){return h.favorites.includes(e)}))),Object(l.a)(t.filter((function(e){return!h.favorites.includes(e)})))))),r.a.createElement("div",{className:"my-1"},t.slice(0,m).map(c),t.length>m&&r.a.createElement("span",{className:"btn btn-outline-secondary d-block mt-2",onClick:function(){return f(2*m)}},"Show more"))):null}var ee=n(151);function te(e){var t=e.station,n=Object(a.useContext)(k);if(!(t=n.getStation(t)))return r.a.createElement(X,{variant:"secondary",name:"string"===typeof e.station?e.station:"(Station)"});var s=t.planetary?ee.d:ee.b;return r.a.createElement(X,{variant:"warning",handle:t,icon:r.a.createElement(s,null),sub:t.starDistance?t.starDistance.toLocaleString()+" Ls":"",detail:function(){return r.a.createElement($,{attributes:t.attributes})}},t.system&&r.a.createElement(me,{system:t.system}))}var ne=n(27),ae=n(160);function re(e){var t=e.setting,n=e.label,s=e.inverted,i=e.onToggle,c=Object(a.useContext)(C);return r.a.createElement(ae.a,null,r.a.createElement(ae.a.Group,{className:"my-2",onClick:function(e){c.set(Object(ne.a)({},t,!c[t])),i&&i(e)}},r.a.createElement(ae.a.Check,{readOnly:!0,checked:!!c[t]===!s,label:n||t})))}function se(e){var t=e.ship,n=Object(a.useContext)(k),s=Object(a.useContext)(C);return t=n.getShip(t),r.a.createElement(X,{variant:"danger",handle:t,icon:r.a.createElement(ee.c,null),sub:t.pilot,detail:function(e){var a=e.setSelected,i=n.getNearestStations((function(e){return e.ships.includes(t)}));return s.onlyDiscounts&&(i=i.filter((function(e){return"Li Yong-Rui"===e.system.power}))),r.a.createElement(r.a.Fragment,null,r.a.createElement($,{attributes:t.attributes}),r.a.createElement(re,{setting:"onlyDiscounts",label:"15% discount",onToggle:function(){return a(null)}}),r.a.createElement(Z,{items:i,size:2,render:function(e,t){return r.a.createElement(ue,{key:t,result:e})}}))}})}function ie(e){var t=e.module,n=Object(a.useContext)(k),s=Object(a.useContext)(C);return t=n.getModule(t),r.a.createElement(X,{variant:"danger",handle:t,name:"".concat(t.class+t.rating," ").concat(t.name),sub:t.ship&&t.ship.name||t.mode,detail:function(e){var a=e.setSelected,i=n.getNearestStations((function(e){return e.modules.includes(t)}));return s.onlyDiscounts&&(i=i.filter((function(e){return"Li Yong-Rui"===e.system.power}))),r.a.createElement(r.a.Fragment,null,t.ship&&r.a.createElement(se,{ship:t.ship}),r.a.createElement($,{attributes:t.attributes}),r.a.createElement(re,{setting:"onlyDiscounts",label:"15% discount",onToggle:function(){return a(null)}}),r.a.createElement(Z,{items:i,size:2,render:function(e,t){return r.a.createElement(ue,{key:t,result:e})}}))}})}var ce=n(152);function oe(e){var t=e.body,n=Object(a.useContext)(k);if(!(t=n.getBody(t)))return r.a.createElement(X,{variant:"secondary",name:"string"===typeof e.body?e.body:"(Body)"});var s=n.getSystem(t.system),i=t.type&&t.type.toLowerCase().includes("star")?ce.a:ee.e;return r.a.createElement(X,{variant:"success",handle:t,icon:r.a.createElement(i,null),name:t.name||"(Body)",sub:t.starDistance?t.starDistance.toLocaleString()+" Ls":"",below:r.a.createElement("small",{className:"text-muted"},t.type),detail:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement($,{attributes:t.attributes}),t.rings&&t.rings.map((function(e,t){return r.a.createElement(X,{key:t,variant:"info",handle:e,name:e.name,icon:r.a.createElement(ee.a,null),sub:e.type})})))}},s&&r.a.createElement(me,{system:s}))}var le={ship:function(e){return r.a.createElement(se,{ship:e})},module:function(e){return r.a.createElement(ie,{module:e})},system:function(e){return r.a.createElement(me,{system:e})},station:function(e){return r.a.createElement(te,{station:e})},body:function(e){return r.a.createElement(oe,{body:e})}};function ue(e){var t=e.result,n=le[t._type];if(!n)throw console.error("[Search result]",t._type,t),new Error("Unknown search result type: "+t._type);return n(t)}function me(e){var t=e.system,n=Object(a.useContext)(k);return(t=n.getSystem(t))?r.a.createElement(X,{handle:t,icon:r.a.createElement(ce.a,null),sub:t._currentDistance?t._currentDistance.toLocaleString()+" Ly":null,below:t.permitRequired&&r.a.createElement("small",{className:"text-danger ml-2"},"Permit required"),detail:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement($,{attributes:t.attributes}),r.a.createElement(Z,{items:t.stations,size:5,render:function(e,t){return r.a.createElement(ue,{key:t,result:e})}}))}}):r.a.createElement(X,{variant:"secondary",name:"string"===typeof e.system?e.system:"(System)"})}var de=n(153);function fe(e){var t=e.signalSource;return r.a.createElement(X,{variant:"muted",handle:t,name:"".concat(Object(de.a)(t.name)," (Threat ").concat(t.threat||0,")")||!1})}function he(e){var t=e.entry,n=e.internal,s=Object(a.useState)(null),i=Object(d.a)(s,2),c=i[0],o=i[1];function l(e){return c||o(e),e}var u=Object(p.a)(t.event,{}).replace("Uss","USS").replace("Fss","FSS").replace("Dss","DSS");t.StarSystem=t.StarSystem||t.SystemName;var m=r.a.createElement(r.a.Fragment,null,t.StarSystem&&(t.StationName?r.a.createElement(te,{station:[t.StarSystem,t.StationName]}):t.Body||t.BodyName?r.a.createElement(oe,{body:l(c||{_type:"body",id:t.BodyID,name:t.Body||t.BodyName,type:t.PlanetClass||t.StarType&&"".concat(t.StarType+t.Subclass,"-").concat(t.Luminosity," star"),system:t.StarSystem,attributes:{Type:t.PlanetClass,"Earth masses":t.MassEM,Atmosphere:Object(p.a)(t.Atmosphere||""),Volcanism:Object(p.a)(t.Volcanism||""),Landable:t.Landable&&"Landable",State:t.TerraformState,Discovered:!t.wasDiscovered&&"Discovered"}})}):r.a.createElement(me,{system:t.StarSystem})),t.Ship_Localised&&r.a.createElement(se,{ship:l(c||{name:t.Ship_Localised,pilot:t.PilotName_Localised||t.Commander})}),t.USSType_Localised&&r.a.createElement(fe,{signalSource:l(c||{name:t.USSType_Localised,threat:t.USSThreat})}));return n?m:r.a.createElement(X,{variant:"muted",handle:t,name:u,below:r.a.createElement(r.a.Fragment,null,t.From_Localised&&r.a.createElement("small",{className:"text-secondary d-block"},t.From_Localised,":"),t.Message_Localised&&r.a.createElement("small",{className:"text-muted d-block"},t.Message_Localised)),sub:t.timestamp.getUTCHours().toString().padStart(2,"0")+":"+t.timestamp.getUTCMinutes().toString().padStart(2,"0")},m)}var ye=["Location","FSDJump","CarrierJump"],ve=function(){function e(){Object(L.a)(this,e),this.name=null,this.journal=[],this.discoveries=[],this._currentSystem=null}return Object(T.a)(e,[{key:"getLatest",value:function(e){var t,n=Object(D.a)(this.journal);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.event===e)return a}}catch(r){n.e(r)}finally{n.f()}}},{key:"getCurrentSystem",value:function(e){return this._currentSystem&&(e.getSystem(this._currentSystem.name)||this._currentSystem)}},{key:"update",value:function(e){var t=this;if(e.journalEntries){e.journalEntries.forEach((function(e){e.timestamp=new Date(e.timestamp);var n=t.journal.findIndex((function(t){return t.uid&&t.uid===e.uid}));if(-1!==n?t.journal[n]=e:t.journal.unshift(e),e.hasOwnProperty("WasDiscovered")&&!e.WasDiscovered&&!e.WasMapped)if(-1!==(n=t.discoveries.findIndex((function(t){return t.BodyName===e.BodyName})))){var a=t.discoveries[n];(a.timestamp<e.timestamp||a.uid<e.uid)&&(t.discoveries[n]=e)}else t.discoveries.unshift(e)})),this.journal=this.journal.sort((function(e,t){return-(e.timestamp===t.timestamp?e.uid-t.uid:e.timestamp-t.timestamp)})),this.discoveries=this.discoveries.sort((function(e,t){return-(e.timestamp===t.timestamp?e.uid-t.uid:e.timestamp-t.timestamp)})),console.log(this.discoveries.filter((function(e){return e.TerraformState})));var n=this.getLatest("Commander");this.name=n?n.Name:null}this._currentSystem=null;var a,r=Object(D.a)(this.journal);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(ye.includes(s.event)){this._currentSystem={_type:"system",name:s.StarSystem||s.SystemName,x:s.StarPos[0],y:s.StarPos[1],z:s.StarPos[2],population:s.Population,states:[],stations:[],bodies:[],attributes:{}};break}}}catch(i){r.e(i)}finally{r.f()}}}]),e}(),pe=n(158),be=n(155);function ge(e){var t=e.name,n=e.detail,a=e.children;return r.a.createElement(X,{name:t,icon:r.a.createElement(be.a,null),detail:n},a)}var Ee=null,Se=!0;function je(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)(null),c=Object(d.a)(i,2),b=c[0],g=c[1],E=Object(a.useState)(null),S=Object(d.a)(E,2),j=S[0],_=S[1],D=Object(a.useState)(null),L=Object(d.a)(D,2),T=L[0],P=L[1],F=Object(a.useState)(null),M=Object(d.a)(F,2),B=M[0],z=M[1],R=Object(a.useState)(""),I=Object(d.a)(R,2),A=I[0],U=I[1],W=Object(a.useState)(void 0),K=Object(d.a)(W,2),J=K[0],V=K[1],Y=Object(a.useState)(""),G=Object(d.a)(Y,2),$=G[0],Q=G[1],X=Object(a.useState)([]),ee=Object(d.a)(X,2),ne=ee[0],ae=ee[1],re=Object(a.useState)([]),se=Object(d.a)(re,2),ie=se[0],ce=se[1],le=Object(a.useState)(null),de=Object(d.a)(le,2),fe=de[0],ye=de[1];function be(e){return je.apply(this,arguments)}function je(){return(je=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),e.next=3,O(t);case 3:return n=e.sent,P(n),z(!1),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(){T&&T.close(),P(null),z(!1),g(null)}n||(n={set:function(e){s(Object(m.a)(Object(m.a)({},n),e))}},s(n)),b||(b=new ve,g(b)),T&&(T.removeListener("message",Ee),Ee=function(e){b.update(e),g(null),g(b)},T.on("message",Ee));var _e=localStorage.websocket;if(Se){Se=!1;var ke=setTimeout((function(){return Oe()}),1e3);be(_e||"localhost").then((function(){return clearTimeout(ke)})).catch((function(e){return console.error(e)}))}if(!j)return function(){return q.apply(this,arguments)}().then((function(e){return _(e)})),r.a.createElement("div",{style:{marginTop:"20vh"}},r.a.createElement("div",{style:{maxWidth:"960px",animationDuration:"1s"}},r.a.createElement("h4",{className:"text-center text-light mb-5 animate-fade-in",style:{animationDuration:"1s"}},"Loading galaxy data..."),r.a.createElement("img",{className:"d-block mx-auto animate-fade-in",style:{animationDuration:"4s"},src:"img/favicon.png",alt:"Loading..."})));J=J||(T?"nearby":"settings");var we=b.getCurrentSystem(j),Ne=j.setRelativeSystem(j.getSystem(parseInt(A)?null:A)||we||"Sol"),xe=["Music","FSSSignalDiscovered"];function Ce(e){return!xe.includes(e.event)}function De(e){e?V("search"):e="",Q(e),ae(j.search(e)),ye(null)}var Le=null;return r.a.createElement(C.Provider,{value:n},r.a.createElement(w.Provider,{value:{selected:fe,setSelected:ye,ancestors:[]}},r.a.createElement(x.Provider,{value:{filter:function(e){return!0},favorites:ie,addFavorite:function(e){e._type&&ce([e].concat(Object(l.a)(ie.filter((function(t){return t!==e})))))},removeFavorite:function(e){ce(ie.filter((function(t){return t!==e})))}}},r.a.createElement(k.Provider,{value:j},r.a.createElement(N.Provider,{value:{text:$,isRelevant:function(e){return j._isSearchRelevant($,e)}}},r.a.createElement("div",{className:"p-2"},r.a.createElement("div",null,b.name&&r.a.createElement("h6",{className:"text-primary float-right mt-1"},"CMDR ",b.name),r.a.createElement("h5",{className:"text-"+(Ne.name.toLowerCase()===A.toLowerCase()?"success":T?we&&Ne.name.toLowerCase()!==we.name.toLowerCase()?"danger":"info":"light")},Ne.name)),r.a.createElement(f.a,{size:"lg",className:"mb-2"},r.a.createElement("input",{type:"text",className:"form-control",value:$,placeholder:"Search...",ref:function(e){return Le=e},onChange:function(e){return De(e.target.value)}})),r.a.createElement(h.a,{activeKey:J,onSelect:function(e){V(e),ye(null),"search"===e&&Le&&("search"===J&&Le.value?(Le.value="",De()):Le.select(),Le.focus())}},r.a.createElement(y.a,{eventKey:"search",title:r.a.createElement(pe.c,{className:"h4 mt-1"})},"search"===J&&($?r.a.createElement(Z,{items:ne,size:20,render:function(e,t){return r.a.createElement(ue,{key:t,result:e})}}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,{items:ie,size:10,render:function(e,t){return r.a.createElement(ue,{key:t,result:e})}}),r.a.createElement(Z,{items:j.getNearestSystems((function(){return function(e){return!ie.includes(e)}}),80),size:10,render:function(e,t){return r.a.createElement(ue,{key:t,result:e})}})))),r.a.createElement(y.a,{eventKey:"nearby",title:r.a.createElement(pe.a,{className:"h4 mt-1"})},"nearby"===J&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mt-2"},r.a.createElement(ge,{name:"Nearby stations",detail:function(){return r.a.createElement(Z,{items:j.getNearestStations(),size:3,render:function(e,t){return r.a.createElement(ue,{key:t,result:e})}})}}),r.a.createElement(ge,{name:"Pristine rings",detail:function(){return r.a.createElement(r.a.Fragment,null,j.ringTypes.map((function(e,t){return r.a.createElement(ge,{key:t,name:e,detail:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,{items:j.getNearestRingBodies(e).filter((function(e){return n.allResourceTypes||"Pristine"===e.system.reserveType})),size:2,render:function(e,t){return r.a.createElement(oe,{key:t,body:e})}}))}})})))}}),r.a.createElement(ge,{name:"Material traders",detail:function(){return j.materialTypes.map((function(e,t){return r.a.createElement(ge,{key:t,name:e,detail:function(){return r.a.createElement(Z,{items:j.getNearestStations((function(t){return t.services.includes(e+" Material Trader")})),size:2,render:function(e,t){return r.a.createElement(te,{key:t,station:e})}})}})}))}}),r.a.createElement(ge,{name:"Services",detail:function(){return["Interstellar Factors","Black Market","Technology Broker"].map((function(e,t){return r.a.createElement(ge,{key:t,name:Object(p.a)(e),detail:function(){return r.a.createElement(Z,{items:j.getNearestStations((function(t){return t.services.includes(e)})),size:2,render:function(e,t){return r.a.createElement(te,{key:t,station:e})}})}})}))}})))),r.a.createElement(y.a,{eventKey:"settings",title:r.a.createElement(pe.b,{className:"h4 mt-1"})},"settings"===J&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"p-2"},r.a.createElement("div",{className:"p-2"},r.a.createElement("h5",{className:"text-"+(A?Ne.name.toLowerCase()===A.toLowerCase()?"success":"danger":"light")},"Current system:"),r.a.createElement(f.a,{size:"md",className:"my-1",style:{opacity:.8}},r.a.createElement("input",{type:"text",className:"form-control",value:A,placeholder:"Choose populated system...",onFocus:function(e){return e.target.select()},onChange:function(e){return De(null)&U(e.target.value)}})),r.a.createElement(me,{system:Ne})),r.a.createElement(v.a,{size:"lg",variant:"outline-"+(T?"light":B?"warning":"info"),className:"w-100 py-2 my-3",style:{opacity:T&&.5},onClick:function(){return T?Oe():(Oe(),void H.a.prompt({title:"Connect to IP address:",value:T?T.io.uri.replace("ws://",""):localStorage.websocket||"localhost",callback:function(e){e&&(localStorage.websocket=e||"",be(e).catch((function(e){return console.error(e)})))}}))}},T?"Connected":B?"Connecting...":"Connect"),T?r.a.createElement(r.a.Fragment,null,r.a.createElement(ge,{name:"Recent actions",detail:function(){return r.a.createElement(Z,{items:b.journal.filter(Ce),size:5,render:function(e,t){return r.a.createElement(he,{key:"".concat(e.timestamp).concat(t),entry:e})}})}}),r.a.createElement(ge,{name:"Discoveries",detail:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge,{name:"Everything",detail:function(){return r.a.createElement(Z,{items:b.discoveries,size:10,render:function(e,t){return r.a.createElement(he,{key:"".concat(e.timestamp).concat(t),internal:!0,entry:e})}})}}),r.a.createElement(ge,{name:"Terraformable",detail:function(){return r.a.createElement(Z,{items:b.discoveries.filter((function(e){return e.TerraformState})),size:10,render:function(e,t){return r.a.createElement(he,{key:"".concat(e.timestamp).concat(t),internal:!0,entry:e})}})}}))}})):r.a.createElement("a",{href:"data/elite-navigator.exe",target:"_blank"},r.a.createElement(v.a,{variant:"outline-light",className:"w-100 py-2 my-2",style:{opacity:.7}},"Download location sync"))))))))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(je,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},87:function(e,t,n){e.exports=n(149)},94:function(e,t,n){},96:function(e,t,n){}},[[87,1,2]]]);
//# sourceMappingURL=main.90804cee.chunk.js.map